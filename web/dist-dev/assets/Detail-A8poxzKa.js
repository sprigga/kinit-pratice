var Q=Object.defineProperty;var V=Object.getOwnPropertySymbols;var X=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var $=(r,i,a)=>i in r?Q(r,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):r[i]=a,L=(r,i)=>{for(var a in i||(i={}))X.call(i,a)&&$(r,a,i[a]);if(V)for(var a of V(i))Y.call(i,a)&&$(r,a,i[a]);return r};var f=(r,i,a)=>new Promise((w,b)=>{var D=o=>{try{v(a.next(o))}catch(c){b(c)}},x=o=>{try{v(a.throw(o))}catch(c){b(c)}},v=o=>o.done?w(o.value):Promise.resolve(o.value).then(D,x);v((a=a.apply(r,i)).next())});import{g as Z,a as ee,d as te,b as ae,p as le}from"./detail-C4A8I9Y8.js";import{u as ie,_ as se}from"./Table.vue_vue_type_script_lang-R3v9WsBF.js";import{d as oe,q as g}from"./index-BsUFl8WW.js";import{_ as ne}from"./Search.vue_vue_type_script_setup_true_lang-D2iD-Cem.js";import{_ as re}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BH7Lshxr.js";import{_ as de}from"./Write.vue_vue_type_script_setup_true_lang-DoG49MXk.js";import{_ as ue}from"./Dialog.vue_vue_type_style_index_0_lang-BxUn_kyz.js";import{u as ce}from"./dict-ttqq3e93.js";import{m as pe,g as me}from"./element-plus-BDQDiIak.js";import{l as fe,a as d,J as O,O as s,_ as A,ar as B,V as _,P as E,m as T,p as ve,R as u,u as t,B as F,S as ge,W as U}from"./vue-chunks-DM5Q6aJS.js";import"./useForm-BPE0GJRY.js";import"./style.css_vue_type_style_index_0_src_true_lang-jwozmq-F.js";import"./wang-editor-CLgHiBvf.js";import"./_Uint8Array-DKqHwQen.js";import"./useIcon-CGEWj5sB.js";import"./useValidator-s_gjQ478.js";import"./dict-Dgnb-fjD.js";const Oe=fe({name:"BpminItDetail",__name:"Detail",setup(r){const{t:i}=oe(),{tableRegister:a,tableState:w,tableMethods:b}=ie({fetchDataApi:()=>f(this,null,function*(){const{pageSize:l,currentPage:e}=w,n=yield ee(L({page:t(e),limit:t(l)},t(C)));return{list:n.data||[],total:n.count||0}}),fetchDelApi:l=>f(this,null,function*(){return(yield te(l)).code===200})}),{dataList:D,loading:x,total:v,pageSize:o,currentPage:c}=w,{getList:h,delList:N}=b,j=d([]);f(this,null,function*(){const e=yield ce().getDictObj(["sys_vadmin_platform"]);j.value=e.sys_vadmin_platform});const q=O([{field:"work_desc",label:"需求描述",width:"150px",show:!0,disabled:!0},{field:"rsn",label:"參照序號",width:"150px",show:!0,disabled:!0},{field:"status",label:"狀態",width:"150px",show:!0,disabled:!0},{field:"create_datetime",label:"創建時間",width:"150px",show:!0,disabled:!0},{field:"update_datetime",label:"更新時間",width:"150px",show:!0,disabled:!0},{field:"action",label:"操作",width:"200px",show:!0,slots:{default:l=>{const e=l.row,n=["bpmin.it.detail.update"],p=["bpmin.it.detail.delete"];return s(E,null,[A(s(g,{type:"primary",link:!0,size:"small",onClick:()=>W(e)},{default:()=>[_("編輯")]}),[[B("hasPermi"),n]]),A(s(g,{type:"danger",loading:k.value,link:!0,size:"small",onClick:()=>M(e)},{default:()=>[_("删除")]}),[[B("hasPermi"),p]])])}}}]),J=O([{field:"create_datetime",label:"創建時間",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}},{field:"update_datetime",label:"更新時間",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}}]),C=d({}),I=l=>{c.value=1,C.value=l,h()},k=d(!1),M=l=>f(this,null,function*(){k.value=!0,yield N(!0,[l.id]).finally(()=>{k.value=!1})}),m=d(!1),P=d(""),R=d(),y=d(""),z=d(),S=d(!1),W=l=>f(this,null,function*(){const e=yield Z(l.id);e&&(P.value="編輯資料",y.value="edit",R.value=e.data,m.value=!0)}),G=()=>{P.value="新增資料",y.value="add",R.value=void 0,m.value=!0},H=["bpmin.it.detail.create"],K=()=>f(this,null,function*(){const l=t(z),e=yield l==null?void 0:l.submit();if(e){S.value=!0;try{const n=d({});y.value==="add"?(n.value=yield ae(e),n.value&&(m.value=!1,h())):y.value==="edit"&&(n.value=yield le(e),n.value&&(m.value=!1,h()))}finally{S.value=!1}}});return(l,e)=>{const n=B("hasPermi");return T(),ve(E,null,[s(t(re),null,{default:u(()=>[s(t(ne),{schema:J,onReset:I,onSearch:I},null,8,["schema"]),s(t(se),{"current-page":t(c),"onUpdate:currentPage":e[0]||(e[0]=p=>F(c)?c.value=p:null),"page-size":t(o),"onUpdate:pageSize":e[1]||(e[1]=p=>F(o)?o.value=p:null),showAction:"",columns:q,"default-expand-all":"","node-key":"id",data:t(D),loading:t(x),pagination:{total:t(v)},onRegister:t(a),onRefresh:t(h)},{toolbar:u(()=>[s(t(pe),{gutter:10},{default:u(()=>[s(t(me),{span:1.5},{default:u(()=>[A((T(),ge(t(g),{type:"primary",onClick:G},{default:u(()=>[_("新增資料")]),_:1})),[[n,{add:H}]])]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),s(t(ue),{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=p=>m.value=p),title:P.value,height:650},{footer:u(()=>[s(t(g),{type:"primary",loading:S.value,onClick:K},{default:u(()=>[_(U(t(i)("exampleDemo.save")),1)]),_:1},8,["loading"]),s(t(g),{onClick:e[2]||(e[2]=p=>m.value=!1)},{default:u(()=>[_(U(t(i)("dialogDemo.close")),1)]),_:1})]),default:u(()=>[s(de,{ref_key:"writeRef",ref:z,"current-row":R.value},null,8,["current-row"])]),_:1},8,["modelValue","title"])],64)}}});export{Oe as default};
//# sourceMappingURL=Detail-A8poxzKa.js.map
