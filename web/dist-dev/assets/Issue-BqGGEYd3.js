var V=Object.defineProperty;var P=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var k=(i,a,e)=>a in i?V(i,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[a]=e,A=(i,a)=>{for(var e in a||(a={}))F.call(a,e)&&k(i,e,a[e]);if(P)for(var e of P(a))N.call(a,e)&&k(i,e,a[e]);return i};var c=(i,a,e)=>new Promise((m,f)=>{var h=o=>{try{p(e.next(o))}catch(r){f(r)}},g=o=>{try{p(e.throw(o))}catch(r){f(r)}},p=o=>o.done?m(o.value):Promise.resolve(o.value).then(h,g);p((e=e.apply(i,a)).next())});import{g as T,d as U}from"./issue-CHeW3bIO.js";import{u as j,_ as q}from"./Table.vue_vue_type_script_lang-R3v9WsBF.js";import{_ as H}from"./Search.vue_vue_type_script_setup_true_lang-D2iD-Cem.js";import{_ as J}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BH7Lshxr.js";import{u as M}from"./dict-ttqq3e93.js";import{l as G,aB as K,a as _,J as z,O as n,P as C,V as b,m as Q,S as W,R as d,u as t,B as D}from"./vue-chunks-DM5Q6aJS.js";import{q as v}from"./index-BsUFl8WW.js";import{A as X,m as Y,g as Z}from"./element-plus-BDQDiIak.js";import"./useForm-BPE0GJRY.js";import"./style.css_vue_type_style_index_0_src_true_lang-jwozmq-F.js";import"./wang-editor-CLgHiBvf.js";import"./_Uint8Array-DKqHwQen.js";import"./useIcon-CGEWj5sB.js";import"./dict-Dgnb-fjD.js";const ge=G({name:"HelpIssue",__name:"Issue",setup(i){const{push:a}=K(),{tableRegister:e,tableState:m,tableMethods:f}=j({fetchDataApi:()=>c(this,null,function*(){const{pageSize:s,currentPage:l}=m,u=yield T(A({page:t(l),limit:t(s)},t(S)));return{list:u.data||[],total:u.count||0}}),fetchDelApi:s=>c(this,null,function*(){return(yield U(s)).code===200})}),{dataList:h,loading:g,total:p,pageSize:o,currentPage:r}=m,{getList:y,delList:L}=f,x=_([]);c(this,null,function*(){const l=yield M().getDictObj(["sys_vadmin_platform"]);x.value=l.sys_vadmin_platform});const O=z([{field:"id",label:"編號",show:!0,disabled:!0,width:"120px"},{field:"category.name",label:"類别名稱",width:"200px",show:!0,disabled:!0},{field:"title",label:"標題",show:!0},{field:"view_number",label:"查看次數",show:!0,width:"100px"},{field:"is_active",label:"是否可見",show:!0,width:"100px",slots:{default:s=>{const l=s.row;return n(C,null,[n(X,{modelValue:l.is_active,disabled:!0},null)])}}},{field:"create_datetime",label:"創建時間",show:!0,width:"200px",sortable:!0},{field:"create_user.name",label:"創建人",show:!0,width:"100px"},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:s=>{const l=s.row;return n(C,null,[n(v,{type:"primary",link:!0,size:"small",onClick:()=>B(l)},{default:()=>[b("編輯")]}),n(v,{type:"danger",loading:w.value,link:!0,size:"small",onClick:()=>$(l)},{default:()=>[b("删除")]})])}}}]),I=z([{field:"name",label:"類别名稱",component:"Input",componentProps:{clearable:!0,style:{width:"214px"}}},{field:"platform",label:"登錄平台",component:"Select",componentProps:{style:{width:"214px"},options:x.value}},{field:"is_active",label:"是否可見",component:"Select",componentProps:{style:{width:"214px"},options:[{label:"可見",value:!0},{label:"不可見",value:!1}]}}]),S=_({}),R=s=>{r.value=1,S.value=s,y()},w=_(!1),$=s=>c(this,null,function*(){w.value=!0,yield L(!0,[s.id]).finally(()=>{w.value=!1})}),B=s=>c(this,null,function*(){a(`/help/issue/form?id=${s.id}`)}),E=()=>{a("/help/issue/form")};return(s,l)=>(Q(),W(t(J),null,{default:d(()=>[n(t(H),{schema:I,onReset:R,onSearch:R},null,8,["schema"]),n(t(q),{"current-page":t(r),"onUpdate:currentPage":l[0]||(l[0]=u=>D(r)?r.value=u:null),"page-size":t(o),"onUpdate:pageSize":l[1]||(l[1]=u=>D(o)?o.value=u:null),showAction:"",columns:O,"default-expand-all":"","node-key":"id",data:t(h),loading:t(g),pagination:{total:t(p)},onRegister:t(e),onRefresh:t(y)},{toolbar:d(()=>[n(t(Y),{gutter:10},{default:d(()=>[n(t(Z),{span:1.5},{default:d(()=>[n(t(v),{type:"primary",onClick:E},{default:d(()=>[b("新增常見問題")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}))}});export{ge as default};
//# sourceMappingURL=Issue-BqGGEYd3.js.map
