{"version":3,"file":"It-CaMSG3tL.js","sources":["../../src/api/bpmin/it/it.ts","../../src/views/Bpmin/It/It/It.vue"],"sourcesContent":["import request from '@/config/axios'\n\n/** 获取 資訊需求單 列表 */\nexport const getBpminItListApi = (params: any): Promise<IResponse> => {\n  return request.get({ url: '/bpmin/it/it', params })\n}\n\n/** 创建 資訊需求單 */\nexport const addBpminItApi = (data: any): Promise<IResponse> => {\n  return request.post({ url: '/bpmin/it/it', data })\n}\n\n/** 删除 資訊需求單 */\nexport const delBpminItApi = (data: any): Promise<IResponse> => {\n  return request.delete({ url: '/bpmin/it/it', data })\n}\n\n/** 更新 資訊需求單 */\nexport const putBpminItApi = (data: any): Promise<IResponse> => {\n  return request.put({ url: `/bpmin/it/it/${data.id}`, data })\n}\n\n/** 获取单个 資訊需求單 详情 */\nexport const getBpminItApi = (dataId: number): Promise<IResponse> => {\n  return request.get({ url: `/bpmin/it/it/${dataId}` })\n}\n","<script setup lang=\"tsx\">\nimport { reactive, ref, unref } from 'vue'\nimport {\n  getBpminItListApi,\n  addBpminItApi,\n  delBpminItApi,\n  putBpminItApi,\n  getBpminItApi\n} from '@/api/bpmin/it/it'\nimport {\n  getBpminItDetailListApi,\n  addBpminItDetailApi,\n  delBpminItDetailApi\n} from '@/api/bpmin/it/detail'\n\nimport { useTable } from '@/hooks/web/useTable'\nimport { useI18n } from '@/hooks/web/useI18n'\nimport { Table, TableColumn } from '@/components/Table'\nimport {\n  ElRow,\n  ElCol,\n  ElMessage,\n  ElMessageBox,\n  ElInput,\n  ElSelect,\n  ElOption,\n  ElTable,\n  ElTableColumn,\n  ElTag,\n  ElDialog\n} from 'element-plus'\nimport { Search } from '@/components/Search'\nimport { FormSchema } from '@/components/Form'\nimport { ContentWrap } from '@/components/ContentWrap'\nimport Write from './components/Write.vue'\nimport { Dialog } from '@/components/Dialog'\nimport { useDictStore } from '@/store/modules/dict'\nimport { DictDetail } from '@/utils/dict'\nimport { BaseButton } from '@/components/Button'\n\ndefineOptions({\n  name: 'BpminIt'\n})\n\nconst { t } = useI18n()\n\nconst { tableRegister, tableState, tableMethods } = useTable({\n  fetchDataApi: async () => {\n    const { pageSize, currentPage } = tableState\n    const res = await getBpminItListApi({\n      page: unref(currentPage),\n      limit: unref(pageSize),\n      ...unref(searchParams)\n    })\n    return {\n      list: res.data || [],\n      total: res.count || 0\n    }\n  },\n  fetchDelApi: async (value) => {\n    const res = await delBpminItApi(value)\n    return res.code === 200\n  }\n})\n\nconst { dataList, loading, total, pageSize, currentPage } = tableState\nconst { getList, delList } = tableMethods\n\nconst platformOptions = ref<DictDetail[]>([])\n\nconst getOptions = async () => {\n  const dictStore = useDictStore()\n  const dictOptions = await dictStore.getDictObj(['sys_vadmin_platform'])\n  platformOptions.value = dictOptions.sys_vadmin_platform\n}\n\ngetOptions()\n\n// 初始化數據加載\nconst initData = async () => {\n  await getList()\n}\n\n// 組件掛載後自動加載數據\ninitData()\n\nconst tableColumns = reactive<TableColumn[]>([\n  // {\n  //   field: 'id',\n  //   label: '編號',\n  //   width: '100px',\n  //   show: true,\n  //   disabled: true,\n  //   align: 'center',\n  //   headerAlign: 'center'\n  // },\n  {\n    field: 'serial_number',\n    label: '表單序號',\n    width: '230px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center'\n  },\n  {\n    field: 'apply_date',\n    label: '申請日期',\n    width: '120px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center'\n  },\n  {\n    field: 'dept',\n    label: '申請單位',\n    width: '130px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center'\n  },\n  {\n    field: 'fillman',\n    label: '申請人',\n    width: '180px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center'\n  },\n  {\n    field: 'main_apply_item',\n    label: '申請項目',\n    width: '250px',\n    show: true,\n    disabled: true,\n    showOverflowTooltip: false,\n    align: 'center',\n    headerAlign: 'center'\n  },\n  {\n    field: 'request_desc',\n    label: '需求描述',\n    width: '150px',\n    show: true,\n    disabled: true,\n    showOverflowTooltip: false,\n    className: 'text-wrap-column',\n    align: 'center',\n    headerAlign: 'center'\n  },\n  {\n    field: 'it_undertaker',\n    label: 'IT承辦人',\n    width: '180px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center'\n  },\n  // {\n  //   field: 'treatment',\n  //   label: '處理方式',\n  //   width: '150',\n  //   show: true,\n  //   disabled: true,\n  //   align: 'center',\n  //   headerAlign: 'center'\n  // },\n  {\n    field: 'is_delete',\n    label: '表單狀態',\n    width: '100px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center',\n    slots: {\n      default: (data: any) => {\n        const row = data.row\n        const statusText = row.is_delete\n        const isCompleted = statusText === '已結案'\n        return <ElTag type={isCompleted ? 'success' : 'warning'}>{statusText || '未結案'}</ElTag>\n      }\n    }\n  },\n  {\n    field: 'elapsed_days',\n    label: '經過時間',\n    width: '100px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center',\n    slots: {\n      default: (data: any) => {\n        const row = data.row\n        const days = row.elapsed_days\n        if (days === undefined || days === null) return <span>-</span>\n        return <span>{days} 天</span>\n      }\n    }\n  },\n  {\n    field: 'latest_processing_status',\n    label: '處理狀態',\n    width: '100px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center',\n    slots: {\n      default: (data: any) => {\n        const row = data.row\n        const status = row.latest_processing_status\n        if (!status) return <span style=\"color: #909399;\">-</span>\n        let statusType = 'info'\n        if (status === '已完成') statusType = 'success'\n        else if (status === '處理中') statusType = 'primary'\n        else if (status === '已暫停') statusType = 'warning'\n        else if (status === '已取消') statusType = 'danger'\n        return <ElTag type={statusType as any}>{status}</ElTag>\n      }\n    }\n  },\n  {\n    field: 'datediff',\n    label: '處理天數',\n    width: '100px',\n    show: true,\n    disabled: true,\n    align: 'center',\n    headerAlign: 'center'\n  },\n  {\n    field: 'action',\n    label: '操作',\n    width: '200px',\n    show: true,\n    slots: {\n      default: (data: any) => {\n        const row = data.row\n        const update = ['bpmin.it.it.update']\n        const del = ['bpmin.it.it.delete']\n        return (\n          <>\n            <BaseButton\n              type=\"primary\"\n              v-hasPermi={update}\n              link\n              size=\"small\"\n              onClick={() => editAction(row)}\n            >\n              詳細\n            </BaseButton>\n            <BaseButton type=\"success\" link size=\"small\" onClick={() => viewHistoryAction(row)}>\n              處理歷程\n            </BaseButton>\n            <BaseButton\n              type=\"danger\"\n              v-hasPermi={del}\n              loading={delLoading.value}\n              link\n              size=\"small\"\n              onClick={() => delData(row)}\n            >\n              删除\n            </BaseButton>\n          </>\n        )\n      }\n    }\n  }\n])\n\nconst searchSchema = reactive<FormSchema[]>([\n  {\n    field: 'serial_number',\n    label: '表單序號',\n    component: 'Input',\n    componentProps: {\n      clearable: true,\n      style: { width: '214px' },\n      placeholder: '請輸入表單序號'\n    }\n  },\n  {\n    field: 'apply_date',\n    label: '申請日期',\n    component: 'DatePicker',\n    componentProps: {\n      clearable: true,\n      type: 'date',\n      format: 'YYYY-MM-DD',\n      valueFormat: 'YYYY-MM-DD',\n      style: { width: '214px' },\n      placeholder: '請選擇申請日期'\n    }\n  },\n  {\n    field: 'it_undertaker',\n    label: 'IT承辦人',\n    component: 'Input',\n    componentProps: {\n      clearable: true,\n      style: { width: '214px' },\n      placeholder: '請輸入IT承辦人'\n    }\n  }\n])\n\nconst searchParams = ref({})\nconst setSearchParams = (data: any) => {\n  currentPage.value = 1\n  searchParams.value = data\n  getList()\n}\n\nconst delLoading = ref(false)\n\nconst delData = async (row: any) => {\n  delLoading.value = true\n  await delList(true, [row.id]).finally(() => {\n    delLoading.value = false\n  })\n}\n\nconst dialogVisible = ref(false)\nconst dialogTitle = ref('')\n\nconst currentRow = ref()\nconst actionType = ref('')\n\nconst writeRef = ref<any>()\n\nconst saveLoading = ref(false)\n\nconst editAction = async (row: any) => {\n  const res = await getBpminItApi(row.id)\n  if (res) {\n    dialogTitle.value = '詳細資料'\n    actionType.value = 'edit'\n    currentRow.value = res.data\n    dialogVisible.value = true\n  }\n}\n\nconst addAction = () => {\n  dialogTitle.value = '新增資料'\n  actionType.value = 'add'\n  currentRow.value = undefined\n  dialogVisible.value = true\n}\n\nconst add = ['bpmin.it.it.create']\n\n// 表單歷程相關變數\nconst historyDialogVisible = ref(false)\nconst historyDialogTitle = ref('')\nconst historyData = ref([])\nconst historyLoading = ref(false)\n// const currentItId = ref<number>()\n\n// 新增記錄表單數據\nconst newRecord = ref({\n  work_desc: '',\n  rsn: '',\n  status: '',\n  create_user: ''\n})\n\n// 查看表單歷程\nconst viewHistoryAction = async (row: any) => {\n  // 獲取完整的資料用於歷程操作\n  const res = await getBpminItApi(row.id)\n  if (res) {\n    currentRow.value = res.data\n    // 設置新增記錄表單的參照序號和預設處理人員\n    newRecord.value.rsn = res.data.serial_number\n    newRecord.value.create_user = res.data.it_undertaker || '' // 設置IT承辦人為預設處理人員\n    historyDialogTitle.value = `處理歷程 - ${row.serial_number}`\n    historyDialogVisible.value = true\n    await getHistoryList()\n  }\n}\n\n// 獲取歷程列表\nconst getHistoryList = async () => {\n  if (!currentRow.value?.serial_number) return\n\n  historyLoading.value = true\n  try {\n    const requestParams = {\n      rsn: currentRow.value.serial_number,\n      page: 1,\n      limit: 100\n    }\n    console.log('請求歷程數據的參數:', requestParams)\n\n    const res = await getBpminItDetailListApi(requestParams)\n    console.log('API返回的原始數據:', res)\n\n    // 前端再次過濾確保數據正確性\n    const filteredData =\n      res.data?.filter((record: any) => record.rsn === currentRow.value?.serial_number) || []\n\n    // console.log(`篩選前: ${res.data?.length || 0} 筆, 篩選後: ${filteredData.length} 筆`)\n    // console.log('目標RSN:', currentRow.value.serial_number)\n\n    historyData.value = filteredData\n  } catch (error) {\n    console.error('獲取表單歷程失敗:', error)\n    historyData.value = []\n  } finally {\n    historyLoading.value = false\n  }\n}\n\n// 新增歷程記錄\nconst addHistoryRecord = async (data: any) => {\n  try {\n    const res = await addBpminItDetailApi({\n      ...data,\n      rsn: currentRow.value?.serial_number // 使用主表的序號作為外鍵關聯\n    })\n    if (res.code === 200) {\n      await getHistoryList() // 重新載入列表\n      return true\n    }\n    return false\n  } catch (error) {\n    console.error('新增歷程記錄失敗:', error)\n    return false\n  }\n}\n\n// 提交新增記錄\nconst submitHistoryRecord = async () => {\n  // 表單驗證\n  if (!newRecord.value.create_user) {\n    ElMessage.warning('請輸入處理人')\n    return\n  }\n  if (!newRecord.value.status) {\n    ElMessage.warning('請選擇狀態')\n    return\n  }\n  if (!newRecord.value.work_desc) {\n    ElMessage.warning('請輸入工作描述')\n    return\n  }\n\n  const success = await addHistoryRecord(newRecord.value)\n  if (success) {\n    ElMessage.success('新增歷程記錄成功')\n    // 清空表單但保留預設值\n    newRecord.value = {\n      work_desc: '',\n      rsn: currentRow.value?.serial_number || '',\n      status: '',\n      create_user: currentRow.value?.it_undertaker || '' // 保持IT承辦人為預設處理人員\n    }\n  } else {\n    ElMessage.error('新增歷程記錄失敗')\n  }\n}\n\n// 刪除歷程記錄\nconst deleteHistoryRecord = async (row: any) => {\n  if (!row.id) {\n    ElMessage.error('無效的記錄ID')\n    return\n  }\n\n  try {\n    // 確認刪除\n    await ElMessageBox.confirm(\n      `確定要刪除這筆歷程記錄嗎？\\n承辦人員: ${row.create_user}\\n工作描述: ${row.work_desc}`,\n      '確認刪除',\n      {\n        confirmButtonText: '確定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }\n    )\n\n    // API 參數應該是 ids 數組，而不是包含 ids 屬性的對象\n    const res = await delBpminItDetailApi([row.id])\n    if (res && res.code === 200) {\n      ElMessage.success('刪除歷程記錄成功')\n      await getHistoryList() // 重新載入列表\n    } else {\n      ElMessage.error('刪除歷程記錄失敗')\n    }\n  } catch (error) {\n    if (error !== 'cancel') {\n      console.error('刪除歷程記錄失敗:', error)\n      ElMessage.error('刪除歷程記錄失敗')\n    }\n  }\n}\n\n// 狀態標籤類型\nconst getStatusTagType = (status: string) => {\n  switch (status) {\n    case '已完成':\n      return 'success'\n    case '處理中':\n      return 'primary'\n    case '已暫停':\n      return 'warning'\n    case '已取消':\n      return 'danger'\n    default:\n      return 'info'\n  }\n}\n\nconst save = async () => {\n  const write = unref(writeRef)\n  const formData = await write?.submit()\n  if (formData) {\n    saveLoading.value = true\n    try {\n      const res = ref({})\n      if (actionType.value === 'add') {\n        res.value = await addBpminItApi(formData)\n        if (res.value) {\n          dialogVisible.value = false\n          getList()\n        }\n      } else if (actionType.value === 'edit') {\n        res.value = await putBpminItApi(formData)\n        if (res.value) {\n          dialogVisible.value = false\n          getList()\n        }\n      }\n    } finally {\n      saveLoading.value = false\n    }\n  }\n}\n</script>\n\n<template>\n  <div>\n    <ContentWrap>\n      <Search :schema=\"searchSchema\" @reset=\"setSearchParams\" @search=\"setSearchParams\" />\n      <Table\n        v-model:current-page=\"currentPage\"\n        v-model:page-size=\"pageSize\"\n        showAction\n        :columns=\"tableColumns\"\n        default-expand-all\n        node-key=\"id\"\n        :data=\"dataList\"\n        :loading=\"loading\"\n        :pagination=\"{\n          total\n        }\"\n        @register=\"tableRegister\"\n        @refresh=\"getList\"\n      >\n        <template #toolbar>\n          <ElRow :gutter=\"10\">\n            <ElCol :span=\"1.5\">\n              <BaseButton type=\"primary\" v-hasPermi=\"{ add }\" @click=\"addAction\"\n                >新增資料</BaseButton\n              >\n            </ElCol>\n          </ElRow>\n        </template>\n      </Table>\n    </ContentWrap>\n    <Dialog v-model=\"dialogVisible\" :title=\"dialogTitle\" :height=\"650\">\n      <Write ref=\"writeRef\" :current-row=\"currentRow\" />\n\n      <template #footer>\n        <BaseButton type=\"primary\" :loading=\"saveLoading\" @click=\"save\">\n          {{ t('exampleDemo.save') }}\n        </BaseButton>\n        <BaseButton @click=\"dialogVisible = false\">{{ t('dialogDemo.close') }}</BaseButton>\n      </template>\n    </Dialog>\n\n    <!-- 表單歷程 Dialog -->\n    <ElDialog\n      v-model=\"historyDialogVisible\"\n      :title=\"historyDialogTitle\"\n      :width=\"800\"\n      draggable\n      :destroy-on-close=\"true\"\n      :close-on-click-modal=\"false\"\n    >\n      <div v-loading=\"historyLoading\">\n        <!-- 新增歷程表單 -->\n        <div\n          style=\"margin-bottom: 20px; padding: 15px; border: 1px solid #e4e7ed; border-radius: 4px\"\n        >\n          <h4 style=\"margin-top: 0\">新增歷程記錄</h4>\n          <ElRow :gutter=\"20\">\n            <ElCol :span=\"8\">\n              <label>承辦人員：</label>\n              <ElInput v-model=\"newRecord.create_user\" readonly placeholder=\"請輸入承辦人員\" />\n            </ElCol>\n            <ElCol :span=\"5\">\n              <label>處理狀態：</label>\n              <ElSelect v-model=\"newRecord.status\" placeholder=\"請選擇狀態\" style=\"width: 100%\">\n                <ElOption label=\"處理中\" value=\"處理中\" />\n                <ElOption label=\"已完成\" value=\"已完成\" />\n                <ElOption label=\"已暫停\" value=\"已暫停\" />\n                <ElOption label=\"已取消\" value=\"已取消\" />\n              </ElSelect>\n            </ElCol>\n            <ElCol :span=\"9\">\n              <label>參照序號：</label>\n              <ElInput :value=\"currentRow?.serial_number\" readonly placeholder=\"自動填入\" />\n            </ElCol>\n          </ElRow>\n          <ElRow style=\"margin-top: 15px\">\n            <ElCol :span=\"24\">\n              <label>工作描述：</label>\n              <ElInput\n                v-model=\"newRecord.work_desc\"\n                type=\"textarea\"\n                :rows=\"3\"\n                placeholder=\"請輸入工作描述\"\n              />\n            </ElCol>\n          </ElRow>\n          <div style=\"margin-top: 15px; text-align: right\">\n            <BaseButton type=\"primary\" @click=\"submitHistoryRecord\">新增記錄</BaseButton>\n          </div>\n        </div>\n\n        <!-- 歷程列表 -->\n        <div>\n          <h4>歷程記錄</h4>\n          <ElTable :data=\"historyData\" border style=\"width: 100%\">\n            <ElTableColumn prop=\"create_user\" label=\"承辦人員\" width=\"120\" align=\"center\" />\n            <ElTableColumn prop=\"status\" label=\"處理狀態\" width=\"100\" align=\"center\">\n              <template #default=\"{ row }\">\n                <ElTag :type=\"getStatusTagType(row.status)\">{{ row.status }}</ElTag>\n              </template>\n            </ElTableColumn>\n            <ElTableColumn prop=\"rsn\" label=\"參照序號\" width=\"120\" align=\"center\" />\n            <ElTableColumn prop=\"work_desc\" label=\"工作描述\" show-overflow-tooltip />\n            <ElTableColumn prop=\"create_datetime\" label=\"建立時間\" width=\"160\" align=\"center\" />\n            <ElTableColumn label=\"操作\" width=\"80\" align=\"center\">\n              <template #default=\"{ row }\">\n                <BaseButton type=\"danger\" size=\"small\" link @click=\"deleteHistoryRecord(row)\">\n                  刪除\n                </BaseButton>\n              </template>\n            </ElTableColumn>\n          </ElTable>\n          <div\n            v-if=\"historyData.length === 0\"\n            style=\"text-align: center; padding: 20px; color: #909399\"\n          >\n            暫無歷程記錄\n          </div>\n        </div>\n      </div>\n\n      <template #footer>\n        <BaseButton @click=\"historyDialogVisible = false\">{{ t('dialogDemo.close') }}</BaseButton>\n      </template>\n    </ElDialog>\n  </div>\n</template>\n\n<style scoped>\n.text-wrap-column {\n  white-space: normal !important;\n  word-wrap: break-word;\n  line-height: 1.5;\n}\n</style>\n"],"names":["getBpminItListApi","params","request","addBpminItApi","data","delBpminItApi","putBpminItApi","getBpminItApi","dataId","_isSlot","s","Object","prototype","toString","call","_isVNode","t","useI18n","tableRegister","tableState","tableMethods","useTable","fetchDataApi","__async","pageSize","currentPage","res","__spreadValues","page","unref","limit","searchParams","list","total","count","fetchDelApi","value","code","dataList","loading","getList","delList","platformOptions","ref","dictOptions","useDictStore","getDictObj","sys_vadmin_platform","tableColumns","reactive","field","label","width","show","disabled","align","headerAlign","showOverflowTooltip","className","slots","default","statusText","row","is_delete","_createVNode2","ElTag","days","elapsed_days","_createTextVNode2","status","latest_processing_status","statusType","update","del","_Fragment","_withDirectives2","BaseButton","onClick","editAction","_resolveDirective2","viewHistoryAction","delLoading","delData","searchSchema","component","componentProps","clearable","style","placeholder","type","format","valueFormat","setSearchParams","id","finally","dialogVisible","dialogTitle","currentRow","actionType","writeRef","saveLoading","addAction","undefined","add","historyDialogVisible","historyDialogTitle","historyData","historyLoading","newRecord","work_desc","rsn","create_user","serial_number","it_undertaker","getHistoryList","requestParams","console","log","getBpminItDetailListApi","filteredData","filter","record","error","addHistoryRecord","addBpminItDetailApi","__spreadProps","submitHistoryRecord","ElMessage","warning","success","deleteHistoryRecord","ElMessageBox","confirm","confirmButtonText","cancelButtonText","delBpminItDetailApi","getStatusTagType","save","write","formData","submit"],"mappings":"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"}