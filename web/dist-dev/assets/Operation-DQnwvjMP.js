var T=Object.defineProperty;var S=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var P=(o,a,e)=>a in o?T(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e,k=(o,a)=>{for(var e in a||(a={}))L.call(a,e)&&P(o,e,a[e]);if(S)for(var e of S(a))N.call(a,e)&&P(o,e,a[e]);return o};var V=(o,a,e)=>new Promise((m,c)=>{var w=s=>{try{d(e.next(s))}catch(i){c(i)}},b=s=>{try{d(e.throw(s))}catch(i){c(i)}},d=s=>s.done?m(s.value):Promise.resolve(s.value).then(w,b);d((e=e.apply(o,a)).next())});import{r as U,d as E,q as C}from"./index-BsUFl8WW.js";import{u as F,_ as J}from"./Table.vue_vue_type_script_lang-R3v9WsBF.js";import{_ as M}from"./Search.vue_vue_type_script_setup_true_lang-D2iD-Cem.js";import{_ as W}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BH7Lshxr.js";import{_ as X}from"./Detail.vue_vue_type_script_setup_true_lang-BXnf1Wj4.js";import{_ as j}from"./Dialog.vue_vue_type_style_index_0_lang-BxUn_kyz.js";import{l as G,J as $,O as u,V as z,P as q,a as p,m as A,p as H,R as h,u as t,B,W as K,S as Q,X as Y}from"./vue-chunks-DM5Q6aJS.js";import"./element-plus-BDQDiIak.js";import"./useForm-BPE0GJRY.js";import"./style.css_vue_type_style_index_0_src_true_lang-jwozmq-F.js";import"./wang-editor-CLgHiBvf.js";import"./_Uint8Array-DKqHwQen.js";import"./useIcon-CGEWj5sB.js";import"./Descriptions-D6Zkljoz.js";const Z=o=>U.get({url:"/vadmin/record/operations",params:o}),he=G({name:"SystemRecordOperation",__name:"Operation",setup(o){const{t:a}=E(),{tableRegister:e,tableState:m,tableMethods:c}=F({fetchDataApi:()=>V(this,null,function*(){const{pageSize:n,currentPage:l}=m,r=yield Z(k({page:t(l),limit:t(n)},t(g)));return{list:r.data||[],total:r.count||0}})}),{dataList:w,loading:b,total:d,pageSize:s,currentPage:i}=m,{getList:_}=c,D=$([{field:"user_id",label:"操作人編號",show:!0,disabled:!0,width:"100px"},{field:"user_name",label:"操作人",show:!0,disabled:!0,width:"100px"},{field:"telephone",label:"帳號",show:!0,disabled:!0,width:"130px"},{field:"request_method",label:"請求方法",show:!0,disabled:!0,width:"100px"},{field:"client_ip",label:"客户端地址",width:"130px",show:!0,disabled:!0},{field:"tags",label:"標籤",width:"130px",show:!0},{field:"summary",label:"操作内容",show:!0},{field:"description",label:"描述",show:!1},{field:"status_code",label:"操作狀態",show:!0,width:"100px"},{field:"route_name",label:"接口函數",show:!1,width:"150px"},{field:"api_path",label:"接口地址",show:!1},{field:"params",label:"請求参數",show:!1},{field:"browser",label:"瀏覽器",show:!0,width:"150px"},{field:"system",label:"系统",show:!1,width:"150px"},{field:"process_time",label:"總耗時",show:!0},{field:"create_datetime",label:"操作時間",show:!0},{field:"action",width:"100px",show:!0,label:"操作",slots:{default:n=>{const l=n.row;return u(q,null,[u(C,{type:"primary",link:!0,onClick:()=>O(l,"detail")},{default:()=>[z("詳情")]})])}}}]),I=$([{field:"telephone",label:"帳號",component:"Input",componentProps:{clearable:!1}},{field:"request_method",label:"請求方法",component:"Input",componentProps:{clearable:!1}},{field:"summary",label:"操作内容",component:"Input",componentProps:{clearable:!1}}]),g=p({}),v=n=>{i.value=1,g.value=n,_()},f=p(!1),x=p(""),y=p(),R=p(""),O=(n,l)=>{x.value=a("exampleDemo.detail"),R.value=l,y.value=n,f.value=!0};return(n,l)=>(A(),H(q,null,[u(t(W),null,{default:h(()=>[u(t(M),{schema:I,onReset:v,onSearch:v},null,8,["schema"]),u(t(J),{"current-page":t(i),"onUpdate:currentPage":l[0]||(l[0]=r=>B(i)?i.value=r:null),"page-size":t(s),"onUpdate:pageSize":l[1]||(l[1]=r=>B(s)?s.value=r:null),showAction:"",columns:D,"node-key":"id",data:t(w),loading:t(b),pagination:{total:t(d)},onRegister:t(e),onRefresh:t(_)},null,8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),u(t(j),{modelValue:f.value,"onUpdate:modelValue":l[3]||(l[3]=r=>f.value=r),title:x.value,width:"800px"},{footer:h(()=>[u(t(C),{onClick:l[2]||(l[2]=r=>f.value=!1)},{default:h(()=>[z(K(t(a)("dialogDemo.close")),1)]),_:1})]),default:h(()=>[R.value==="detail"?(A(),Q(X,{key:0,"current-row":y.value},null,8,["current-row"])):Y("",!0)]),_:1},8,["modelValue","title"])],64))}});export{he as default};
//# sourceMappingURL=Operation-DQnwvjMP.js.map
