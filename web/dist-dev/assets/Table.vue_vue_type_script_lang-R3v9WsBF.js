var po=Object.defineProperty,vo=Object.defineProperties;var mo=Object.getOwnPropertyDescriptors;var ir=Object.getOwnPropertySymbols;var yo=Object.prototype.hasOwnProperty,bo=Object.prototype.propertyIsEnumerable;var nr=(r,o,n)=>o in r?po(r,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[o]=n,je=(r,o)=>{for(var n in o||(o={}))yo.call(o,n)&&nr(r,n,o[n]);if(ir)for(var n of ir(o))bo.call(o,n)&&nr(r,n,o[n]);return r},rr=(r,o)=>vo(r,mo(o));var fe=(r,o,n)=>new Promise((t,e)=>{var i=l=>{try{s(n.next(l))}catch(u){e(u)}},a=l=>{try{s(n.throw(l))}catch(u){e(u)}},s=l=>l.done?t(l.value):Promise.resolve(l.value).then(i,a);s((n=n.apply(r,o)).next())});import{d as na,C as _o,L as Co,k as Z,a as ra,I as Qe,q as aa,M as To,N as ko,O as wo,P as So}from"./index-BsUFl8WW.js";import{b as $i,z as Eo,a0 as Ki,a2 as xo,a1 as Po,a3 as Io,G as Ao,Y as Yi,n as Do,r as Lo,a4 as Oo,h as Ro,a5 as Mo,w as No,F as Fo,V as Bo,x as ii,U as _t,a6 as Ho}from"./element-plus-BDQDiIak.js";import{a as oe,b as Be,u as A,d as Ni,n as gt,l as Jt,e as Rt,K as Uo,J as jo,ag as Vo,c as On,I as Wo,B as Go,ab as Fi,aB as zo,O as D,P as oa,y as sa,aa as $o,z as Ko,m as la,p as Yo,_ as ua,$ as Xo,S as qo,R as Jo,q as ar,as as Zo,ar as Qo,G as ni,V as es}from"./vue-chunks-DM5Q6aJS.js";import{g as Re}from"./useForm-BPE0GJRY.js";import{_ as ca,e as ts,k as fa,i as Rn,a as ha,b as is,c as ns,d as rs,f as da,g as as,h as os,s as ss,j as ls,l as us,m as cs,n as Mn,o as ga,p as pa,q as va,r as fs,t as hs,u as ds,v as gs}from"./_Uint8Array-DKqHwQen.js";const{t:lt}=na(),qd=r=>{const{immediate:o=!0}=r,n=oe(!1),t=oe(1),e=oe(10),i=oe(0),a=oe([]);Be(()=>t.value,()=>{f.getList()}),Be(()=>e.value,()=>{A(t)===1||(t.value=1),f.getList()}),Ni(()=>{o&&f.getList()});const s=oe(),l=oe(),u=(d,g)=>{s.value=d,l.value=A(g)},c=()=>fe(void 0,null,function*(){yield gt();const d=A(s);return d||console.error("The table is not registered. Please use the register method to register"),d}),f={getList:()=>fe(void 0,null,function*(){n.value=!0;try{const d=yield r==null?void 0:r.fetchDataApi();d&&(a.value=d.list,i.value=d.total||0)}catch(d){console.log("fetchDataApi error")}finally{n.value=!1}}),setProps:(...g)=>fe(void 0,[...g],function*(d={}){const p=yield c();p==null||p.setProps(d)}),setColumn:d=>fe(void 0,null,function*(){const g=yield c();g==null||g.setColumn(d)}),addColumn:(d,g)=>fe(void 0,null,function*(){const p=yield c();p==null||p.addColumn(d,g)}),delColumn:d=>fe(void 0,null,function*(){const g=yield c();g==null||g.delColumn(d)}),getElTableExpose:()=>fe(void 0,null,function*(){return yield c(),A(l)}),refresh:()=>{f.getList()},delList:(v,...y)=>fe(void 0,[v,...y],function*(d,g=[],p=!0){var F,N;const{fetchDelApi:T}=r;if(!T){console.warn("fetchDelApi 方法未定義！");return}yield c();let k=[];if(_o(g))if(d)if(((F=A(l))==null?void 0:F.getSelectionRows().length)>0)k=(N=A(l))==null?void 0:N.getSelectionRows().map(E=>{var m;return(m=E.id)!=null?m:E.sfaadocno});else{$i.warning(lt("common.delNoData"));return}else{$i.warning(lt("common.delNoData"));return}else k=g;const C=()=>{$i.success(lt("common.delSuccess"));const E=Co(k)?k.length:1,m=A(i)%A(e)===E||A(e)===1?A(t)>1?A(t)-1:A(t):A(t);t.value=m,f.getList()};p?Eo.confirm(lt("common.delMessage"),lt("common.delWarning"),{confirmButtonText:lt("common.delOk"),cancelButtonText:lt("common.delCancel"),type:"warning"}).then(()=>fe(void 0,null,function*(){(yield T(k))&&C()})):(yield T(k))&&C()}),getSelections:()=>fe(void 0,null,function*(){var d;return yield c(),((d=A(l))==null?void 0:d.getSelectionRows())||[]}),exportQueryList:d=>fe(void 0,null,function*(){const{fetchExportApi:g}=r;if(!g){console.warn("fetchExportApi 方法未定義！");return}d||(d=(yield c()).getColumn().filter(v=>v.show===!0&&v.type!=="selection").map(v=>({field:v.field,label:v.label})));try{n.value=!0;const p=yield g(d);if(p){const v=document.createElement("a");v.style.display="none",v.href=p.data.url,v.target="_blank",v.download=p.data.filename;const y=new MouseEvent("click");v.dispatchEvent(y)}}catch(p){console.log("fetchExportApi error")}finally{n.value=!1}})};return{tableRegister:u,tableMethods:f,tableState:{currentPage:t,pageSize:e,total:i,dataList:a,loading:n}}},ps=(r,o,n,t)=>{const e=o+1;return r?n*(t-1)+e:e};var vs=Object.defineProperty,bi=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,ya=Object.prototype.propertyIsEnumerable,or=(r,o,n)=>o in r?vs(r,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[o]=n,Dt=(r,o)=>{for(var n in o||(o={}))ma.call(o,n)&&or(r,n,o[n]);if(bi)for(var n of bi(o))ya.call(o,n)&&or(r,n,o[n]);return r},ba=(r,o)=>{var n={};for(var t in r)ma.call(r,t)&&o.indexOf(t)<0&&(n[t]=r[t]);if(r!=null&&bi)for(var t of bi(r))o.indexOf(t)<0&&ya.call(r,t)&&(n[t]=r[t]);return n};const _a="[vue-draggable-plus]: ";function ms(r){console.warn(_a+r)}function ys(r){console.error(_a+r)}function sr(r,o,n){return n>=0&&n<r.length&&r.splice(n,0,r.splice(o,1)[0]),r}function bs(r){return r.replace(/-(\w)/g,(o,n)=>n?n.toUpperCase():"")}function _s(r){return Object.keys(r).reduce((o,n)=>(typeof r[n]!="undefined"&&(o[bs(n)]=r[n]),o),{})}function Cs(r,o){if(Array.isArray(r))return r.splice(o,1)}function Ts(r,o,n){if(Array.isArray(r))return r.splice(o,0,n)}function ks(r){return typeof r=="undefined"}function ws(r){return typeof r=="string"}function lr(r,o,n){const t=r.children[n];r.insertBefore(o,t)}function Xi(r){r.parentNode&&r.parentNode.removeChild(r)}function Ss(r,o=document){var n;let t=null;return typeof(o==null?void 0:o.querySelector)=="function"?t=(n=o==null?void 0:o.querySelector)==null?void 0:n.call(o,r):t=document.querySelector(r),t||ms(`Element not found: ${r}`),t}function Es(r,o,n=null){return function(...t){return r.apply(n,t),o.apply(n,t)}}function xs(r,o){const n=Dt({},r);return Object.keys(o).forEach(t=>{n[t]?n[t]=Es(r[t],o[t]):n[t]=o[t]}),n}function Ps(r){return r instanceof HTMLElement}function Is(r,o){Object.keys(r).forEach(n=>{o(n,r[n])})}/**!
 * Sortable 1.15.1
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ur(r,o){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);o&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function Ue(r){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?ur(Object(n),!0).forEach(function(t){As(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function di(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?di=function(o){return typeof o}:di=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},di(r)}function As(r,o,n){return o in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,r}function Ke(){return Ke=Object.assign||function(r){for(var o=1;o<arguments.length;o++){var n=arguments[o];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(r[t]=n[t])}return r},Ke.apply(this,arguments)}function Ds(r,o){if(r==null)return{};var n={},t=Object.keys(r),e,i;for(i=0;i<t.length;i++)e=t[i],!(o.indexOf(e)>=0)&&(n[e]=r[e]);return n}function Ls(r,o){if(r==null)return{};var n=Ds(r,o),t,e;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(r);for(e=0;e<i.length;e++)t=i[e],!(o.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}var Os="1.15.1";function ze(r){if(typeof window!="undefined"&&window.navigator)return!!navigator.userAgent.match(r)}var Xe=ze(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Zt=ze(/Edge/i),cr=ze(/firefox/i),zt=ze(/safari/i)&&!ze(/chrome/i)&&!ze(/android/i),Ca=ze(/iP(ad|od|hone)/i),Ta=ze(/chrome/i)&&ze(/android/i),ka={capture:!1,passive:!1};function J(r,o,n){r.addEventListener(o,n,!Xe&&ka)}function X(r,o,n){r.removeEventListener(o,n,!Xe&&ka)}function _i(r,o){if(o){if(o[0]===">"&&(o=o.substring(1)),r)try{if(r.matches)return r.matches(o);if(r.msMatchesSelector)return r.msMatchesSelector(o);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(o)}catch(n){return!1}return!1}}function Rs(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function Ne(r,o,n,t){if(r){n=n||document;do{if(o!=null&&(o[0]===">"?r.parentNode===n&&_i(r,o):_i(r,o))||t&&r===n)return r;if(r===n)break}while(r=Rs(r))}return null}var fr=/\s+/g;function Te(r,o,n){if(r&&o)if(r.classList)r.classList[n?"add":"remove"](o);else{var t=(" "+r.className+" ").replace(fr," ").replace(" "+o+" "," ");r.className=(t+(n?" "+o:"")).replace(fr," ")}}function M(r,o,n){var t=r&&r.style;if(t){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(n=r.currentStyle),o===void 0?n:n[o];!(o in t)&&o.indexOf("webkit")===-1&&(o="-webkit-"+o),t[o]=n+(typeof n=="string"?"":"px")}}function Mt(r,o){var n="";if(typeof r=="string")n=r;else do{var t=M(r,"transform");t&&t!=="none"&&(n=t+" "+n)}while(!o&&(r=r.parentNode));var e=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return e&&new e(n)}function wa(r,o,n){if(r){var t=r.getElementsByTagName(o),e=0,i=t.length;if(n)for(;e<i;e++)n(t[e],e);return t}return[]}function He(){var r=document.scrollingElement;return r||document.documentElement}function ue(r,o,n,t,e){if(!(!r.getBoundingClientRect&&r!==window)){var i,a,s,l,u,c,f;if(r!==window&&r.parentNode&&r!==He()?(i=r.getBoundingClientRect(),a=i.top,s=i.left,l=i.bottom,u=i.right,c=i.height,f=i.width):(a=0,s=0,l=window.innerHeight,u=window.innerWidth,c=window.innerHeight,f=window.innerWidth),(o||n)&&r!==window&&(e=e||r.parentNode,!Xe))do if(e&&e.getBoundingClientRect&&(M(e,"transform")!=="none"||n&&M(e,"position")!=="static")){var d=e.getBoundingClientRect();a-=d.top+parseInt(M(e,"border-top-width")),s-=d.left+parseInt(M(e,"border-left-width")),l=a+i.height,u=s+i.width;break}while(e=e.parentNode);if(t&&r!==window){var g=Mt(e||r),p=g&&g.a,v=g&&g.d;g&&(a/=v,s/=p,f/=p,c/=v,l=a+c,u=s+f)}return{top:a,left:s,bottom:l,right:u,width:f,height:c}}}function Sa(r){var o=ue(r),n=parseInt(M(r,"padding-left")),t=parseInt(M(r,"padding-top")),e=parseInt(M(r,"padding-right")),i=parseInt(M(r,"padding-bottom"));return o.top+=t+parseInt(M(r,"border-top-width")),o.left+=n+parseInt(M(r,"border-left-width")),o.width=r.clientWidth-n-e,o.height=r.clientHeight-t-i,o.bottom=o.top+o.height,o.right=o.left+o.width,o}function hr(r,o,n){for(var t=it(r,!0),e=ue(r)[o];t;){var i=ue(t)[n],a=void 0;if(n==="top"||n==="left"?a=e>=i:a=e<=i,!a)return t;if(t===He())break;t=it(t,!1)}return!1}function Nt(r,o,n,t){for(var e=0,i=0,a=r.children;i<a.length;){if(a[i].style.display!=="none"&&a[i]!==B.ghost&&(t||a[i]!==B.dragged)&&Ne(a[i],n.draggable,r,!1)){if(e===o)return a[i];e++}i++}return null}function Nn(r,o){for(var n=r.lastElementChild;n&&(n===B.ghost||M(n,"display")==="none"||o&&!_i(n,o));)n=n.previousElementSibling;return n||null}function Pe(r,o){var n=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==B.clone&&(!o||_i(r,o))&&n++;return n}function dr(r){var o=0,n=0,t=He();if(r)do{var e=Mt(r),i=e.a,a=e.d;o+=r.scrollLeft*i,n+=r.scrollTop*a}while(r!==t&&(r=r.parentNode));return[o,n]}function Ms(r,o){for(var n in r)if(r.hasOwnProperty(n)){for(var t in o)if(o.hasOwnProperty(t)&&o[t]===r[n][t])return Number(n)}return-1}function it(r,o){if(!r||!r.getBoundingClientRect)return He();var n=r,t=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var e=M(n);if(n.clientWidth<n.scrollWidth&&(e.overflowX=="auto"||e.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(e.overflowY=="auto"||e.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return He();if(t||o)return n;t=!0}}while(n=n.parentNode);return He()}function Ns(r,o){if(r&&o)for(var n in o)o.hasOwnProperty(n)&&(r[n]=o[n]);return r}function qi(r,o){return Math.round(r.top)===Math.round(o.top)&&Math.round(r.left)===Math.round(o.left)&&Math.round(r.height)===Math.round(o.height)&&Math.round(r.width)===Math.round(o.width)}var $t;function Ea(r,o){return function(){if(!$t){var n=arguments,t=this;n.length===1?r.call(t,n[0]):r.apply(t,n),$t=setTimeout(function(){$t=void 0},o)}}}function Fs(){clearTimeout($t),$t=void 0}function xa(r,o,n){r.scrollLeft+=o,r.scrollTop+=n}function Pa(r){var o=window.Polymer,n=window.jQuery||window.Zepto;return o&&o.dom?o.dom(r).cloneNode(!0):n?n(r).clone(!0)[0]:r.cloneNode(!0)}var Se="Sortable"+new Date().getTime();function Bs(){var r=[],o;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(t){if(!(M(t,"display")==="none"||t===B.ghost)){r.push({target:t,rect:ue(t)});var e=Ue({},r[r.length-1].rect);if(t.thisAnimationDuration){var i=Mt(t,!0);i&&(e.top-=i.f,e.left-=i.e)}t.fromRect=e}})}},addAnimationState:function(n){r.push(n)},removeAnimationState:function(n){r.splice(Ms(r,{target:n}),1)},animateAll:function(n){var t=this;if(!this.options.animation){clearTimeout(o),typeof n=="function"&&n();return}var e=!1,i=0;r.forEach(function(a){var s=0,l=a.target,u=l.fromRect,c=ue(l),f=l.prevFromRect,d=l.prevToRect,g=a.rect,p=Mt(l,!0);p&&(c.top-=p.f,c.left-=p.e),l.toRect=c,l.thisAnimationDuration&&qi(f,c)&&!qi(u,c)&&(g.top-c.top)/(g.left-c.left)===(u.top-c.top)/(u.left-c.left)&&(s=Us(g,f,d,t.options)),qi(c,u)||(l.prevFromRect=u,l.prevToRect=c,s||(s=t.options.animation),t.animate(l,g,c,s)),s&&(e=!0,i=Math.max(i,s),clearTimeout(l.animationResetTimer),l.animationResetTimer=setTimeout(function(){l.animationTime=0,l.prevFromRect=null,l.fromRect=null,l.prevToRect=null,l.thisAnimationDuration=null},s),l.thisAnimationDuration=s)}),clearTimeout(o),e?o=setTimeout(function(){typeof n=="function"&&n()},i):typeof n=="function"&&n(),r=[]},animate:function(n,t,e,i){if(i){M(n,"transition",""),M(n,"transform","");var a=Mt(this.el),s=a&&a.a,l=a&&a.d,u=(t.left-e.left)/(s||1),c=(t.top-e.top)/(l||1);n.animatingX=!!u,n.animatingY=!!c,M(n,"transform","translate3d("+u+"px,"+c+"px,0)"),this.forRepaintDummy=Hs(n),M(n,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),M(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){M(n,"transition",""),M(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},i)}}}}function Hs(r){return r.offsetWidth}function Us(r,o,n,t){return Math.sqrt(Math.pow(o.top-r.top,2)+Math.pow(o.left-r.left,2))/Math.sqrt(Math.pow(o.top-n.top,2)+Math.pow(o.left-n.left,2))*t.animation}var Ct=[],Ji={initializeByDefault:!0},Qt={mount:function(r){for(var o in Ji)Ji.hasOwnProperty(o)&&!(o in r)&&(r[o]=Ji[o]);Ct.forEach(function(n){if(n.pluginName===r.pluginName)throw"Sortable: Cannot mount plugin ".concat(r.pluginName," more than once")}),Ct.push(r)},pluginEvent:function(r,o,n){var t=this;this.eventCanceled=!1,n.cancel=function(){t.eventCanceled=!0};var e=r+"Global";Ct.forEach(function(i){o[i.pluginName]&&(o[i.pluginName][e]&&o[i.pluginName][e](Ue({sortable:o},n)),o.options[i.pluginName]&&o[i.pluginName][r]&&o[i.pluginName][r](Ue({sortable:o},n)))})},initializePlugins:function(r,o,n,t){Ct.forEach(function(a){var s=a.pluginName;if(!(!r.options[s]&&!a.initializeByDefault)){var l=new a(r,o,r.options);l.sortable=r,l.options=r.options,r[s]=l,Ke(n,l.defaults)}});for(var e in r.options)if(r.options.hasOwnProperty(e)){var i=this.modifyOption(r,e,r.options[e]);typeof i!="undefined"&&(r.options[e]=i)}},getEventProperties:function(r,o){var n={};return Ct.forEach(function(t){typeof t.eventProperties=="function"&&Ke(n,t.eventProperties.call(o[t.pluginName],r))}),n},modifyOption:function(r,o,n){var t;return Ct.forEach(function(e){r[e.pluginName]&&e.optionListeners&&typeof e.optionListeners[o]=="function"&&(t=e.optionListeners[o].call(r[e.pluginName],n))}),t}};function js(r){var o=r.sortable,n=r.rootEl,t=r.name,e=r.targetEl,i=r.cloneEl,a=r.toEl,s=r.fromEl,l=r.oldIndex,u=r.newIndex,c=r.oldDraggableIndex,f=r.newDraggableIndex,d=r.originalEvent,g=r.putSortable,p=r.extraEventProperties;if(o=o||n&&n[Se],!!o){var v,y=o.options,T="on"+t.charAt(0).toUpperCase()+t.substr(1);window.CustomEvent&&!Xe&&!Zt?v=new CustomEvent(t,{bubbles:!0,cancelable:!0}):(v=document.createEvent("Event"),v.initEvent(t,!0,!0)),v.to=a||n,v.from=s||n,v.item=e||n,v.clone=i,v.oldIndex=l,v.newIndex=u,v.oldDraggableIndex=c,v.newDraggableIndex=f,v.originalEvent=d,v.pullMode=g?g.lastPutMode:void 0;var k=Ue(Ue({},p),Qt.getEventProperties(t,o));for(var C in k)v[C]=k[C];n&&n.dispatchEvent(v),y[T]&&y[T].call(o,v)}}var Vs=["evt"],_e=function(r,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=n.evt,e=Ls(n,Vs);Qt.pluginEvent.bind(B)(r,o,Ue({dragEl:S,parentEl:ae,ghostEl:G,rootEl:ne,nextEl:ht,lastDownEl:gi,cloneEl:re,cloneHidden:tt,dragStarted:jt,putSortable:de,activeSortable:B.active,originalEvent:t,oldIndex:Lt,oldDraggableIndex:Kt,newIndex:ke,newDraggableIndex:et,hideGhostForTarget:La,unhideGhostForTarget:Oa,cloneNowHidden:function(){tt=!0},cloneNowShown:function(){tt=!1},dispatchSortableEvent:function(i){ve({sortable:o,name:i,originalEvent:t})}},e))};function ve(r){js(Ue({putSortable:de,cloneEl:re,targetEl:S,rootEl:ne,oldIndex:Lt,oldDraggableIndex:Kt,newIndex:ke,newDraggableIndex:et},r))}var S,ae,G,ne,ht,gi,re,tt,Lt,ke,Kt,et,ri,de,At=!1,Ci=!1,Ti=[],ut,Ae,Zi,Qi,gr,pr,jt,Tt,Yt,Xt=!1,ai=!1,pi,ge,en=[],Tn=!1,ki=[],Bi=typeof document!="undefined",oi=Ca,vr=Zt||Xe?"cssFloat":"float",Ws=Bi&&!Ta&&!Ca&&"draggable"in document.createElement("div"),Ia=function(){if(Bi){if(Xe)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),Aa=function(r,o){var n=M(r),t=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),e=Nt(r,0,o),i=Nt(r,1,o),a=e&&M(e),s=i&&M(i),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ue(e).width,u=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ue(i).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(e&&a.float&&a.float!=="none"){var c=a.float==="left"?"left":"right";return i&&(s.clear==="both"||s.clear===c)?"vertical":"horizontal"}return e&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||l>=t&&n[vr]==="none"||i&&n[vr]==="none"&&l+u>t)?"vertical":"horizontal"},Gs=function(r,o,n){var t=n?r.left:r.top,e=n?r.right:r.bottom,i=n?r.width:r.height,a=n?o.left:o.top,s=n?o.right:o.bottom,l=n?o.width:o.height;return t===a||e===s||t+i/2===a+l/2},zs=function(r,o){var n;return Ti.some(function(t){var e=t[Se].options.emptyInsertThreshold;if(!(!e||Nn(t))){var i=ue(t),a=r>=i.left-e&&r<=i.right+e,s=o>=i.top-e&&o<=i.bottom+e;if(a&&s)return n=t}}),n},Da=function(r){function o(e,i){return function(a,s,l,u){var c=a.options.group.name&&s.options.group.name&&a.options.group.name===s.options.group.name;if(e==null&&(i||c))return!0;if(e==null||e===!1)return!1;if(i&&e==="clone")return e;if(typeof e=="function")return o(e(a,s,l,u),i)(a,s,l,u);var f=(i?a:s).options.group.name;return e===!0||typeof e=="string"&&e===f||e.join&&e.indexOf(f)>-1}}var n={},t=r.group;(!t||di(t)!="object")&&(t={name:t}),n.name=t.name,n.checkPull=o(t.pull,!0),n.checkPut=o(t.put),n.revertClone=t.revertClone,r.group=n},La=function(){!Ia&&G&&M(G,"display","none")},Oa=function(){!Ia&&G&&M(G,"display","")};Bi&&!Ta&&document.addEventListener("click",function(r){if(Ci)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),Ci=!1,!1},!0);var ct=function(r){if(S){r=r.touches?r.touches[0]:r;var o=zs(r.clientX,r.clientY);if(o){var n={};for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t]);n.target=n.rootEl=o,n.preventDefault=void 0,n.stopPropagation=void 0,o[Se]._onDragOver(n)}}},$s=function(r){S&&S.parentNode[Se]._isOutsideThisEl(r.target)};function B(r,o){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=o=Ke({},o),r[Se]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Aa(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,a){i.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:B.supportPointer!==!1&&"PointerEvent"in window&&!zt,emptyInsertThreshold:5};Qt.initializePlugins(this,r,n);for(var t in n)!(t in o)&&(o[t]=n[t]);Da(o);for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this));this.nativeDraggable=o.forceFallback?!1:Ws,this.nativeDraggable&&(this.options.touchStartThreshold=1),o.supportPointer?J(r,"pointerdown",this._onTapStart):(J(r,"mousedown",this._onTapStart),J(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(J(r,"dragover",this),J(r,"dragenter",this)),Ti.push(this.el),o.store&&o.store.get&&this.sort(o.store.get(this)||[]),Ke(this,Bs())}B.prototype={constructor:B,_isOutsideThisEl:function(r){!this.el.contains(r)&&r!==this.el&&(Tt=null)},_getDirection:function(r,o){return typeof this.options.direction=="function"?this.options.direction.call(this,r,o,S):this.options.direction},_onTapStart:function(r){if(r.cancelable){var o=this,n=this.el,t=this.options,e=t.preventOnFilter,i=r.type,a=r.touches&&r.touches[0]||r.pointerType&&r.pointerType==="touch"&&r,s=(a||r).target,l=r.target.shadowRoot&&(r.path&&r.path[0]||r.composedPath&&r.composedPath()[0])||s,u=t.filter;if(el(n),!S&&!(/mousedown|pointerdown/.test(i)&&r.button!==0||t.disabled)&&!l.isContentEditable&&!(!this.nativeDraggable&&zt&&s&&s.tagName.toUpperCase()==="SELECT")&&(s=Ne(s,t.draggable,n,!1),!(s&&s.animated)&&gi!==s)){if(Lt=Pe(s),Kt=Pe(s,t.draggable),typeof u=="function"){if(u.call(this,r,s,this)){ve({sortable:o,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),_e("filter",o,{evt:r}),e&&r.cancelable&&r.preventDefault();return}}else if(u&&(u=u.split(",").some(function(c){if(c=Ne(l,c.trim(),n,!1),c)return ve({sortable:o,rootEl:c,name:"filter",targetEl:s,fromEl:n,toEl:n}),_e("filter",o,{evt:r}),!0}),u)){e&&r.cancelable&&r.preventDefault();return}t.handle&&!Ne(l,t.handle,n,!1)||this._prepareDragStart(r,a,s)}}},_prepareDragStart:function(r,o,n){var t=this,e=t.el,i=t.options,a=e.ownerDocument,s;if(n&&!S&&n.parentNode===e){var l=ue(n);if(ne=e,S=n,ae=S.parentNode,ht=S.nextSibling,gi=n,ri=i.group,B.dragged=S,ut={target:S,clientX:(o||r).clientX,clientY:(o||r).clientY},gr=ut.clientX-l.left,pr=ut.clientY-l.top,this._lastX=(o||r).clientX,this._lastY=(o||r).clientY,S.style["will-change"]="all",s=function(){if(_e("delayEnded",t,{evt:r}),B.eventCanceled){t._onDrop();return}t._disableDelayedDragEvents(),!cr&&t.nativeDraggable&&(S.draggable=!0),t._triggerDragStart(r,o),ve({sortable:t,name:"choose",originalEvent:r}),Te(S,i.chosenClass,!0)},i.ignore.split(",").forEach(function(u){wa(S,u.trim(),tn)}),J(a,"dragover",ct),J(a,"mousemove",ct),J(a,"touchmove",ct),J(a,"mouseup",t._onDrop),J(a,"touchend",t._onDrop),J(a,"touchcancel",t._onDrop),cr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,S.draggable=!0),_e("delayStart",this,{evt:r}),i.delay&&(!i.delayOnTouchOnly||o)&&(!this.nativeDraggable||!(Zt||Xe))){if(B.eventCanceled){this._onDrop();return}J(a,"mouseup",t._disableDelayedDrag),J(a,"touchend",t._disableDelayedDrag),J(a,"touchcancel",t._disableDelayedDrag),J(a,"mousemove",t._delayedDragTouchMoveHandler),J(a,"touchmove",t._delayedDragTouchMoveHandler),i.supportPointer&&J(a,"pointermove",t._delayedDragTouchMoveHandler),t._dragStartTimer=setTimeout(s,i.delay)}else s()}},_delayedDragTouchMoveHandler:function(r){var o=r.touches?r.touches[0]:r;Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){S&&tn(S),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var r=this.el.ownerDocument;X(r,"mouseup",this._disableDelayedDrag),X(r,"touchend",this._disableDelayedDrag),X(r,"touchcancel",this._disableDelayedDrag),X(r,"mousemove",this._delayedDragTouchMoveHandler),X(r,"touchmove",this._delayedDragTouchMoveHandler),X(r,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(r,o){o=o||r.pointerType=="touch"&&r,!this.nativeDraggable||o?this.options.supportPointer?J(document,"pointermove",this._onTouchMove):o?J(document,"touchmove",this._onTouchMove):J(document,"mousemove",this._onTouchMove):(J(S,"dragend",this),J(ne,"dragstart",this._onDragStart));try{document.selection?vi(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(n){}},_dragStarted:function(r,o){if(At=!1,ne&&S){_e("dragStarted",this,{evt:o}),this.nativeDraggable&&J(document,"dragover",$s);var n=this.options;!r&&Te(S,n.dragClass,!1),Te(S,n.ghostClass,!0),B.active=this,r&&this._appendGhost(),ve({sortable:this,name:"start",originalEvent:o})}else this._nulling()},_emulateDragOver:function(){if(Ae){this._lastX=Ae.clientX,this._lastY=Ae.clientY,La();for(var r=document.elementFromPoint(Ae.clientX,Ae.clientY),o=r;r&&r.shadowRoot&&(r=r.shadowRoot.elementFromPoint(Ae.clientX,Ae.clientY),r!==o);)o=r;if(S.parentNode[Se]._isOutsideThisEl(r),o)do{if(o[Se]){var n=void 0;if(n=o[Se]._onDragOver({clientX:Ae.clientX,clientY:Ae.clientY,target:r,rootEl:o}),n&&!this.options.dragoverBubble)break}r=o}while(o=o.parentNode);Oa()}},_onTouchMove:function(r){if(ut){var o=this.options,n=o.fallbackTolerance,t=o.fallbackOffset,e=r.touches?r.touches[0]:r,i=G&&Mt(G,!0),a=G&&i&&i.a,s=G&&i&&i.d,l=oi&&ge&&dr(ge),u=(e.clientX-ut.clientX+t.x)/(a||1)+(l?l[0]-en[0]:0)/(a||1),c=(e.clientY-ut.clientY+t.y)/(s||1)+(l?l[1]-en[1]:0)/(s||1);if(!B.active&&!At){if(n&&Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))<n)return;this._onDragStart(r,!0)}if(G){i?(i.e+=u-(Zi||0),i.f+=c-(Qi||0)):i={a:1,b:0,c:0,d:1,e:u,f:c};var f="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");M(G,"webkitTransform",f),M(G,"mozTransform",f),M(G,"msTransform",f),M(G,"transform",f),Zi=u,Qi=c,Ae=e}r.cancelable&&r.preventDefault()}},_appendGhost:function(){if(!G){var r=this.options.fallbackOnBody?document.body:ne,o=ue(S,!0,oi,!0,r),n=this.options;if(oi){for(ge=r;M(ge,"position")==="static"&&M(ge,"transform")==="none"&&ge!==document;)ge=ge.parentNode;ge!==document.body&&ge!==document.documentElement?(ge===document&&(ge=He()),o.top+=ge.scrollTop,o.left+=ge.scrollLeft):ge=He(),en=dr(ge)}G=S.cloneNode(!0),Te(G,n.ghostClass,!1),Te(G,n.fallbackClass,!0),Te(G,n.dragClass,!0),M(G,"transition",""),M(G,"transform",""),M(G,"box-sizing","border-box"),M(G,"margin",0),M(G,"top",o.top),M(G,"left",o.left),M(G,"width",o.width),M(G,"height",o.height),M(G,"opacity","0.8"),M(G,"position",oi?"absolute":"fixed"),M(G,"zIndex","100000"),M(G,"pointerEvents","none"),B.ghost=G,r.appendChild(G),M(G,"transform-origin",gr/parseInt(G.style.width)*100+"% "+pr/parseInt(G.style.height)*100+"%")}},_onDragStart:function(r,o){var n=this,t=r.dataTransfer,e=n.options;if(_e("dragStart",this,{evt:r}),B.eventCanceled){this._onDrop();return}_e("setupClone",this),B.eventCanceled||(re=Pa(S),re.removeAttribute("id"),re.draggable=!1,re.style["will-change"]="",this._hideClone(),Te(re,this.options.chosenClass,!1),B.clone=re),n.cloneId=vi(function(){_e("clone",n),!B.eventCanceled&&(n.options.removeCloneOnHide||ne.insertBefore(re,S),n._hideClone(),ve({sortable:n,name:"clone"}))}),!o&&Te(S,e.dragClass,!0),o?(Ci=!0,n._loopId=setInterval(n._emulateDragOver,50)):(X(document,"mouseup",n._onDrop),X(document,"touchend",n._onDrop),X(document,"touchcancel",n._onDrop),t&&(t.effectAllowed="move",e.setData&&e.setData.call(n,t,S)),J(document,"drop",n),M(S,"transform","translateZ(0)")),At=!0,n._dragStartId=vi(n._dragStarted.bind(n,o,r)),J(document,"selectstart",n),jt=!0,zt&&M(document.body,"user-select","none")},_onDragOver:function(r){var o=this.el,n=r.target,t,e,i,a=this.options,s=a.group,l=B.active,u=ri===s,c=a.sort,f=de||l,d,g=this,p=!1;if(Tn)return;function v(Oe,Y){_e(Oe,g,Ue({evt:r,isOwner:u,axis:d?"vertical":"horizontal",revert:i,dragRect:t,targetRect:e,canSort:c,fromSortable:f,target:n,completed:T,onMove:function(xe,ce){return si(ne,o,S,t,xe,ue(xe),r,ce)},changed:k},Y))}function y(){v("dragOverAnimationCapture"),g.captureAnimationState(),g!==f&&f.captureAnimationState()}function T(Oe){return v("dragOverCompleted",{insertion:Oe}),Oe&&(u?l._hideClone():l._showClone(g),g!==f&&(Te(S,de?de.options.ghostClass:l.options.ghostClass,!1),Te(S,a.ghostClass,!0)),de!==g&&g!==B.active?de=g:g===B.active&&de&&(de=null),f===g&&(g._ignoreWhileAnimating=n),g.animateAll(function(){v("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(n===S&&!S.animated||n===o&&!n.animated)&&(Tt=null),!a.dragoverBubble&&!r.rootEl&&n!==document&&(S.parentNode[Se]._isOutsideThisEl(r.target),!Oe&&ct(r)),!a.dragoverBubble&&r.stopPropagation&&r.stopPropagation(),p=!0}function k(){ke=Pe(S),et=Pe(S,a.draggable),ve({sortable:g,name:"change",toEl:o,newIndex:ke,newDraggableIndex:et,originalEvent:r})}if(r.preventDefault!==void 0&&r.cancelable&&r.preventDefault(),n=Ne(n,a.draggable,o,!0),v("dragOver"),B.eventCanceled)return p;if(S.contains(r.target)||n.animated&&n.animatingX&&n.animatingY||g._ignoreWhileAnimating===n)return T(!1);if(Ci=!1,l&&!a.disabled&&(u?c||(i=ae!==ne):de===this||(this.lastPutMode=ri.checkPull(this,l,S,r))&&s.checkPut(this,l,S,r))){if(d=this._getDirection(r,n)==="vertical",t=ue(S),v("dragOverValid"),B.eventCanceled)return p;if(i)return ae=ne,y(),this._hideClone(),v("revert"),B.eventCanceled||(ht?ne.insertBefore(S,ht):ne.appendChild(S)),T(!0);var C=Nn(o,a.draggable);if(!C||qs(r,d,this)&&!C.animated){if(C===S)return T(!1);if(C&&o===r.target&&(n=C),n&&(e=ue(n)),si(ne,o,S,t,n,e,r,!!n)!==!1)return y(),C&&C.nextSibling?o.insertBefore(S,C.nextSibling):o.appendChild(S),ae=o,k(),T(!0)}else if(C&&Xs(r,d,this)){var F=Nt(o,0,a,!0);if(F===S)return T(!1);if(n=F,e=ue(n),si(ne,o,S,t,n,e,r,!1)!==!1)return y(),o.insertBefore(S,F),ae=o,k(),T(!0)}else if(n.parentNode===o){e=ue(n);var N=0,E,m=S.parentNode!==o,x=!Gs(S.animated&&S.toRect||t,n.animated&&n.toRect||e,d),P=d?"top":"left",I=hr(n,"top","top")||hr(S,"top","top"),L=I?I.scrollTop:void 0;Tt!==n&&(E=e[P],Xt=!1,ai=!x&&a.invertSwap||m),N=Js(r,n,e,d,x?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,ai,Tt===n);var H;if(N!==0){var U=Pe(S);do U-=N,H=ae.children[U];while(H&&(M(H,"display")==="none"||H===G))}if(N===0||H===n)return T(!1);Tt=n,Yt=N;var ee=n.nextElementSibling,ye=!1;ye=N===1;var be=si(ne,o,S,t,n,e,r,ye);if(be!==!1)return(be===1||be===-1)&&(ye=be===1),Tn=!0,setTimeout(Ys,30),y(),ye&&!ee?o.appendChild(S):n.parentNode.insertBefore(S,ye?ee:n),I&&xa(I,0,L-I.scrollTop),ae=S.parentNode,E!==void 0&&!ai&&(pi=Math.abs(E-ue(n)[P])),k(),T(!0)}if(o.contains(S))return T(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){X(document,"mousemove",this._onTouchMove),X(document,"touchmove",this._onTouchMove),X(document,"pointermove",this._onTouchMove),X(document,"dragover",ct),X(document,"mousemove",ct),X(document,"touchmove",ct)},_offUpEvents:function(){var r=this.el.ownerDocument;X(r,"mouseup",this._onDrop),X(r,"touchend",this._onDrop),X(r,"pointerup",this._onDrop),X(r,"touchcancel",this._onDrop),X(document,"selectstart",this)},_onDrop:function(r){var o=this.el,n=this.options;if(ke=Pe(S),et=Pe(S,n.draggable),_e("drop",this,{evt:r}),ae=S&&S.parentNode,ke=Pe(S),et=Pe(S,n.draggable),B.eventCanceled){this._nulling();return}At=!1,ai=!1,Xt=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),kn(this.cloneId),kn(this._dragStartId),this.nativeDraggable&&(X(document,"drop",this),X(o,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),zt&&M(document.body,"user-select",""),M(S,"transform",""),r&&(jt&&(r.cancelable&&r.preventDefault(),!n.dropBubble&&r.stopPropagation()),G&&G.parentNode&&G.parentNode.removeChild(G),(ne===ae||de&&de.lastPutMode!=="clone")&&re&&re.parentNode&&re.parentNode.removeChild(re),S&&(this.nativeDraggable&&X(S,"dragend",this),tn(S),S.style["will-change"]="",jt&&!At&&Te(S,de?de.options.ghostClass:this.options.ghostClass,!1),Te(S,this.options.chosenClass,!1),ve({sortable:this,name:"unchoose",toEl:ae,newIndex:null,newDraggableIndex:null,originalEvent:r}),ne!==ae?(ke>=0&&(ve({rootEl:ae,name:"add",toEl:ae,fromEl:ne,originalEvent:r}),ve({sortable:this,name:"remove",toEl:ae,originalEvent:r}),ve({rootEl:ae,name:"sort",toEl:ae,fromEl:ne,originalEvent:r}),ve({sortable:this,name:"sort",toEl:ae,originalEvent:r})),de&&de.save()):ke!==Lt&&ke>=0&&(ve({sortable:this,name:"update",toEl:ae,originalEvent:r}),ve({sortable:this,name:"sort",toEl:ae,originalEvent:r})),B.active&&((ke==null||ke===-1)&&(ke=Lt,et=Kt),ve({sortable:this,name:"end",toEl:ae,originalEvent:r}),this.save()))),this._nulling()},_nulling:function(){_e("nulling",this),ne=S=ae=G=ht=re=gi=tt=ut=Ae=jt=ke=et=Lt=Kt=Tt=Yt=de=ri=B.dragged=B.ghost=B.clone=B.active=null,ki.forEach(function(r){r.checked=!0}),ki.length=Zi=Qi=0},handleEvent:function(r){switch(r.type){case"drop":case"dragend":this._onDrop(r);break;case"dragenter":case"dragover":S&&(this._onDragOver(r),Ks(r));break;case"selectstart":r.preventDefault();break}},toArray:function(){for(var r=[],o,n=this.el.children,t=0,e=n.length,i=this.options;t<e;t++)o=n[t],Ne(o,i.draggable,this.el,!1)&&r.push(o.getAttribute(i.dataIdAttr)||Qs(o));return r},sort:function(r,o){var n={},t=this.el;this.toArray().forEach(function(e,i){var a=t.children[i];Ne(a,this.options.draggable,t,!1)&&(n[e]=a)},this),o&&this.captureAnimationState(),r.forEach(function(e){n[e]&&(t.removeChild(n[e]),t.appendChild(n[e]))}),o&&this.animateAll()},save:function(){var r=this.options.store;r&&r.set&&r.set(this)},closest:function(r,o){return Ne(r,o||this.options.draggable,this.el,!1)},option:function(r,o){var n=this.options;if(o===void 0)return n[r];var t=Qt.modifyOption(this,r,o);typeof t!="undefined"?n[r]=t:n[r]=o,r==="group"&&Da(n)},destroy:function(){_e("destroy",this);var r=this.el;r[Se]=null,X(r,"mousedown",this._onTapStart),X(r,"touchstart",this._onTapStart),X(r,"pointerdown",this._onTapStart),this.nativeDraggable&&(X(r,"dragover",this),X(r,"dragenter",this)),Array.prototype.forEach.call(r.querySelectorAll("[draggable]"),function(o){o.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ti.splice(Ti.indexOf(this.el),1),this.el=r=null},_hideClone:function(){if(!tt){if(_e("hideClone",this),B.eventCanceled)return;M(re,"display","none"),this.options.removeCloneOnHide&&re.parentNode&&re.parentNode.removeChild(re),tt=!0}},_showClone:function(r){if(r.lastPutMode!=="clone"){this._hideClone();return}if(tt){if(_e("showClone",this),B.eventCanceled)return;S.parentNode==ne&&!this.options.group.revertClone?ne.insertBefore(re,S):ht?ne.insertBefore(re,ht):ne.appendChild(re),this.options.group.revertClone&&this.animate(S,re),M(re,"display",""),tt=!1}}};function Ks(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function si(r,o,n,t,e,i,a,s){var l,u=r[Se],c=u.options.onMove,f;return window.CustomEvent&&!Xe&&!Zt?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=o,l.from=r,l.dragged=n,l.draggedRect=t,l.related=e||o,l.relatedRect=i||ue(o),l.willInsertAfter=s,l.originalEvent=a,r.dispatchEvent(l),c&&(f=c.call(u,l,a)),f}function tn(r){r.draggable=!1}function Ys(){Tn=!1}function Xs(r,o,n){var t=ue(Nt(n.el,0,n.options,!0)),e=Sa(n.el),i=10;return o?r.clientX<e.left-i||r.clientY<t.top&&r.clientX<t.right:r.clientY<e.top-i||r.clientY<t.bottom&&r.clientX<t.left}function qs(r,o,n){var t=ue(Nn(n.el,n.options.draggable)),e=Sa(n.el),i=10;return o?r.clientX>e.right+i||r.clientY>t.bottom&&r.clientX>t.left:r.clientY>e.bottom+i||r.clientX>t.right&&r.clientY>t.top}function Js(r,o,n,t,e,i,a,s){var l=t?r.clientY:r.clientX,u=t?n.height:n.width,c=t?n.top:n.left,f=t?n.bottom:n.right,d=!1;if(!a){if(s&&pi<u*e){if(!Xt&&(Yt===1?l>c+u*i/2:l<f-u*i/2)&&(Xt=!0),Xt)d=!0;else if(Yt===1?l<c+pi:l>f-pi)return-Yt}else if(l>c+u*(1-e)/2&&l<f-u*(1-e)/2)return Zs(o)}return d=d||a,d&&(l<c+u*i/2||l>f-u*i/2)?l>c+u/2?1:-1:0}function Zs(r){return Pe(S)<Pe(r)?1:-1}function Qs(r){for(var o=r.tagName+r.className+r.src+r.href+r.textContent,n=o.length,t=0;n--;)t+=o.charCodeAt(n);return t.toString(36)}function el(r){ki.length=0;for(var o=r.getElementsByTagName("input"),n=o.length;n--;){var t=o[n];t.checked&&ki.push(t)}}function vi(r){return setTimeout(r,0)}function kn(r){return clearTimeout(r)}Bi&&J(document,"touchmove",function(r){(B.active||At)&&r.cancelable&&r.preventDefault()});B.utils={on:J,off:X,css:M,find:wa,is:function(r,o){return!!Ne(r,o,r,!1)},extend:Ns,throttle:Ea,closest:Ne,toggleClass:Te,clone:Pa,index:Pe,nextTick:vi,cancelNextTick:kn,detectDirection:Aa,getChild:Nt};B.get=function(r){return r[Se]};B.mount=function(){for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];o[0].constructor===Array&&(o=o[0]),o.forEach(function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(B.utils=Ue(Ue({},B.utils),t.utils)),Qt.mount(t)})};B.create=function(r,o){return new B(r,o)};B.version=Os;var le=[],Vt,wn,Sn=!1,nn,rn,wi,Wt;function tl(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var o in this)o.charAt(0)==="_"&&typeof this[o]=="function"&&(this[o]=this[o].bind(this))}return r.prototype={dragStarted:function(o){var n=o.originalEvent;this.sortable.nativeDraggable?J(document,"dragover",this._handleAutoScroll):this.options.supportPointer?J(document,"pointermove",this._handleFallbackAutoScroll):n.touches?J(document,"touchmove",this._handleFallbackAutoScroll):J(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(o){var n=o.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?X(document,"dragover",this._handleAutoScroll):(X(document,"pointermove",this._handleFallbackAutoScroll),X(document,"touchmove",this._handleFallbackAutoScroll),X(document,"mousemove",this._handleFallbackAutoScroll)),mr(),mi(),Fs()},nulling:function(){wi=wn=Vt=Sn=Wt=nn=rn=null,le.length=0},_handleFallbackAutoScroll:function(o){this._handleAutoScroll(o,!0)},_handleAutoScroll:function(o,n){var t=this,e=(o.touches?o.touches[0]:o).clientX,i=(o.touches?o.touches[0]:o).clientY,a=document.elementFromPoint(e,i);if(wi=o,n||this.options.forceAutoScrollFallback||Zt||Xe||zt){an(o,this.options,a,n);var s=it(a,!0);Sn&&(!Wt||e!==nn||i!==rn)&&(Wt&&mr(),Wt=setInterval(function(){var l=it(document.elementFromPoint(e,i),!0);l!==s&&(s=l,mi()),an(o,t.options,l,n)},10),nn=e,rn=i)}else{if(!this.options.bubbleScroll||it(a,!0)===He()){mi();return}an(o,this.options,it(a,!1),!1)}}},Ke(r,{pluginName:"scroll",initializeByDefault:!0})}function mi(){le.forEach(function(r){clearInterval(r.pid)}),le=[]}function mr(){clearInterval(Wt)}var an=Ea(function(r,o,n,t){if(o.scroll){var e=(r.touches?r.touches[0]:r).clientX,i=(r.touches?r.touches[0]:r).clientY,a=o.scrollSensitivity,s=o.scrollSpeed,l=He(),u=!1,c;wn!==n&&(wn=n,mi(),Vt=o.scroll,c=o.scrollFn,Vt===!0&&(Vt=it(n,!0)));var f=0,d=Vt;do{var g=d,p=ue(g),v=p.top,y=p.bottom,T=p.left,k=p.right,C=p.width,F=p.height,N=void 0,E=void 0,m=g.scrollWidth,x=g.scrollHeight,P=M(g),I=g.scrollLeft,L=g.scrollTop;g===l?(N=C<m&&(P.overflowX==="auto"||P.overflowX==="scroll"||P.overflowX==="visible"),E=F<x&&(P.overflowY==="auto"||P.overflowY==="scroll"||P.overflowY==="visible")):(N=C<m&&(P.overflowX==="auto"||P.overflowX==="scroll"),E=F<x&&(P.overflowY==="auto"||P.overflowY==="scroll"));var H=N&&(Math.abs(k-e)<=a&&I+C<m)-(Math.abs(T-e)<=a&&!!I),U=E&&(Math.abs(y-i)<=a&&L+F<x)-(Math.abs(v-i)<=a&&!!L);if(!le[f])for(var ee=0;ee<=f;ee++)le[ee]||(le[ee]={});(le[f].vx!=H||le[f].vy!=U||le[f].el!==g)&&(le[f].el=g,le[f].vx=H,le[f].vy=U,clearInterval(le[f].pid),(H!=0||U!=0)&&(u=!0,le[f].pid=setInterval(function(){t&&this.layer===0&&B.active._onTouchMove(wi);var ye=le[this.layer].vy?le[this.layer].vy*s:0,be=le[this.layer].vx?le[this.layer].vx*s:0;typeof c=="function"&&c.call(B.dragged.parentNode[Se],be,ye,r,wi,le[this.layer].el)!=="continue"||xa(le[this.layer].el,be,ye)}.bind({layer:f}),24))),f++}while(o.bubbleScroll&&d!==l&&(d=it(d,!1)));Sn=u}},30),Ra=function(r){var o=r.originalEvent,n=r.putSortable,t=r.dragEl,e=r.activeSortable,i=r.dispatchSortableEvent,a=r.hideGhostForTarget,s=r.unhideGhostForTarget;if(o){var l=n||e;a();var u=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:o,c=document.elementFromPoint(u.clientX,u.clientY);s(),l&&!l.el.contains(c)&&(i("spill"),this.onSpill({dragEl:t,putSortable:n}))}};function Fn(){}Fn.prototype={startIndex:null,dragStart:function(r){var o=r.oldDraggableIndex;this.startIndex=o},onSpill:function(r){var o=r.dragEl,n=r.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var t=Nt(this.sortable.el,this.startIndex,this.options);t?this.sortable.el.insertBefore(o,t):this.sortable.el.appendChild(o),this.sortable.animateAll(),n&&n.animateAll()},drop:Ra};Ke(Fn,{pluginName:"revertOnSpill"});function Bn(){}Bn.prototype={onSpill:function(r){var o=r.dragEl,n=r.putSortable,t=n||this.sortable;t.captureAnimationState(),o.parentNode&&o.parentNode.removeChild(o),t.animateAll()},drop:Ra};Ke(Bn,{pluginName:"removeOnSpill"});B.mount(new tl);B.mount(Bn,Fn);function il(r){return r==null?r:JSON.parse(JSON.stringify(r))}function nl(r){On()&&Wo(r)}function rl(r){On()?Ni(r):gt(r)}const yr=Symbol("cloneElement");function al(...r){var o,n;const t=(o=On())==null?void 0:o.proxy,e=r[0];let[,i,a]=r;Array.isArray(A(i))||(a=i,i=null);let s=null;const{immediate:l=!0,clone:u=il,customUpdate:c}=(n=A(a))!=null?n:{};function f(E){var m;E.item[yr]=u(A((m=A(i))==null?void 0:m[E.oldIndex]))}function d(E){const m=E.item[yr];ks(m)||(Xi(E.item),Ts(A(i),E.newDraggableIndex,m))}function g(E){const{from:m,item:x,oldIndex:P,oldDraggableIndex:I,pullMode:L,clone:H}=E;if(L==="clone"){lr(m,x,P),Xi(H);return}Cs(A(i),I)}function p(E){if(c){c(E);return}const{from:m,item:x,oldIndex:P,newIndex:I}=E;if(Xi(x),lr(m,x,P),Go(i)){const L=[...A(i)];i.value=sr(L,P,I);return}sr(A(i),P,I)}const v={onUpdate:p,onStart:f,onAdd:d,onRemove:g};function y(E){const m=A(e);return E||(E=ws(m)?Ss(m,t==null?void 0:t.$el):m),E&&!Ps(E)&&(E=E.$el),E||ys("Root element not found"),E}function T(){var E;const m=(E=A(a))!=null?E:{},x=ba(m,["immediate","clone"]);return xs(i===null?{}:v,x)}const k=E=>{E=y(E),s&&C.destroy(),s=new B(E,T())};Be(()=>a,()=>{s&&Is(T(),(E,m)=>{s==null||s.option(E,m)})},{deep:!0});const C={option:(E,m)=>s==null?void 0:s.option(E,m),destroy:()=>{s==null||s.destroy(),s=null},save:()=>s==null?void 0:s.save(),toArray:()=>s==null?void 0:s.toArray(),closest:(...E)=>s==null?void 0:s.closest(...E)},F=()=>C==null?void 0:C.option("disabled",!0),N=()=>C==null?void 0:C.option("disabled",!1);return rl(()=>{l&&k()}),nl(C.destroy),Dt({start:k,pause:F,resume:N},C)}const En=["update","start","add","remove","choose","unchoose","end","sort","filter","clone","move","change"],ol=["animation","ghostClass","group","sort","disabled","store","handle","draggable","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","chosenClass","dragClass","ignore","filter","preventOnFilter","easing","setData","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","emptyInsertThreshold","scroll","forceAutoScrollFallback","scrollSensitivity","scrollSpeed","bubbleScroll","modelValue","tag","target","customUpdate",...En.map(r=>`on${r.replace(/^\S/,o=>o.toUpperCase())}`)],sl=Jt({name:"VueDraggable",model:{prop:"modelValue",event:"update:modelValue"},props:ol,emits:["update:modelValue",...En],setup(r,{slots:o,emit:n,expose:t,attrs:e}){const i=En.reduce((c,f)=>{const d=`on${f.replace(/^\S/,g=>g.toUpperCase())}`;return c[d]=g=>n(f,g),c},{}),a=Rt(()=>{const c=Uo(r),f=ba(c,["modelValue"]),d=Object.entries(f).reduce((g,[p,v])=>{const y=A(v);return y!==void 0&&(g[p]=y),g},{});return Dt(Dt({},i),_s(Dt(Dt({},e),d)))}),s=Rt({get:()=>r.modelValue,set:c=>n("update:modelValue",c)}),l=oe(),u=jo(al(r.target||l,s,a));return t(u),()=>{if(o.default)return Vo(r.tag||"div",{ref:l},o.default(u))}}});function ll(r,o){for(var n=-1,t=r==null?0:r.length;++n<t&&o(r[n],n,r)!==!1;);return r}var ul=ll,cl=ca,fl=ts,hl=Object.prototype,dl=hl.hasOwnProperty;function gl(r,o,n){var t=r[o];(!(dl.call(r,o)&&fl(t,n))||n===void 0&&!(o in r))&&cl(r,o,n)}var Ma=gl,pl=Ma,vl=ca;function ml(r,o,n,t){var e=!n;n||(n={});for(var i=-1,a=o.length;++i<a;){var s=o[i],l=t?t(n[s],r[s],s,n,r):void 0;l===void 0&&(l=r[s]),e?vl(n,s,l):pl(n,s,l)}return n}var Hi=ml,yl=Hi,bl=fa;function _l(r,o){return r&&yl(o,bl(o),r)}var Cl=_l;function Tl(r){var o=[];if(r!=null)for(var n in Object(r))o.push(n);return o}var kl=Tl,wl=Rn,Sl=ha,El=kl,xl=Object.prototype,Pl=xl.hasOwnProperty;function Il(r){if(!wl(r))return El(r);var o=Sl(r),n=[];for(var t in r)t=="constructor"&&(o||!Pl.call(r,t))||n.push(t);return n}var Al=Il,Dl=is,Ll=Al,Ol=ns;function Rl(r){return Ol(r)?Dl(r,!0):Ll(r)}var Hn=Rl,Ml=Hi,Nl=Hn;function Fl(r,o){return r&&Ml(o,Nl(o),r)}var Bl=Fl,Si={exports:{}};Si.exports;(function(r,o){var n=rs,t=o&&!o.nodeType&&o,e=t&&!0&&r&&!r.nodeType&&r,i=e&&e.exports===t,a=i?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,d=s?s(f):new u.constructor(f);return u.copy(d),d}r.exports=l})(Si,Si.exports);var Hl=Si.exports;function Ul(r,o){var n=-1,t=r.length;for(o||(o=Array(t));++n<t;)o[n]=r[n];return o}var jl=Ul,Vl=Hi,Wl=da;function Gl(r,o){return Vl(r,Wl(r),o)}var zl=Gl,$l=as,Kl=$l(Object.getPrototypeOf,Object),Na=Kl,Yl=os,Xl=Na,ql=da,Jl=ss,Zl=Object.getOwnPropertySymbols,Ql=Zl?function(r){for(var o=[];r;)Yl(o,ql(r)),r=Xl(r);return o}:Jl,Fa=Ql,eu=Hi,tu=Fa;function iu(r,o){return eu(r,tu(r),o)}var nu=iu,ru=ls,au=Fa,ou=Hn;function su(r){return ru(r,ou,au)}var lu=su,uu=Object.prototype,cu=uu.hasOwnProperty;function fu(r){var o=r.length,n=new r.constructor(o);return o&&typeof r[0]=="string"&&cu.call(r,"index")&&(n.index=r.index,n.input=r.input),n}var hu=fu,br=us;function du(r){var o=new r.constructor(r.byteLength);return new br(o).set(new br(r)),o}var Un=du,gu=Un;function pu(r,o){var n=o?gu(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.byteLength)}var vu=pu,mu=/\w*$/;function yu(r){var o=new r.constructor(r.source,mu.exec(r));return o.lastIndex=r.lastIndex,o}var bu=yu,_r=cs,Cr=_r?_r.prototype:void 0,Tr=Cr?Cr.valueOf:void 0;function _u(r){return Tr?Object(Tr.call(r)):{}}var Cu=_u,Tu=Un;function ku(r,o){var n=o?Tu(r.buffer):r.buffer;return new r.constructor(n,r.byteOffset,r.length)}var wu=ku,Su=Un,Eu=vu,xu=bu,Pu=Cu,Iu=wu,Au="[object Boolean]",Du="[object Date]",Lu="[object Map]",Ou="[object Number]",Ru="[object RegExp]",Mu="[object Set]",Nu="[object String]",Fu="[object Symbol]",Bu="[object ArrayBuffer]",Hu="[object DataView]",Uu="[object Float32Array]",ju="[object Float64Array]",Vu="[object Int8Array]",Wu="[object Int16Array]",Gu="[object Int32Array]",zu="[object Uint8Array]",$u="[object Uint8ClampedArray]",Ku="[object Uint16Array]",Yu="[object Uint32Array]";function Xu(r,o,n){var t=r.constructor;switch(o){case Bu:return Su(r);case Au:case Du:return new t(+r);case Hu:return Eu(r,n);case Uu:case ju:case Vu:case Wu:case Gu:case zu:case $u:case Ku:case Yu:return Iu(r,n);case Lu:return new t;case Ou:case Nu:return new t(r);case Ru:return xu(r);case Mu:return new t;case Fu:return Pu(r)}}var qu=Xu,Ju=Rn,kr=Object.create,Zu=function(){function r(){}return function(o){if(!Ju(o))return{};if(kr)return kr(o);r.prototype=o;var n=new r;return r.prototype=void 0,n}}(),Qu=Zu,ec=Qu,tc=Na,ic=ha;function nc(r){return typeof r.constructor=="function"&&!ic(r)?ec(tc(r)):{}}var rc=nc,ac=Mn,oc=ga,sc="[object Map]";function lc(r){return oc(r)&&ac(r)==sc}var uc=lc,cc=uc,fc=va,wr=pa,Sr=wr&&wr.isMap,hc=Sr?fc(Sr):cc,dc=hc,gc=Mn,pc=ga,vc="[object Set]";function mc(r){return pc(r)&&gc(r)==vc}var yc=mc,bc=yc,_c=va,Er=pa,xr=Er&&Er.isSet,Cc=xr?_c(xr):bc,Tc=Cc,kc=fs,wc=ul,Sc=Ma,Ec=Cl,xc=Bl,Pc=Hl,Ic=jl,Ac=zl,Dc=nu,Lc=ds,Oc=lu,Rc=Mn,Mc=hu,Nc=qu,Fc=rc,Bc=gs,Hc=hs,Uc=dc,jc=Rn,Vc=Tc,Wc=fa,Gc=Hn,zc=1,$c=2,Kc=4,Ba="[object Arguments]",Yc="[object Array]",Xc="[object Boolean]",qc="[object Date]",Jc="[object Error]",Ha="[object Function]",Zc="[object GeneratorFunction]",Qc="[object Map]",ef="[object Number]",Ua="[object Object]",tf="[object RegExp]",nf="[object Set]",rf="[object String]",af="[object Symbol]",of="[object WeakMap]",sf="[object ArrayBuffer]",lf="[object DataView]",uf="[object Float32Array]",cf="[object Float64Array]",ff="[object Int8Array]",hf="[object Int16Array]",df="[object Int32Array]",gf="[object Uint8Array]",pf="[object Uint8ClampedArray]",vf="[object Uint16Array]",mf="[object Uint32Array]",te={};te[Ba]=te[Yc]=te[sf]=te[lf]=te[Xc]=te[qc]=te[uf]=te[cf]=te[ff]=te[hf]=te[df]=te[Qc]=te[ef]=te[Ua]=te[tf]=te[nf]=te[rf]=te[af]=te[gf]=te[pf]=te[vf]=te[mf]=!0;te[Jc]=te[Ha]=te[of]=!1;function yi(r,o,n,t,e,i){var a,s=o&zc,l=o&$c,u=o&Kc;if(n&&(a=e?n(r,t,e,i):n(r)),a!==void 0)return a;if(!jc(r))return r;var c=Bc(r);if(c){if(a=Mc(r),!s)return Ic(r,a)}else{var f=Rc(r),d=f==Ha||f==Zc;if(Hc(r))return Pc(r,s);if(f==Ua||f==Ba||d&&!e){if(a=l||d?{}:Fc(r),!s)return l?Dc(r,xc(a,r)):Ac(r,Ec(a,r))}else{if(!te[f])return e?r:{};a=Nc(r,f,s)}}i||(i=new kc);var g=i.get(r);if(g)return g;i.set(r,a),Vc(r)?r.forEach(function(y){a.add(yi(y,o,n,y,r,i))}):Uc(r)&&r.forEach(function(y,T){a.set(T,yi(y,o,n,T,r,i))});var p=u?l?Oc:Lc:l?Gc:Wc,v=c?void 0:p(r);return wc(v||r,function(y,T){v&&(T=y,y=r[T]),Sc(a,T,yi(y,o,n,T,r,i))}),a}var yf=yi,bf=yf,_f=1,Cf=4;function Tf(r){return bf(r,_f|Cf)}var kf=Tf;const on=Fi(kf);function Ht(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!sa(r)}const{setStorage:wf,getStorage:Sf,removeStorage:Ef}=To(),xf=Jt({name:"TableActions",props:{columns:{type:Array,default:()=>[]},elTableRef:{type:Object,default:()=>{}},activeUID:Z.string.def("")},emits:["refresh","changSize"],setup(r,{emit:o}){const n=ra(),t=Rt(()=>n.sizeMap),{t:e}=na(),i=()=>{o("refresh")},a=m=>{o("changSize",m)},s=oe(r.columns),l=oe(r.elTableRef),u=oe(r.activeUID),c=oe(!1),f=s.value.find(m=>m.type==="index");if(f===void 0){const m={field:"_serial_number",label:"序號",type:"index",show:!1,disabled:!0};s.value[0].type==="selection"?s.value.splice(1,0,m):s.value.unshift(m)}else c.value=f.show;const d=on(A(s)),g=oe(!1),p=oe(!0),v=m=>{s.value.forEach(x=>{x.disabled!==!0&&(x.show=m)}),p.value=s.value.filter(x=>!x.disabled).some(x=>x.show)},y=()=>{g.value=s.value.filter(m=>!m.disabled).every(m=>m.show),g.value?p.value=!1:p.value=s.value.filter(m=>!m.disabled).some(m=>m.show)},T=(m,x=!1)=>{const P=s.value.find(I=>I.type==="index");P&&(m?c.value=P.show:P.show=x)},{currentRoute:k}=zo(),F=`${k.value.fullPath}_${u.value}`;if(F){const m=JSON.parse(Sf(F));m&&(s.value.forEach(x=>{const P=m[x.field];x._index=P.index,x.show=P.show,x.fixed=P.fixed}),s.value.sort((x,P)=>x._index-P._index),T(!0))}Be(()=>s.value,m=>fe(this,null,function*(){var P;const x={};for(let I=0;I<m.length;I++){const L=m[I];x[L.field]={show:L.show,index:I,fixed:L.fixed}}wf(F,JSON.stringify(x)),y(),yield gt(),(P=l.value)==null||P.doLayout()}),{deep:!0}),Be(()=>c.value,m=>fe(this,null,function*(){var x;T(!1,m),yield gt(),(x=l.value)==null||x.doLayout()}),{deep:!0});const N=()=>fe(this,null,function*(){Object.assign(s.value,on(d)),T(!0),yield gt(),Ef(F)}),E=m=>{Object.assign(s.value,on(ko(s.value,m.oldIndex,m.newIndex)))};return y(),()=>D(oa,null,[D("div",{class:"text-right h-28px flex items-center justify-end"},[D(Ki,{content:e("common.refresh"),placement:"top"},{default:()=>[D("span",{onClick:i},[D(Qe,{icon:"ant-design:sync-outlined",class:"cursor-pointer","hover-color":"var(--el-color-primary)"},null)])]}),D(Ki,{content:e("common.density"),placement:"top"},{default:()=>[D(xo,{trigger:"click",onCommand:a},{default:()=>D("span",null,[D(Qe,{icon:"ant-design:column-height-outlined",class:"cursor-pointer mr-8px ml-8px","hover-color":"var(--el-color-primary)"},null)]),dropdown:()=>D(Po,null,{default:()=>A(t).map(m=>{let x;return D(Io,{key:m,command:m},Ht(x=e(`size.${m}`))?x:{default:()=>[x]})})})})]}),D(Ki,{content:e("common.columnSetting"),placement:"top"},{default:()=>[D(Ao,{trigger:"click",placement:"bottom",width:"300px"},{default:()=>{let m,x,P,I;return D("div",null,[D("div",{style:"border-bottom: 1px solid #d4d7de",class:"flex justify-between"},[D("div",null,[D(Yi,{modelValue:g.value,"onUpdate:modelValue":L=>g.value=L,indeterminate:p.value,onChange:v},Ht(m=e("common.selectAll"))?m:{default:()=>[m]}),D(Yi,{modelValue:c.value,"onUpdate:modelValue":L=>c.value=L},Ht(x=e("common.SerialNumberColumn"))?x:{default:()=>[x]})]),D(aa,{type:"primary",link:!0,onClick:N},Ht(P=e("common.reset"))?P:{default:()=>[P]})]),D(Do,{"max-height":"400px"},{default:()=>[D(sl,{modelValue:s.value,onEnd:E,handle:".cursor-move"},Ht(I=s.value.map(L=>L.type==="index"||L.type==="selection"?D("span",null,null):D("div",{class:"flex justify-between"},[D("div",null,[D("span",{class:"cursor-move mr-10px"},[D(Qe,{icon:"akar-icons:drag-vertical"},null)]),D(Yi,{modelValue:L.show,"onUpdate:modelValue":H=>L.show=H,disabled:L.disabled===!0,onChange:y},{default:()=>[L.label]})]),D("div",{class:"mt-7px mr-9px"},[D("span",{class:L.fixed==="left"?"color-[#409eff]":"",onClick:()=>{L.fixed=L.fixed==="left"?void 0:"left"}},[D(Qe,{icon:"radix-icons:pin-left",class:"cursor-pointer"},null)]),D(Lo,{direction:"vertical"},null),D("span",{class:L.fixed==="right"?"color-[#409eff]":"",onClick:()=>{L.fixed=L.fixed==="right"?void 0:"right"}},[D(Qe,{icon:"radix-icons:pin-right",class:"cursor-pointer"},null)])])])))?I:{default:()=>[I]})]})])},reference:()=>D(Qe,{icon:"ant-design:setting-outlined",class:"cursor-pointer",hoverColor:"var(--el-color-primary)"},null)})]})])])}});function Pr(r,o){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);o&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),n.push.apply(n,t)}return n}function se(r){for(var o=1;o<arguments.length;o++){var n=arguments[o]!=null?arguments[o]:{};o%2?Pr(Object(n),!0).forEach(function(t){_(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function me(r){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},me(r)}function O(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")}function Ir(r,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,ja(t.key),t)}}function R(r,o,n){return o&&Ir(r.prototype,o),n&&Ir(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function _(r,o,n){return o=ja(o),o in r?Object.defineProperty(r,o,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[o]=n,r}function j(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(o&&o.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),o&&xn(r,o)}function W(r){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},W(r)}function xn(r,o){return xn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xn(r,o)}function Pf(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(r){return!1}}function b(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function jn(r,o){if(o&&(typeof o=="object"||typeof o=="function"))return o;if(o!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(r)}function V(r){var o=Pf();return function(){var t=W(r),e;if(o){var i=W(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return jn(this,e)}}function If(r,o){for(;!Object.prototype.hasOwnProperty.call(r,o)&&(r=W(r),r!==null););return r}function z(){return typeof Reflect!="undefined"&&Reflect.get?z=Reflect.get.bind():z=function(o,n,t){var e=If(o,n);if(e){var i=Object.getOwnPropertyDescriptor(e,n);return i.get?i.get.call(arguments.length<3?o:t):i.value}},z.apply(this,arguments)}function De(r){return Af(r)||Df(r)||Lf(r)||Of()}function Af(r){if(Array.isArray(r))return Pn(r)}function Df(r){if(typeof Symbol!="undefined"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function Lf(r,o){if(r){if(typeof r=="string")return Pn(r,o);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,o)}}function Pn(r,o){(o==null||o>r.length)&&(o=r.length);for(var n=0,t=new Array(o);n<o;n++)t[n]=r[n];return t}function Of(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rf(r,o){if(typeof r!="object"||r===null)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var t=n.call(r,o||"default");if(typeof t!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}function ja(r){var o=Rf(r,"string");return typeof o=="symbol"?o:String(o)}var Va={exports:{}};(function(r){var o=Object.prototype.hasOwnProperty,n="~";function t(){}Object.create&&(t.prototype=Object.create(null),new t().__proto__||(n=!1));function e(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var g=new e(c,f||l,d),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],g]:l._events[p].push(g):(l._events[p]=g,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new t:delete l._events[u]}function s(){this._events=new t,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)o.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,g=f.length,p=new Array(g);d<g;d++)p[d]=f[d].fn;return p},s.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,c,f,d,g,p){var v=n?n+u:u;if(!this._events[v])return!1;var y=this._events[v],T=arguments.length,k,C;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),T){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,f),!0;case 4:return y.fn.call(y.context,c,f,d),!0;case 5:return y.fn.call(y.context,c,f,d,g),!0;case 6:return y.fn.call(y.context,c,f,d,g,p),!0}for(C=1,k=new Array(T-1);C<T;C++)k[C-1]=arguments[C];y.fn.apply(y.context,k)}else{var F=y.length,N;for(C=0;C<F;C++)switch(y[C].once&&this.removeListener(u,y[C].fn,void 0,!0),T){case 1:y[C].fn.call(y[C].context);break;case 2:y[C].fn.call(y[C].context,c);break;case 3:y[C].fn.call(y[C].context,c,f);break;case 4:y[C].fn.call(y[C].context,c,f,d);break;default:if(!k)for(N=1,k=new Array(T-1);N<T;N++)k[N-1]=arguments[N];y[C].fn.apply(y[C].context,k)}}return!0},s.prototype.on=function(u,c,f){return i(this,u,c,f,!1)},s.prototype.once=function(u,c,f){return i(this,u,c,f,!0)},s.prototype.removeListener=function(u,c,f,d){var g=n?n+u:u;if(!this._events[g])return this;if(!c)return a(this,g),this;var p=this._events[g];if(p.fn)p.fn===c&&(!d||p.once)&&(!f||p.context===f)&&a(this,g);else{for(var v=0,y=[],T=p.length;v<T;v++)(p[v].fn!==c||d&&!p[v].once||f&&p[v].context!==f)&&y.push(p[v]);y.length?this._events[g]=y.length===1?y[0]:y:a(this,g)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&a(this,c)):(this._events=new t,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,r.exports=s})(Va);var Wa=Va.exports;const Ga=Fi(Wa);var Mf=typeof window!="undefined"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,sn={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},ln="%c[xgplayer]",K={config:{debug:Mf?3:0},logInfo:function(o){for(var n,t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.config.debug>=3&&(n=console).log.apply(n,[ln,sn.info,o].concat(e))},logWarn:function(o){for(var n,t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];this.config.debug>=1&&(n=console).warn.apply(n,[ln,sn.warn,o].concat(e))},logError:function(o){var n;if(!(this.config.debug<1)){for(var t=this.config.debug>=2?"trace":"error",e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];(n=console)[t].apply(n,[ln,sn.error,o].concat(i))}}};function Nf(r){r.logInfo=K.logInfo.bind(r),r.logWarn=K.logWarn.bind(r),r.logError=K.logError.bind(r)}var Ff=function(){function r(o){O(this,r),this.bufferedList=o}return R(r,[{key:"start",value:function(n){return this.bufferedList[n].start}},{key:"end",value:function(n){return this.bufferedList[n].end}},{key:"length",get:function(){return this.bufferedList.length}}]),r}(),h={};h.createDom=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",e=document.createElement(r);return e.className=t,e.innerHTML=o,Object.keys(n).forEach(function(i){var a=i,s=n[i];r==="video"||r==="audio"||r==="live-video"?s&&e.setAttribute(a,s):e.setAttribute(a,s)}),e};h.createDomFromHtml=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var t=document.createElement("div");t.innerHTML=r;var e=t.children;return t=null,e.length>0?(e=e[0],n&&h.addClass(e,n),o&&Object.keys(o).forEach(function(i){e.setAttribute(i,o[i])}),e):null}catch(i){return K.logError("util.createDomFromHtml",i),null}};h.hasClass=function(r,o){if(!r||!o)return!1;try{return Array.prototype.some.call(r.classList,function(t){return t===o})}catch(t){var n=r.className&&me(r.className)==="object"?r.getAttribute("class"):r.className;return n&&!!n.match(new RegExp("(\\s|^)"+o+"(\\s|$)"))}};h.addClass=function(r,o){if(!(!r||!o))try{o.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(n){n&&r.classList.add(n)})}catch(n){h.hasClass(r,o)||(r.className&&me(r.className)==="object"?r.setAttribute("class",r.getAttribute("class")+" "+o):r.className+=" "+o)}};h.removeClass=function(r,o){if(!(!r||!o))try{o.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(n){n&&r.classList.remove(n)})}catch(n){h.hasClass(r,o)&&o.split(/\s+/g).forEach(function(t){var e=new RegExp("(\\s|^)"+t+"(\\s|$)");r.className&&me(r.className)==="object"?r.setAttribute("class",r.getAttribute("class").replace(e," ")):r.className=r.className.replace(e," ")})}};h.toggleClass=function(r,o){r&&o.split(/\s+/g).forEach(function(n){h.hasClass(r,n)?h.removeClass(r,n):h.addClass(r,n)})};h.classNames=function(){for(var r=arguments,o=[],n=function(i){h.typeOf(r[i])==="String"?o.push(r[i]):h.typeOf(r[i])==="Object"&&Object.keys(r[i]).map(function(a){r[i][a]&&o.push(a)})},t=0;t<arguments.length;t++)n(t);return o.join(" ")};h.findDom=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,o=arguments.length>1?arguments[1]:void 0,n;try{n=r.querySelector(o)}catch(t){K.logError("util.findDom",t),o.indexOf("#")===0&&(n=r.getElementById(o.slice(1)))}return n};h.getCss=function(r,o){return r.currentStyle?r.currentStyle[o]:document.defaultView.getComputedStyle(r,!1)[o]};h.padStart=function(r,o,n){for(var t=String(n),e=o>>0,i=Math.ceil(e/t.length),a=[],s=String(r);i--;)a.push(t);return a.join("").substring(0,e-s.length)+s};h.format=function(r){if(window.isNaN(r))return"";r=Math.round(r);var o=h.padStart(Math.floor(r/3600),2,0),n=h.padStart(Math.floor((r-o*3600)/60),2,0),t=h.padStart(Math.floor(r-o*3600-n*60),2,0);return(o==="00"?[n,t]:[o,n,t]).join(":")};h.event=function(r){if(r.touches){var o=r.touches[0]||r.changedTouches[0];r.clientX=o.clientX||0,r.clientY=o.clientY||0,r.offsetX=o.pageX-o.target.offsetLeft,r.offsetY=o.pageY-o.target.offsetTop}r._target=r.target||r.srcElement};h.typeOf=function(r){return Object.prototype.toString.call(r).match(/([^\s.*]+)(?=]$)/g)[0]};h.deepCopy=function(r,o){if(h.typeOf(o)==="Object"&&h.typeOf(r)==="Object")return Object.keys(o).forEach(function(n){h.typeOf(o[n])==="Object"&&!(o[n]instanceof Node)?r[n]===void 0||r[n]===void 0?r[n]=o[n]:h.deepCopy(r[n],o[n]):h.typeOf(o[n])==="Array"?r[n]=h.typeOf(r[n])==="Array"?r[n].concat(o[n]):o[n]:r[n]=o[n]}),r};h.deepMerge=function(r,o){return Object.keys(o).map(function(n){if(h.typeOf(o[n])==="Array"&&h.typeOf(r[n])==="Array"){if(h.typeOf(r[n])==="Array"){var t;(t=r[n]).push.apply(t,De(o[n]))}}else h.typeOf(r[n])===h.typeOf(o[n])&&r[n]!==null&&h.typeOf(r[n])==="Object"&&!(o[n]instanceof window.Node)?h.deepMerge(r[n],o[n]):o[n]!==null&&(r[n]=o[n])}),r};h.getBgImage=function(r){var o=(r.currentStyle||window.getComputedStyle(r,null)).backgroundImage;if(!o||o==="none")return"";var n=document.createElement("a");return n.href=o.replace(/url\("|"\)/g,""),n.href};h.copyDom=function(r){if(r&&r.nodeType===1){var o=document.createElement(r.tagName);return Array.prototype.forEach.call(r.attributes,function(n){o.setAttribute(n.name,n.value)}),r.innerHTML&&(o.innerHTML=r.innerHTML),o}else return""};h.setInterval=function(r,o,n,t){r._interval[o]||(r._interval[o]=window.setInterval(n.bind(r),t))};h.clearInterval=function(r,o){clearInterval(r._interval[o]),r._interval[o]=null};h.setTimeout=function(r,o,n){r._timers||(r._timers=[]);var t=setTimeout(function(){o(),h.clearTimeout(r,t)},n);return r._timers.push(t),t};h.clearTimeout=function(r,o){var n=r._timers;if(h.typeOf(n)==="Array"){for(var t=0;t<n.length;t++)if(n[t]===o){n.splice(t,1),clearTimeout(o);break}}else clearTimeout(o)};h.clearAllTimers=function(r){var o=r._timers;h.typeOf(o)==="Array"&&(o.map(function(n){clearTimeout(n)}),r._timerIds=[])};h.createImgBtn=function(r,o,n,t){var e=h.createDom("xg-".concat(r),"",{},"xgplayer-".concat(r,"-img"));if(e.style.backgroundImage='url("'.concat(o,'")'),n&&t){var i,a,s;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(l){return n.indexOf(l)>-1&&t.indexOf(l)>-1?(i=parseFloat(n.slice(0,n.indexOf(l)).trim()),a=parseFloat(t.slice(0,t.indexOf(l)).trim()),s=l,!1):!0}),e.style.width="".concat(i).concat(s),e.style.height="".concat(a).concat(s),e.style.backgroundSize="".concat(i).concat(s," ").concat(a).concat(s),r==="start"?e.style.margin="-".concat(a/2).concat(s," auto auto -").concat(i/2).concat(s):e.style.margin="auto 5px auto 5px"}return e};h.Hex2RGBA=function(r,o){var n=[];if(/^\#[0-9A-F]{3}$/i.test(r)){var t="#";r.replace(/[0-9A-F]/ig,function(e){t+=e+e}),r=t}return/^#[0-9A-F]{6}$/i.test(r)?(r.replace(/[0-9A-F]{2}/ig,function(e){n.push(parseInt(e,16))}),"rgba(".concat(n.join(","),", ").concat(o,")")):"rgba(255, 255, 255, 0.1)"};h.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};h.checkIsFunction=function(r){return r&&typeof r=="function"};h.checkIsObject=function(r){return r!==null&&me(r)==="object"};h.hide=function(r){r.style.display="none"};h.show=function(r,o){r.style.display=o||"block"};h.isUndefined=function(r){if(typeof r=="undefined"||r===null)return!0};h.isNotNull=function(r){return r!=null};h.setStyleFromCsstext=function(r,o){if(o)if(h.typeOf(o)==="String"){var n=o.replace(/\s+/g,"").split(";");n.map(function(t){if(t){var e=t.split(":");e.length>1&&(r.style[e[0]]=e[1])}})}else Object.keys(o).map(function(t){r.style[t]=o[t]})};function Bf(r,o){for(var n=0,t=o.length;n<t;n++)if(r.indexOf(o[n])>-1)return!0;return!1}h.filterStyleFromText=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],n=r.style.cssText;if(!n)return{};var t=n.replace(/\s+/g,"").split(";"),e={},i={};return t.map(function(a){if(a){var s=a.split(":");s.length>1&&(Bf(s[0],o)?e[s[0]]=s[1]:i[s[0]]=s[1])}}),r.setAttribute("style",""),Object.keys(i).map(function(a){r.style[a]=i[a]}),e};h.getStyleFromCsstext=function(r){var o=r.style.cssText;if(!o)return{};var n=o.replace(/\s+/g,"").split(";"),t={};return n.map(function(e){if(e){var i=e.split(":");i.length>1&&(t[i[0]]=i[1])}}),t};h.preloadImg=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(r){var t=new window.Image;t.onload=function(e){t=null,o&&o(e)},t.onerror=function(e){t=null,n&&n(e)},t.src=r}};h.stopPropagation=function(r){r&&r.stopPropagation()};h.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};h.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};h.checkTouchSupport=function(){return"ontouchstart"in window};h.getBuffered2=function(r){for(var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,n=[],t=0;t<r.length;t++)n.push({start:r.start(t)<.5?0:r.start(t),end:r.end(t)});n.sort(function(l,u){var c=l.start-u.start;return c||u.end-l.end});var e=[];if(o)for(var i=0;i<n.length;i++){var a=e.length;if(a){var s=e[a-1].end;n[i].start-s<o?n[i].end>s&&(e[a-1].end=n[i].end):e.push(n[i])}else e.push(n[i])}else e=n;return new Ff(e)};h.getEventPos=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return r.touches&&r.touches.length>0&&(r=r.touches[0]),{x:r.x/o,y:r.y/o,clientX:r.clientX/o,clientY:r.clientY/o,offsetX:r.offsetX/o,offsetY:r.offsetY/o,pageX:r.pageX/o,pageY:r.pageY/o}};h.requestAnimationFrame=function(r){var o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(o)return o(r)};h.getHostFromUrl=function(r){if(h.typeOf(r)!=="String")return"";var o=r.split("/"),n="";return o.length>3&&o[2]&&(n=o[2]),n};h.cancelAnimationFrame=function(r){var o=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;o&&o(r)};h.isMSE=function(r){return!r||!(r instanceof HTMLMediaElement)?!1:/^blob/.test(r.currentSrc)||/^blob/.test(r.src)};h.isBlob=function(r){return typeof r=="string"&&/^blob/.test(r)};h.generateSessionId=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=new Date().getTime();try{r=parseInt(r)}catch(t){r=0}o+=r,window.performance&&typeof window.performance.now=="function"&&(o+=parseInt(window.performance.now()));var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(t==="x"?e:e&3|8).toString(16)});return n};h.createEvent=function(r){var o;return typeof window.Event=="function"?o=new Event(r):(o=document.createEvent("Event"),o.initEvent(r,!0,!0)),o};h.adjustTimeByDuration=function(r,o,n){return!o||!r?r:r>o||n&&r<o?o:r};h.createPositionBar=function(r,o){var n=h.createDom("xg-bar","",{"data-index":-1},r);return o.appendChild(n),n};h.getTransformStyle=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n={scale:"".concat(r.scale||1),translate:"".concat(r.x||0,"%, ").concat(r.y||0,"%"),rotate:"".concat(r.rotate||0,"deg")},t=Object.keys(n);return t.forEach(function(e){var i=new RegExp("".concat(e,"\\([^\\(]+\\)"),"g"),a="".concat(e,"(").concat(n[e],")");i.test(o)?(i.lastIndex=-1,o=o.replace(i,a)):o+="".concat(a," ")}),o};h.convertDeg=function(r){return Math.abs(r)<=1?r*360:r%360};h.getIndexByTime=function(r,o){var n=o.length,t=-1;if(n<1)return t;if(r<=o[0].end||n<2)t=0;else if(r>o[n-1].end)t=n-1;else for(var e=1;e<n;e++)if(r>o[e-1].end&&r<=o[e].end){t=e;break}return t};h.getOffsetCurrentTime=function(r,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,t=-1;if(n>=0&&n<o.length?t=n:t=h.getIndexByTime(r,o),t<0)return-1;var e=o.length,i=o[t],a=i.start,s=i.end,l=i.cTime,u=i.offset;return r<a?l:r>=a&&r<=s?r-u:r>s&&t>=e-1?s:-1};h.getCurrentTimeByOffset=function(r,o){var n=-1;if(!o||o.length<0)return r;for(var t=0;t<o.length;t++)if(r<=o[t].duration){n=t;break}if(n!==-1){var e=o[n].start;return n-1<0?e+r:e+(r-o[n-1].duration)}return r};function za(r){var o=me(r);return r!==null&&(o==="object"||o==="function")}function Hf(r,o,n){var t,e,i,a,s,l,u=0,c=!1,f=!1,d=!0,g=!o&&o!==0&&typeof window.requestAnimationFrame=="function";if(typeof r!="function")throw new TypeError("Expected a function");o=+o||0,za(n)&&(c=!!n.leading,f="maxWait"in n,i=f?Math.max(+n.maxWait||0,o):i,d="trailing"in n?!!n.trailing:d);function p(I){var L=t,H=e;return t=e=void 0,u=I,a=r.apply(H,L),a}function v(I,L){return g?(window.cancelAnimationFrame(s),window.requestAnimationFrame(I)):setTimeout(I,L)}function y(I){if(g)return window.cancelAnimationFrame(I);clearTimeout(I)}function T(I){return u=I,s=v(F,o),c?p(I):a}function k(I){var L=I-l,H=I-u,U=o-L;return f?Math.min(U,i-H):U}function C(I){var L=I-l,H=I-u;return l===void 0||L>=o||L<0||f&&H>=i}function F(){var I=Date.now();if(C(I))return N(I);s=v(F,k(I))}function N(I){return s=void 0,d&&t?p(I):(t=e=void 0,a)}function E(){s!==void 0&&y(s),u=0,t=l=e=s=void 0}function m(){return s===void 0?a:N(Date.now())}function x(){return s!==void 0}function P(){for(var I=Date.now(),L=C(I),H=arguments.length,U=new Array(H),ee=0;ee<H;ee++)U[ee]=arguments[ee];if(t=U,e=this,l=I,L){if(s===void 0)return T(l);if(f)return s=v(F,o),p(l)}return s===void 0&&(s=v(F,o)),a}return P.cancel=E,P.flush=m,P.pending=x,P}function Uf(r,o,n){var t=!0,e=!0;if(typeof r!="function")throw new TypeError("Expected a function");return za(n)&&(t="leading"in n?!!n.leading:t,e="trailing"in n?!!n.trailing:e),Hf(r,o,{leading:t,trailing:e,maxWait:o})}function jf(){var r=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return r==="zh-cn"&&(r="zh"),r}function Vf(r,o,n){if(r){var t=r.getAttribute(n);return!!(t&&t===o&&(r.tagName==="VIDEO"||r.tagName==="AUDIO"))}}var Ar={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},Wf=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],$={get device(){var r=$.os;return r.isPc?"pc":"mobile"},get browser(){if(typeof navigator=="undefined")return"";var r=navigator.userAgent.toLowerCase(),o={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(o).filter(function(n){return o[n].test(r)}))[0]},get os(){if(typeof navigator=="undefined")return{};var r=navigator.userAgent,o=/(?:Windows Phone)/.test(r),n=/(?:SymbianOS)/.test(r)||o,t=/(?:Android)/.test(r),e=/(?:Firefox)/.test(r),i=/(?:iPad|PlayBook)/.test(r)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,a=i||t&&!/(?:Mobile)/.test(r)||e&&/(?:Tablet)/.test(r),s=/(?:iPhone)/.test(r)&&!a,l=!s&&!t&&!n&&!a;return{isTablet:a,isPhone:s,isIpad:i,isIos:s||i,isAndroid:t,isPc:l,isSymbian:n,isWindowsPhone:o,isFireFox:e}},get osVersion(){if(typeof navigator=="undefined")return 0;var r=navigator.userAgent,o="";/(?:iPhone)|(?:iPad|PlayBook)/.test(r)?o=Ar.ios:o=Ar.android;var n=o?o.exec(r):[];if(n&&n.length>=3){var t=n[2].split(".");return t.length>0?parseInt(t[0]):0}return 0},get isWeixin(){if(typeof navigator=="undefined")return!1;var r=/(micromessenger)\/([\d.]+)/,o=r.exec(navigator.userAgent.toLocaleLowerCase());return!!o},isSupportMP4:function(){var o={isSupport:!1,mime:""};if(typeof document=="undefined")return o;if(this.supportResult)return this.supportResult;var n=document.createElement("video");return typeof n.canPlayType=="function"&&Wf.map(function(t){n.canPlayType('video/mp4; codecs="'.concat(t,'"'))==="probably"&&(o.isSupport=!0,o.mime+="||".concat(t))}),this.supportResult=o,n=null,o},isMSESupport:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:'video/mp4; codecs="avc1.42E01E,mp4a.40.2"';if(typeof MediaSource=="undefined"||!MediaSource)return!1;try{return MediaSource.isTypeSupported(o)}catch(n){return this._logger.error(o,n),!1}},isHevcSupported:function(){return typeof MediaSource=="undefined"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(o){var n={supported:!1,smooth:!1,powerEfficient:!1};if(!o||typeof navigator=="undefined")return Promise.resolve(n);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(o);var t=o.video||{},e=o.audio||{};try{var i=MediaSource.isTypeSupported(t.contentType),a=MediaSource.isTypeSupported(e.contentType);return Promise.resolve({supported:i&&a,smooth:!1,powerEfficient:!1})}catch(s){return Promise.resolve(n)}}},In="3.0.13",Dr={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},Lr={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},Ei=R(function r(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};O(this,r);var t=o&&o.i18n?o.i18n.ERROR_TYPES:null;if(o.media){var e=n.mediaError?n.mediaError:o.media.error||{},i=o.duration,a=o.currentTime,s=o.ended,l=o.src,u=o.currentSrc,c=o.media,f=c.readyState,d=c.networkState,g=n.errorCode||e.code;Lr[g]&&(g=Lr[g]);var p={playerVersion:In,currentTime:a,duration:i,ended:s,readyState:f,networkState:d,src:l||u,errorType:n.errorType,errorCode:g,message:n.errorMessage||e.message,mediaError:e,originError:n.originError?n.originError.stack:"",host:h.getHostFromUrl(l||u)};return n.ext&&Object.keys(n.ext).map(function(k){p[k]=n.ext[k]}),p}else if(arguments.length>1){for(var v={playerVersion:In,domain:document.domain},y=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],T=0;T<arguments.length;T++)v[y[T]]=arguments[T];return v.ex=t?(t[arguments[0]]||{}).msg:"",v}}),Ee="play",Vn="playing",vt="ended",Ft="pause",ei="error",Ui="seeking",$e="seeked",Ie="timeupdate",ti="waiting",Ge="canplay",Gf="canplaythrough",at="durationchange",$a="volumechange",Ye="loadeddata",zf="loadedmetadata",Ka="ratechange",Ya="progress",Wn="loadstart",Bt="emptied",$f="stalled",Kf="suspend",Yf="abort",Xf="bufferedChange",Gn="focus",Xa="blur",zn="ready",qa="urlNull",pt="autoplay_started",$n="autoplay_was_prevented",ji="complete",xi="replay",Kn="destroy",Vi="urlchange",An="download_speed_change",Ve="fullscreen_change",Pi="cssFullscreen_change",Ii="mini_state_change",Yn="definition_change",qf="before_definition_change",Dn="after_definition_change",Jf="SEI_PARSED",Zf="retry",nt="video_resize",Ln="pip_change",Ja="rotate",Za="screenShot",Ai="playnext",Qa="shortcut",eo="xglog",Di="user_action",Wi="reset",to="source_error",io="source_success",Qf="switch_subtitle",no=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],ro={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},ao="fps_stuck";const eh=Object.freeze(Object.defineProperty({__proto__:null,ABORT:Yf,AFTER_DEFINITION_CHANGE:Dn,AUTOPLAY_PREVENTED:$n,AUTOPLAY_STARTED:pt,BEFORE_DEFINITION_CHANGE:qf,BUFFER_CHANGE:Xf,CANPLAY:Ge,CANPLAY_THROUGH:Gf,COMPLETE:ji,CSS_FULLSCREEN_CHANGE:Pi,DEFINITION_CHANGE:Yn,DESTROY:Kn,DOWNLOAD_SPEED_CHANGE:An,DURATION_CHANGE:at,EMPTIED:Bt,ENDED:vt,ERROR:ei,FPS_STUCK:ao,FULLSCREEN_CHANGE:Ve,LOADED_DATA:Ye,LOADED_METADATA:zf,LOAD_START:Wn,MINI_STATE_CHANGE:Ii,PAUSE:Ft,PIP_CHANGE:Ln,PLAY:Ee,PLAYER_BLUR:Xa,PLAYER_FOCUS:Gn,PLAYING:Vn,PLAYNEXT:Ai,PROGRESS:Ya,RATE_CHANGE:Ka,READY:zn,REPLAY:xi,RESET:Wi,RETRY:Zf,ROTATE:Ja,SCREEN_SHOT:Za,SEEKED:$e,SEEKING:Ui,SEI_PARSED:Jf,SHORTCUT:Qa,SOURCE_ERROR:to,SOURCE_SUCCESS:io,STALLED:$f,STATS_EVENTS:ro,SUSPEND:Kf,SWITCH_SUBTITLE:Qf,TIME_UPDATE:Ie,URL_CHANGE:Vi,URL_NULL:qa,USER_ACTION:Di,VIDEO_EVENTS:no,VIDEO_RESIZE:nt,VOLUME_CHANGE:$a,WAITING:ti,XGLOG:eo},Symbol.toStringTag,{value:"Module"}));function un(r,o){!this||!this.emit||(r==="error"?this.errorHandler(r,o.error):this.emit(r,o))}function th(r,o){return function(n,t){var e={player:o,eventName:r,originalEvent:n,detail:n.detail||{},timeStamp:n.timeStamp,currentTime:o.currentTime,duration:o.duration,paused:o.paused,ended:o.ended,isInternalOp:!!o._internalOp[n.type],muted:o.muted,volume:o.volume,host:h.getHostFromUrl(o.currentSrc),vtype:o.vtype};if(o.removeInnerOP(n.type),r==="timeupdate"&&(o._currentTime=o.media&&o.media.currentTime),r==="ratechange"){var i=o.media?o.media.playbackRate:0;if(i&&o._rate===i)return;o._rate=o.media&&o.media.playbackRate}if(r==="durationchange"&&(o._duration=o.media.duration),r==="volumechange"&&(e.isMutedChange=o._lastMuted!==o.muted,o._lastMuted=o.muted),r==="error"&&(e.error=t||o.video.error),o.mediaEventMiddleware[r]){var a=un.bind(o,r,e);try{o.mediaEventMiddleware[r].call(o,e,a)}catch(s){throw un.call(o,r,e),s}}else un.call(o,r,e)}}var ih=function(r){j(n,r);var o=V(n);function n(t){var e;O(this,n),e=o.call(this,t),e._hasStart=!1,e._currentTime=0,e._duration=0,e._internalOp={},e._lastMuted=!1,e.vtype="MP4",e._rate=-1,e.mediaConfig=Object.assign({},{controls:!1,autoplay:t.autoplay,playsinline:t.playsinline,"x5-playsinline":t.playsinline,"webkit-playsinline":t.playsinline,"x5-video-player-fullscreen":t["x5-video-player-fullscreen"]||t.x5VideoPlayerFullscreen,"x5-video-orientation":t["x5-video-orientation"]||t.x5VideoOrientation,airplay:t.airplay,"webkit-airplay":t.airplay,tabindex:t.tabindex|0,mediaType:t.mediaType||"video","data-index":-1},t.videoConfig,t.videoAttributes);var i=t["x5-video-player-type"]||t.x5VideoPlayerType;return $.isWeixin&&$.os.isAndroid&&i&&(e.mediaConfig["x5-video-player-type"]=i,delete e.mediaConfig.playsinline,delete e.mediaConfig["webkit-playsinline"],delete e.mediaConfig["x5-playsinline"]),t.loop&&(e.mediaConfig.loop="loop"),t.autoplayMuted&&!Object.prototype.hasOwnProperty.call(e.mediaConfig,"muted")&&(e.mediaConfig.muted=!0),e.media=h.createDom(e.mediaConfig.mediaType,"",e.mediaConfig,""),t.defaultPlaybackRate&&(e.media.defaultPlaybackRate=e.media.playbackRate=t.defaultPlaybackRate),h.typeOf(t.volume)==="Number"&&(e.volume=t.volume),t.autoplayMuted&&(e.media.muted=!0,e._lastMuted=!0),t.autoplay&&(e.media.autoplay=!0),e._interval={},e.mediaEventMiddleware={},e.attachVideoEvents(),e}return R(n,[{key:"setEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(a){i.mediaEventMiddleware[a]=e[a]})}},{key:"removeEventsMiddleware",value:function(e){var i=this;Object.keys(e).map(function(a){delete i.mediaEventMiddleware[a]})}},{key:"attachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers||(this._evHandlers=no.map(function(a){var s="on".concat(a.charAt(0).toUpperCase()).concat(a.slice(1));return typeof e[s]=="function"&&e.on(a,e[s]),_({},a,th(a,e))})),this._evHandlers.forEach(function(a){var s=Object.keys(a)[0];i.addEventListener(s,a[s],!1)})}},{key:"detachVideoEvents",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.media;this._evHandlers.forEach(function(a){var s=Object.keys(a)[0];i.removeEventListener(s,a[s],!1)}),this._evHandlers.forEach(function(a){var s=Object.keys(a)[0],l="on".concat(s.charAt(0).toUpperCase()).concat(s.slice(1));typeof e[l]=="function"&&e.off(s,e[l])}),this._evHandlers=null}},{key:"_attachSourceEvents",value:function(e,i){var a=this;e.removeAttribute("src"),e.load(),i.forEach(function(f,d){a.media.appendChild(h.createDom("source","",{src:"".concat(f.src),type:"".concat(f.type||""),"data-index":d+1}))});var s=e.children;if(s){this._videoSourceCount=s.length,this._videoSourceIndex=s.length,this._vLoadeddata=function(f){a.emit(io,{src:f.target.currentSrc,host:h.getHostFromUrl(f.target.currentSrc)})};for(var l=null,u=0;u<this._evHandlers.length;u++)if(Object.keys(this._evHandlers[u])[0]==="error"){l=this._evHandlers[u];break}!this._sourceError&&(this._sourceError=function(f){var d=parseInt(f.target.getAttribute("data-index"),10);if(a._videoSourceIndex--,a._videoSourceIndex===0||d>=a._videoSourceCount){var g={code:4,message:"sources_load_error"};l?l.error(f,g):a.errorHandler("error",g)}var p=Dr[4];a.emit(to,new Ei(a,{errorType:p,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:f.target.src}))});for(var c=0;c<s.length;c++)s[c].addEventListener("error",this._sourceError);e.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(e){var i=e.children;if(!(!i||i.length===0||!this._sourceError)){for(var a=0;a<i.length;a++)i[a].removeEventListener("error",this._sourceError);for(;i.length>0;)e.removeChild(i[0]);this._vLoadeddata&&e.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.media&&(this.media.error||i)){var a=this.media.error||i,s=a.code?Dr[a.code]:"other",l=a.message;this.media.currentSrc||(l="empty_src",a={code:6,message:l}),this.emit(e,new Ei(this,{errorType:s,errorCode:a.code,errorMessage:a.message||"",mediaError:a}))}}},{key:"destroy",value:function(){this.media&&(this.media.pause&&(this.media.pause(),this.media.muted=!0),this.media.removeAttribute("src"),this.media.load()),this._currentTime=0,this._duration=0,this.mediaConfig=null;for(var e in this._interval)Object.prototype.hasOwnProperty.call(this._interval,e)&&(clearInterval(this._interval[e]),this._interval[e]=null);this.detachVideoEvents(),this.media=null,this.mediaEventMiddleware={},this.removeAllListeners()}},{key:"video",get:function(){return this.media},set:function(e){this.media=e}},{key:"play",value:function(){var e=this.media?this.media.play():null;return e}},{key:"pause",value:function(){this.media&&this.media.pause()}},{key:"load",value:function(){this.media&&this.media.load()}},{key:"canPlayType",value:function(e){return this.media?this.media.canPlayType(e):!1}},{key:"getBufferedRange",value:function(e){var i=[0,0];if(!this.media)return i;e||(e=this.media.buffered);var a=this.media.currentTime;if(e)for(var s=0,l=e.length;s<l&&(i[0]=e.start(s),i[1]=e.end(s),!(i[0]<=a&&a<=i[1]));s++);return i[0]-a<=0&&a-i[1]<=0?i:[0,0]}},{key:"autoplay",get:function(){return this.media?this.media.autoplay:!1},set:function(e){this.media&&(this.media.autoplay=e)}},{key:"buffered",get:function(){return this.media?this.media.buffered:null}},{key:"buffered2",get:function(){return this.media&&this.media.buffered?h.getBuffered2(this.media.buffered):null}},{key:"bufferedPoint",get:function(){var e={start:0,end:0};if(!this.media)return e;var i=this.media.buffered;if(!i||i.length===0)return e;for(var a=0;a<i.length;a++)if((i.start(a)<=this.currentTime||i.start(a)<.1)&&i.end(a)>=this.currentTime)return{start:i.start(a),end:i.end(a)};return e}},{key:"crossOrigin",get:function(){return this.media?this.media.crossOrigin:""},set:function(e){this.media&&(this.media.crossOrigin=e)}},{key:"currentSrc",get:function(){return this.media?this.media.currentSrc:""},set:function(e){this.media&&(this.media.currentSrc=e)}},{key:"currentTime",get:function(){return this.media?this.media.currentTime!==void 0?this.media.currentTime:this._currentTime:0},set:function(e){this.media&&(this.media.currentTime=e)}},{key:"defaultMuted",get:function(){return this.media?this.media.defaultMuted:!1},set:function(e){this.media&&(this.media.defaultMuted=e)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.media?this.media.ended:!1}},{key:"error",get:function(){return this.media.error}},{key:"errorNote",get:function(){var e=this.media.error;if(!e)return"";var i=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return i[this.media.error.code-1]}},{key:"loop",get:function(){return this.media?this.media.loop:!1},set:function(e){this.media&&(this.media.loop=e)}},{key:"muted",get:function(){return this.media?this.media.muted:!1},set:function(e){!this.media||this.media.muted===e||(this._lastMuted=this.media.muted,this.media.muted=e)}},{key:"networkState",get:function(){return this.media.networkState}},{key:"paused",get:function(){return this.media?this.media.paused:!0}},{key:"playbackRate",get:function(){return this.media?this.media.playbackRate:0},set:function(e){!this.media||e===1/0||(this.media.defaultPlaybackRate=e,this.media.playbackRate=e)}},{key:"played",get:function(){return this.media?this.media.played:null}},{key:"preload",get:function(){return this.media?this.media.preload:!1},set:function(e){this.media&&(this.media.preload=e)}},{key:"readyState",get:function(){return this.media.readyState}},{key:"seekable",get:function(){return this.media?this.media.seekable:!1}},{key:"seeking",get:function(){return this.media?this.media.seeking:!1}},{key:"src",get:function(){return this.media?this.media.src:""},set:function(e){if(this.media){if(this.emit(Vi,e),this.emit(ti),this._currentTime=0,this._duration=0,h.isMSE(this.media)){this.onWaiting();return}this._detachSourceEvents(this.media),h.typeOf(e)==="Array"?this._attachSourceEvents(this.media,e):e?this.media.src=e:this.media.removeAttribute("src"),this.load()}}},{key:"volume",get:function(){return this.media?this.media.volume:0},set:function(e){e===1/0||!this.media||(this.media.volume=e)}},{key:"addInnerOP",value:function(e){this._internalOp[e]=!0}},{key:"removeInnerOP",value:function(e){delete this._internalOp[e]}},{key:"emit",value:function(e,i){for(var a,s=arguments.length,l=new Array(s>2?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];(a=z(W(n.prototype),"emit",this)).call.apply(a,[this,e,i].concat(l))}},{key:"on",value:function(e,i){for(var a,s=arguments.length,l=new Array(s>2?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];(a=z(W(n.prototype),"on",this)).call.apply(a,[this,e,i].concat(l))}},{key:"once",value:function(e,i){for(var a,s=arguments.length,l=new Array(s>2?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];(a=z(W(n.prototype),"once",this)).call.apply(a,[this,e,i].concat(l))}},{key:"off",value:function(e,i){for(var a,s=arguments.length,l=new Array(s>2?s-2:0),u=2;u<s;u++)l[u-2]=arguments[u];(a=z(W(n.prototype),"off",this)).call.apply(a,[this,e,i].concat(l))}},{key:"offAll",value:function(){z(W(n.prototype),"removeAllListeners",this).call(this)}}]),n}(Ga),nh=function(){function r(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};O(this,r),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=o}return R(r,[{key:"openDB",value:function(n){var t=this,e=this,i=this.myDB.version||1,a=e.indexedDB.open(e.myDB.name,i);a.onerror=function(s){},a.onsuccess=function(s){t.myDB.db=s.target.result,n.call(e)},a.onupgradeneeded=function(s){var l=s.target.result;s.target.transaction,l.objectStoreNames.contains(e.myDB.ojstore.name)||l.createObjectStore(e.myDB.ojstore.name,{keyPath:e.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var n=this;n.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(n,t){for(var e=this.myDB.db.transaction(n,"readwrite").objectStore(n),i,a=0;a<t.length;a++)i=e.add(t[a]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"putData",value:function(n,t){for(var e=this.myDB.db.transaction(n,"readwrite").objectStore(n),i,a=0;a<t.length;a++)i=e.put(t[a]),i.onerror=function(){},i.onsuccess=function(){}}},{key:"getDataByKey",value:function(n,t,e){var i=this,a=this.myDB.db.transaction(n,"readwrite").objectStore(n),s=a.get(t);s.onerror=function(){e.call(i,null)},s.onsuccess=function(l){var u=l.target.result;e.call(i,u)}}},{key:"deleteData",value:function(n,t){var e=this.myDB.db.transaction(n,"readwrite").objectStore(n);e.delete(t)}},{key:"clearData",value:function(n){var t=this.myDB.db.transaction(n,"readwrite").objectStore(n);t.clear()}}]),r}(),Or=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],Rr=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],Mr=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],dt="data-xgplayerid";function li(r,o,n){for(var t=arguments.length,e=new Array(t>3?t-3:0),i=3;i<t;i++)e[i-3]=arguments[i];var a=o.call.apply(o,[r].concat(e));!n||typeof n!="function"||(a&&a.then?a.then(function(){for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];n.call.apply(n,[r].concat(l))}):n.call.apply(n,[r].concat(e)))}function Li(r,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[r]&&(this.__hooks[r]=null),function(){var t=arguments,e=this;if(n.pre)try{var i;(i=n.pre).call.apply(i,[this].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(r,":pre error] >> ").concat(l.message),l}if(this.__hooks&&this.__hooks[r])try{var a,s=(a=this.__hooks[r]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));s?s.then?s.then(function(l){l!==!1&&li.apply(void 0,[e,o,n.next].concat(De(t)))}).catch(function(l){throw l}):li.apply(void 0,[this,o,n.next].concat(Array.prototype.slice.call(arguments))):s===void 0&&li.apply(void 0,[this,o,n.next].concat(Array.prototype.slice.call(arguments)))}catch(l){throw l.message="[pluginName: ".concat(this.pluginName,":").concat(r,"] >> ").concat(l.message),l}else li.apply(void 0,[this,o,n.next].concat(Array.prototype.slice.call(arguments)))}.bind(this)}function Oi(r,o){var n=this.__hooks;if(n)return n.hasOwnProperty(r)?(n&&(n[r]=o),!0):(console.warn("has no supported hook which name [".concat(r,"]")),!1)}function Ri(r,o){var n=this.__hooks;n&&delete n[r]}function Nr(r){if(!(!this.plugins||!this.plugins[r.toLowerCase()])){for(var o=this.plugins[r.toLowerCase()],n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return o.useHooks&&o.useHooks.apply(o,t)}}function Fr(r){if(!(!this.plugins||!this.plugins[r.toLowerCase()])){var o=this.plugins[r.toLowerCase()];if(o){for(var n=arguments.length,t=new Array(n>1?n-1:0),e=1;e<n;e++)t[e-1]=arguments[e];return o.removeHooks&&o.removeHooks.apply(o,t)}}}function oo(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];r.__hooks={},o&&o.map(function(n){r.__hooks[n]=null}),Object.defineProperty(r,"hooks",{get:function(){return r.__hooks&&Object.keys(r.__hooks).map(function(t){if(r.__hooks[t])return t})}})}function so(r){r.__hooks=null}function We(r,o,n){for(var t=arguments.length,e=new Array(t>3?t-3:0),i=3;i<t;i++)e[i-3]=arguments[i];if(r.__hooks&&r.__hooks[o]){var a,s=(a=r.__hooks[o]).call.apply(a,[r,r].concat(e));if(s&&s.then)s.then(function(l){return l===!1?null:n.call.apply(n,[r,r].concat(e))}).catch(function(l){console.warn("[runHooks]".concat(o," reject"),l.message)});else if(s!==!1)return n.call.apply(n,[r,r].concat(e))}else return n.call.apply(n,[r,r].concat(e))}function cn(r,o){K.logError("[".concat(r,"] event or callback cant be undefined or null when call ").concat(o))}var rt=function(){function r(o){O(this,r),h.checkIsFunction(this.beforeCreate)&&this.beforeCreate(o),oo(this),this.__args=o,this.__events={},this.__onceEvents={},this.config=o.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(o)}return R(r,[{key:"beforeCreate",value:function(n){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(n){this.player=n.player,this.playerConfig=n.player&&n.player.config,this.pluginName=n.pluginName?n.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=n.player&&n.player.logger}},{key:"updateLang",value:function(n){n||(n=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var n=h.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(n=this.playerConfig.domEventType),n}},{key:"on",value:function(n,t){var e=this;if(!n||!t||!this.player){cn(this.pluginName,"plugin.on(event, callback)");return}typeof n=="string"?(this.__events[n]=t,this.player.on(n,t)):Array.isArray(n)&&n.forEach(function(i){e.__events[i]=t,e.player.on(i,t)})}},{key:"once",value:function(n,t){var e=this;if(!n||!t||!this.player){cn(this.pluginName,"plugin.once(event, callback)");return}typeof n=="string"?(this.__onceEvents[n]=t,this.player.once(n,t)):Array.isArray(n)&&n.forEach(function(i){e.__onceEvents[i]=t,e.player.once(n,t)})}},{key:"off",value:function(n,t){var e=this;if(!n||!t||!this.player){cn(this.pluginName,"plugin.off(event, callback)");return}typeof n=="string"?(delete this.__events[n],this.player.off(n,t)):Array.isArray(n)&&n.forEach(function(i){delete e.__events[n],e.player.off(i,t)})}},{key:"offAll",value:function(){var n=this;["__events","__onceEvents"].forEach(function(t){Object.keys(n[t]).forEach(function(e){n[t][e]&&n.off(e,n[t][e]),e&&delete n[t][e]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(n){var t;if(this.player){for(var e=arguments.length,i=new Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];(t=this.player).emit.apply(t,[n].concat(i))}}},{key:"emitUserAction",value:function(n,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var i=se(se({},e),{},{pluginName:this.pluginName});this.player.emitUserAction(n,t,i)}}},{key:"hook",value:function(n,t){return Li.call.apply(Li,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(n,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),a=2;a<e;a++)i[a-2]=arguments[a];return Oi.call.apply(Oi,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(n,t){for(var e=arguments.length,i=new Array(e>2?e-2:0),a=2;a<e;a++)i[a-2]=arguments[a];return Ri.call.apply(Ri,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return e&&(t.pluginName=e),this.player.registerPlugin({plugin:n,options:t})}},{key:"getPlugin",value:function(n){return this.player?this.player.getPlugin(n):null}},{key:"__destroy",value:function(){var n=this,t=this.player,e=this.pluginName;this.offAll(),h.clearAllTimers(this),h.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(i){n[i]=null}),t.unRegisterPlugin(e),so(this)}}],[{key:"defineGetterOrSetter",value:function(n,t){for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&Object.defineProperty(n,e,t[e])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),r}(),rh=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var kt=Element.prototype;kt.matches=kt.matchesSelector||kt.mozMatchesSelector||kt.msMatchesSelector||kt.oMatchesSelector||kt.webkitMatchesSelector}function ah(r,o){for(;r&&r.nodeType!==rh;){if(typeof r.matches=="function"&&r.matches(o))return r;r=r.parentNode}}var oh=ah,sh=oh;function fn(r,o,n,t,e){var i=uh.apply(this,arguments);return r.addEventListener(n,i,e),{destroy:function(){r.removeEventListener(n,i,e)}}}function lh(r,o,n,t,e){return typeof r.addEventListener=="function"?fn.apply(null,arguments):typeof n=="function"?fn.bind(null,document).apply(null,arguments):(typeof r=="string"&&(r=document.querySelectorAll(r)),Array.prototype.map.call(r,function(i){return fn(i,o,n,t,e)}))}function uh(r,o,n,t){return function(e){e.delegateTarget=sh(e.target,o),e.delegateTarget&&t.call(r,e)}}var ch=lh;const Br=Fi(ch);var fh={CONTROLS:"controls",ROOT:"root"},ie={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"};function hn(r){return r?r.indexOf&&/^(?:http|data:|\/)/.test(r):!1}function hh(r,o){return me(r)==="object"&&r.class&&typeof r.class=="string"?"".concat(o," ").concat(r.class):o}function dh(r,o){return me(r)==="object"&&r.attr&&me(r.attr)==="object"&&Object.keys(r.attr).map(function(n){o[n]=r.attr[n]}),o}function Hr(r,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},e=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",i=null;if(r instanceof window.Element)return h.addClass(r,n),Object.keys(t).map(function(a){r.setAttribute(a,t[a])}),r;if(hn(r)||hn(r.url))return t.src=hn(r)?r:r.url||"",i=h.createDom(r.tag||"img","",t,"xg-img ".concat(n)),i;if(typeof r=="function")try{return i=r(),i instanceof window.Element?(h.addClass(i,n),Object.keys(t).map(function(a){i.setAttribute(a,t[a])}),i):(K.logWarn("warn>>icons.".concat(o," in config of plugin named [").concat(e,"] is a function mast return an Element Object")),null)}catch(a){return K.logError("Plugin named [".concat(e,"]:createIcon"),a),null}return typeof r=="string"?h.createDomFromHtml(r,t,n):(K.logWarn("warn>>icons.".concat(o," in config of plugin named [").concat(e,"] is invalid")),null)}function gh(r,o){var n=o.config.icons||o.playerConfig.icons;Object.keys(r).map(function(t){var e=r[t],i=e&&e.class?e.class:"",a=e&&e.attr?e.attr:{},s=null;n&&n[t]&&(i=hh(n[t],i),a=dh(n[t],a),s=Hr(n[t],t,i,a,o.pluginName)),!s&&e&&(s=Hr(e.icon?e.icon:e,a,i,{},o.pluginName)),o.icons[t]=s})}function ph(r,o){Object.keys(r).map(function(n){Object.defineProperty(o.langText,n,{get:function(){var e=o.lang,i=o.i18n;return i[n]?i[n]:r[n]&&r[n][e]||""}})})}var Q=function(r){j(n,r);var o=V(n);function n(){var t,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return O(this,n),t=o.call(this,e),t.__delegates=[],t}return R(n,[{key:"__init",value:function(e){if(z(W(n.prototype),"__init",this).call(this,e),!!e.root){var i=e.root,a=null;this.icons={},this.root=null,this.parent=null;var s=this.registerIcons()||{};gh(s,this),this.langText={};var l=this.registerLanguageTexts()||{};ph(l,this);var u="";try{u=this.render()}catch(d){throw K.logError("Plugin:".concat(this.pluginName,":render"),d),new Error("Plugin:".concat(this.pluginName,":render:").concat(d.message))}if(u)a=n.insert(u,i,e.index),a.setAttribute("data-index",e.index);else if(e.tag)a=h.createDom(e.tag,"",e.attr,e.name),a.setAttribute("data-index",e.index),i.appendChild(a);else return;this.root=a,this.parent=i;var c=this.config.attr||{},f=this.config.style||{};this.setAttr(c),this.setStyle(f),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var e=this;if(this.root){this._children=[];var i=this.children();i&&me(i)==="object"&&Object.keys(i).length>0&&Object.keys(i).map(function(a){var s=a,l=i[s],u={root:e.root},c,f;typeof l=="function"?(c=e.config[s]||{},f=l):me(l)==="object"&&typeof l.plugin=="function"&&(c=l.options?h.deepCopy(e.config[s]||{},l.options):e.config[s]||{},f=l.plugin),u.config=c,c.index!==void 0&&(u.index=c.index),c.root&&(u.root=c.root),e.registerPlugin(f,u,s)})}}},{key:"updateLang",value:function(e){e||(e=this.lang);function i(u,c){for(var f=0;f<u.children.length;f++)u.children[f].children.length>0?i(u.children[f],c):c(u.children[f])}var a=this.root,s=this.i18n,l=this.langText;a&&i(a,function(u){var c=u.getAttribute&&u.getAttribute("lang-key");if(c){var f=s[c.toUpperCase()]||l[c];f&&(u.innerHTML=typeof f=="function"?f(e):f)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=this.i18n||{},s=this.langText;e.setAttribute&&e.setAttribute("lang-key",i);var l=a[i]||s[i]||"";l&&(e.innerHTML=l)}},{key:"plugins",value:function(){return this._children}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";i.root=i.root||this.root;var s=z(W(n.prototype),"registerPlugin",this).call(this,e,i,a);return this._children.push(s),s}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(e){if(this.root)return this.root.querySelector(e)}},{key:"bind",value:function(e,i,a){var s=this;if(arguments.length<3&&typeof i=="function")Array.isArray(e)?e.forEach(function(u){s.bindEL(u,i)}):this.bindEL(e,i);else{var l=n.delegate.call(this,this.root,e,i,a);this.__delegates=this.__delegates.concat(l)}}},{key:"unbind",value:function(e,i){var a=this;if(arguments.length<3&&typeof i=="function")Array.isArray(e)?e.forEach(function(u){a.unbindEL(u,i)}):this.unbindEL(e,i);else for(var s="".concat(e,"_").concat(i),l=0;l<this.__delegates.length;l++)if(this.__delegates[l].key===s){this.__delegates[l].destroy(),this.__delegates.splice(l,1);break}}},{key:"setStyle",value:function(e,i){var a=this;if(this.root){if(h.typeOf(e)==="String")return this.root.style[e]=i;h.typeOf(e)==="Object"&&Object.keys(e).map(function(s){a.root.style[s]=e[s]})}}},{key:"setAttr",value:function(e,i){var a=this;if(this.root){if(h.typeOf(e)==="String")return this.root.setAttribute(e,i);h.typeOf(e)==="Object"&&Object.keys(e).map(function(s){a.root.setAttribute(s,e[s])})}}},{key:"setHtml",value:function(e,i){this.root&&(this.root.innerHTML=e,typeof i=="function"&&i())}},{key:"bindEL",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof i=="function"&&this.root.addEventListener(e,i,a)}},{key:"unbindEL",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(e)in this.root&&typeof i=="function"&&this.root.removeEventListener(e,i,a)}},{key:"show",value:function(e){if(this.root){this.root.style.display=e!==void 0?e:"block";var i=window.getComputedStyle(this.root,null),a=i.getPropertyValue("display");a==="none"&&(this.root.style.display="block")}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(e,i){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!i||!(i instanceof window.Element))return null;try{return typeof e=="string"?this.find(e).appendChild(i):e.appendChild(i)}catch(a){return K.logError("Plugin:appendChild",a),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var e=this,i=this.player;this.__delegates.map(function(a){a.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(a){i.unRegisterPlugin(a.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),z(W(n.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(a){e[a]=null})}}],[{key:"insert",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=i.children.length,l=Number(a),u=e instanceof window.Node;if(s){for(var c=0,f=null,d="";c<s;c++){f=i.children[c];var g=Number(f.getAttribute("data-index"));if(g>=l){d="beforebegin";break}else g<l&&(d="afterend")}return u?d==="afterend"?i.appendChild(e):i.insertBefore(e,f):f.insertAdjacentHTML(d,e),d==="afterend"?i.children[i.children.length-1]:i.children[c]}else return u?i.appendChild(e):i.insertAdjacentHTML("beforeend",e),i.children[i.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(e,i,a,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,u=[];if(e instanceof window.Node&&typeof s=="function")if(Array.isArray(a))a.forEach(function(f){var d=Br(e,i,f,s,l);d.key="".concat(i,"_").concat(f),u.push(d)});else{var c=Br(e,i,a,s,l);c.key="".concat(i,"_").concat(a),u.push(c)}return u}},{key:"ROOT_TYPES",get:function(){return fh}},{key:"POSITIONS",get:function(){return ie}}]),n}(rt),vh=function(){function r(){var o=this;if(O(this,r),_(this,"__trigger",function(n){var t=new Date().getTime();o.timeStamp=t;for(var e=0;e<n.length;e++)o.__runHandler(n[e].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(Uf(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(n){console.error(n)}}return R(r,[{key:"addObserver",value:function(n,t){if(this.observer){this.observer&&this.observer.observe(n);for(var e=n.getAttribute(dt),i=this.__handlers,a=-1,s=0;s<i.length;s++)i[s]&&n===i[s].target&&(a=s);a>-1?this.__handlers[a].handler=t:this.__handlers.push({target:n,handler:t,playerId:e})}}},{key:"unObserver",value:function(n){var t=-1;this.__handlers.map(function(e,i){n===e.target&&(t=i)});try{this.observer&&this.observer.unobserve(n)}catch(e){}this.observer&&this.observer.unobserve(n),t>-1&&this.__handlers.splice(t,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(n){for(var t=this.__handlers,e=0;e<t.length;e++)if(t[e]&&n===t[e].target){try{t[e].handler(n)}catch(i){console.error(i)}return!0}return!1}}]),r}(),Gt=null;function mh(r,o){return Gt||(Gt=new vh),Gt.addObserver(r,o),Gt}function yh(r,o){Gt.unObserver(r,o)}var he={pluginGroup:{},init:function(o){var n=o._pluginInfoId;n||(n=new Date().getTime(),o._pluginInfoId=n),!o.config.closeResizeObserver&&mh(o.root,function(){o.resize()}),this.pluginGroup[n]={_originalOptions:o.config||{},_plugins:{}}},formatPluginInfo:function(o,n){var t=null,e=null;return o.plugin&&typeof o.plugin=="function"?(t=o.plugin,e=o.options):(t=o,e={}),n&&(e.config=n||{}),{PLUFGIN:t,options:e}},checkPluginIfExits:function(o,n){for(var t=0;t<n.length;t++)if(o.toLowerCase()===n[t].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(o,n){for(var t=Object.keys(n),e=null,i=0;i<t.length;i++)if(o.toLowerCase()===t[i].toLowerCase()){e=n[t[i]];break}return h.typeOf(e)==="Object"?{root:e.root,position:e.position}:{}},lazyRegister:function(o,n){var t=this,e=n.timeout||1500;return Promise.race([n.loader().then(function(i){var a;i&&i.__esModule?a=i.default:a=i,t.register(o,a,i.options)}),new Promise(function(i,a){setTimeout(function(){a(new Error("timeout"))},e)})])},register:function(o,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!o||!n||typeof n!="function"||n.prototype===void 0)){var e=o._pluginInfoId;if(!(!e||!this.pluginGroup[e])){this.pluginGroup[e]._plugins||(this.pluginGroup[e]._plugins={});var i=this.pluginGroup[e]._plugins,a=this.pluginGroup[e]._originalOptions;t.player=o;var s=t.pluginName||n.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(n.isSupported&&!n.isSupported(o.config.mediaType,o.config.codecType)){console.warn("not supported plugin [".concat(s,"]"));return}t.config||(t.config={});for(var l=Object.keys(a),u=0;u<l.length;u++)if(s.toLowerCase()===l[u].toLowerCase()){var c=a[l[u]];h.typeOf(c)==="Object"?t.config=Object.assign({},t.config,a[l[u]]):h.typeOf(c)==="Boolean"&&(t.config.disable=!c);break}n.defaultConfig&&Object.keys(n.defaultConfig).forEach(function(d){typeof t.config[d]=="undefined"&&(t.config[d]=n.defaultConfig[d])}),t.root?typeof t.root=="string"&&(t.root=o[t.root]):t.root=o.root,t.index=t.config.index||0;try{i[s.toLowerCase()]&&(this.unRegister(e,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var f=new n(t);return i[s.toLowerCase()]=f,i[s.toLowerCase()].func=n,f&&typeof f.afterCreate=="function"&&f.afterCreate(),f}catch(d){throw console.error(d),d}}}},unRegister:function(o,n){o._pluginInfoId&&(o=o._pluginInfoId),n=n.toLowerCase();try{var t=this.pluginGroup[o]._plugins[n];t&&(t.pluginName&&t.__destroy(),delete this.pluginGroup[o]._plugins[n])}catch(e){console.error("[unRegister:".concat(n,"] cgid:[").concat(o,"] error"),e)}},deletePlugin:function(o,n){var t=o._pluginInfoId;t&&this.pluginGroup[t]&&this.pluginGroup[t]._plugins&&delete this.pluginGroup[t]._plugins[n]},getPlugins:function(o){var n=o._pluginInfoId;return n&&this.pluginGroup[n]?this.pluginGroup[n]._plugins:{}},findPlugin:function(o,n){var t=o._pluginInfoId;if(!t||!this.pluginGroup[t])return null;var e=n.toLowerCase();return this.pluginGroup[t]._plugins[e]},beforeInit:function(o){var n=this;function t(e){return!e||!e.then?new Promise(function(i){i()}):e}return new Promise(function(e){if(n.pluginGroup){var i;return o._loadingPlugins&&o._loadingPlugins.length?i=Promise.all(o._loadingPlugins):i=Promise.resolve(),i.then(function(){var a=o._pluginInfoId;if(!n.pluginGroup[a]){e();return}var s=n.pluginGroup[a]._plugins,l=[];Object.keys(s).forEach(function(u){if(s[u]&&s[u].beforePlayerInit)try{var c=s[u].beforePlayerInit();l.push(t(c))}catch(f){throw l.push(t(null)),f}}),Promise.all([].concat(l)).then(function(){e()}).catch(function(u){console.error(u),e()})})}})},afterInit:function(o){var n=o._pluginInfoId;if(!(!n||!this.pluginGroup[n])){var t=this.pluginGroup[n]._plugins;Object.keys(t).forEach(function(e){t[e]&&t[e].afterPlayerInit&&t[e].afterPlayerInit()})}},setLang:function(o,n){var t=n._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=this.pluginGroup[t]._plugins;Object.keys(e).forEach(function(i){if(e[i].updateLang)e[i].updateLang(o);else try{e[i].lang=o}catch(a){console.warn("".concat(i," setLang"))}})}},reRender:function(o){var n=this,t=o._pluginInfoId;if(!(!t||!this.pluginGroup[t])){var e=[],i=this.pluginGroup[t]._plugins;Object.keys(i).forEach(function(a){a!=="controls"&&i[a]&&(e.push({plugin:i[a].func,options:i[a].__args}),n.unRegister(t,a))}),e.forEach(function(a){n.register(o,a.plugin,a.options)})}},onPluginsReady:function(o){var n=o._pluginInfoId;if(!(!n||!this.pluginGroup[n])){var t=this.pluginGroup[n]._plugins||{};Object.keys(t).forEach(function(e){t[e].onPluginsReady&&typeof t[e].onPluginsReady=="function"&&t[e].onPluginsReady()})}},destroy:function(o){var n=o._pluginInfoId;if(this.pluginGroup[n]){yh(o.root);for(var t=this.pluginGroup[n]._plugins,e=0,i=Object.keys(t);e<i.length;e++){var a=i[e];this.unRegister(n,a)}var s=o.isUseActive;if(delete this.pluginGroup[n],delete o._pluginInfoId,s){var l=Object.keys(this.pluginGroup);l.length>0&&this.setCurrentUserActive(l[l.length-1],!0)}}}},w={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-active",INACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",INNER_FULLSCREEN:"xgplayer-fullscreen-inner",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",CONTROLS_AUTOHIDE:"controls-autohide",TOP_BAR_AUTOHIDE:"top-bar-autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function Ur(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:jf(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}var bh=function(o,n){var t,e,i;n.preset&&n.options?i=new n.preset(n.options,o.config):i=new n({},o.config);var a=i,s=a.plugins,l=s===void 0?[]:s,u=a.ignores,c=u===void 0?[]:u,f=a.icons,d=f===void 0?{}:f,g=a.i18n,p=g===void 0?[]:g;o.config.plugins||(o.config.plugins=[]),o.config.ignores||(o.config.ignores=[]),(t=o.config.plugins).push.apply(t,De(l)),(e=o.config.ignores).push.apply(e,De(c)),Object.keys(d).map(function(y){o.config.icons[y]||(o.config.icons[y]=d[y])});var v=o.config.i18n||[];p.push.apply(p,De(v)),o.config.i18n=p},_h=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"onMouseEnter",function(s){var l=b(t),u=l.player,c=l.playerConfig;c.closeControlsBlur&&u.focus({autoHide:!1})}),_(b(t),"onMouseLeave",function(s){var l=b(t),u=l.player;u.focus()}),t}return R(n,[{key:"beforeCreate",value:function(e){!e.config.mode&&$.device==="mobile"&&(e.config.mode="flex"),e.player.config.marginControls&&(e.config.autoHide=!1)}},{key:"afterCreate",value:function(){var e=this,i=this.config,a=i.disable,s=i.height,l=i.mode;if(!a){l==="flex"&&this.player.addClass(w.FLEX_CONTROLS);var u={height:"".concat(s,"px")};Object.keys(u).map(function(f){e.root.style[f]=u[f]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(Ii,function(f){f?h.addClass(e.root,"mini-controls"):h.removeClass(e.root,"mini-controls")});var c=this.playerConfig.isMobileSimulateMode;$.device!=="mobile"&&c!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"focusAwhile",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&h.addClass(this.root,w.CONTROLS_AUTOHIDE)}},{key:"pauseAutoHide",value:function(){h.removeClass(this.root,w.CONTROLS_AUTOHIDE)}},{key:"show",value:function(e){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(this.root){var s=e.defaultConfig||{};if(!i.root){var l=i.position?i.position:i.config&&i.config.position?i.config.position:s.position;switch(l){case ie.CONTROLS_LEFT:i.root=this.left;break;case ie.CONTROLS_RIGHT:i.root=this.right;break;case ie.CONTROLS_CENTER:i.root=this.center;break;case ie.CONTROLS:i.root=this.root;break;default:i.root=this.left}return z(W(n.prototype),"registerPlugin",this).call(this,e,i,a)}}}},{key:"destroy",value:function(){$.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var e=this.config,i=e.mode,a=e.autoHide,s=e.initShow,l=e.disable;if(!l){var u=h.classNames({"xgplayer-controls":!0},{"flex-controls":i==="flex"},{"bottom-controls":i==="bottom"},_({},w.CONTROLS_AUTOHIDE,a),{"xgplayer-controls-initshow":s||!a});return'<xg-controls class="'.concat(u,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),n}(Q),Ch={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}},we={lang:{},langKeys:[],textKeys:[]};function qt(r,o){return Object.keys(o).forEach(function(n){var t=h.typeOf(o[n]),e=h.typeOf(r[n]);if(t==="Array"){var i;e!=="Array"&&(r[n]=[]),(i=r[n]).push.apply(i,De(o[n]))}else t==="Object"?(e!=="Object"&&(r[n]={}),qt(r[n],o[n])):r[n]=o[n]}),r}function lo(){Object.keys(we.lang.en).map(function(r){we.textKeys[r]=r})}function Th(r,o){var n=[];if(o||(o=we),!!o.lang){h.typeOf(r)!=="Array"?n=Object.keys(r).map(function(i){var a=i==="zh"?"zh-cn":i;return{LANG:a,TEXT:r[i]}}):n=r;var t=o,e=t.lang;n.map(function(i){i.LANG==="zh"&&(i.LANG="zh-cn"),e[i.LANG]?qt(e[i.LANG]||{},i.TEXT||{}):Xn(i,o)}),lo()}}function Xn(r,o){var n=r.LANG;if(o||(o=we),!!o.lang){var t=r.TEXT||{};n==="zh"&&(n="zh-cn"),o.lang[n]?qt(o.lang[n],t):(o.langKeys.push(n),o.lang[n]=t),lo()}}function kh(r){var o,n={lang:{},langKeys:[],textKeys:{},pId:r};return qt(n.lang,we.lang),(o=n.langKeys).push.apply(o,De(we.langKeys)),qt(n.textKeys,we.textKeys),n}Xn(Ch);var Ot={get textKeys(){return we.textKeys},get langKeys(){return we.langKeys},get lang(){var r={};return we.langKeys.map(function(o){r[o]=we.lang[o]}),we.lang["zh-cn"]&&(r.zh=we.lang["zh-cn"]||{}),r},extend:Th,use:Xn,init:kh},q={INITIAL:1,READY:2,ATTACHING:3,ATTACHED:4,NOTALLOW:5,RUNNING:6,ENDED:7,DESTROYED:8},jr=["ERROR","INITIAL","READY","ATTACHING","ATTACHED","NOTALLOW","RUNNING","ENDED","DESTROYED"],Ce={},dn=null,uo=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"add",value:function(e){e&&(Ce[e.playerId]=e,Object.keys(Ce).length===1&&this.setActive(e.playerId,!0))}},{key:"remove",value:function(e){e&&(e.isUserActive,delete Ce[e.playerId])}},{key:"_iterate",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(var a in Ce)if(Object.prototype.hasOwnProperty.call(Ce,a)){var s=Ce[a];if(i){if(e(s))break}else e(s)}}},{key:"forEach",value:function(e){this._iterate(e)}},{key:"find",value:function(e){var i=null;return this._iterate(function(a){var s=e(a);return s&&(i=a),s},!0),i}},{key:"findAll",value:function(e){var i=[];return this._iterate(function(a){e(a)&&i.push(a)}),i}},{key:"setActive",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(Ce[e])return i?this.forEach(function(a){e===a.playerId?(a.isUserActive=!0,a.isInstNext=!1):a.isUserActive=!1}):Ce[e].isUserActive=i,e}},{key:"getActiveId",value:function(){for(var e=Object.keys(Ce),i=0;i<e.length;i++){var a=Ce[e[i]];if(a&&a.isUserActive)return e[i]}return null}},{key:"setNext",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(Ce[e])return i?this.forEach(function(a){e===a.playerId?(a.isUserActive=!1,a.isInstNext=!0):a.isInstNext=!1}):Ce[e].isInstNext=i,e}}],[{key:"getInstance",value:function(){return dn||(dn=new n),dn}}]),n}(Wa.EventEmitter);function wh(r){for(var o=Object.keys(Ce),n=0;n<o.length;n++){var t=Ce[o[n]];if(t.root===r)return t}return null}var Sh=["play","pause","replay","retry"],Vr=0,Wr=0,ft=null,Gi=function(r){j(n,r);var o=V(n);function n(t){var e;O(this,n);var i=h.deepMerge(Ur(),t);e=o.call(this,i),_(b(e),"canPlayFunc",function(){if(e.config){var p=e.config,v=p.autoplay,y=p.defaultPlaybackRate;K.logInfo("player","canPlayFunc, startTime",e.__startTime),e.__startTime>0&&e.duration>0&&(e.currentTime=e.__startTime>e.duration?e.duration:e.__startTime,e.__startTime=-1),e.playbackRate=y,(v||e._useAutoplay)&&e.mediaPlay(),e.off(Ge,e.canPlayFunc),e.removeClass(w.ENTER)}}),_(b(e),"onFullscreenChange",function(p,v){var y=function(){h.setTimeout(b(e),function(){e.resize()},100)},T=h.getFullScreenEl();e._fullActionFrom?e._fullActionFrom="":e.emit(Di,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:e.currentTime,duration:e.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var k=Vf(T,e.playerId,dt);if(v||T&&(T===e._fullscreenEl||k))y(),!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!0,e.changeFullStyle(e.root,T,w.FULLSCREEN),e.emit(Ve,!0,e._fullScreenOffset),e.cssfullscreen&&e.exitCssFullscreen();else if(e.fullscreen){y();var C=b(e),F=C._fullScreenOffset,N=C.config;N.needFullscreenScroll?(window.scrollTo(F.left,F.top),h.setTimeout(b(e),function(){e.fullscreen=!1,e._fullScreenOffset=null},100)):(!e.config.closeFocusVideoFocus&&e.media.focus(),e.fullscreen=!1,e._fullScreenOffset=null),e.cssfullscreen?e.removeClass(w.FULLSCREEN):e.recoverFullStyle(e.root,e._fullscreenEl,w.FULLSCREEN),e._fullscreenEl=null,e.emit(Ve,!1)}}),_(b(e),"_onWebkitbeginfullscreen",function(p){e._fullscreenEl=e.media,e.onFullscreenChange(p,!0)}),_(b(e),"_onWebkitendfullscreen",function(p){e.onFullscreenChange(p,!1)}),oo(b(e),Sh),e.config=i,e._pluginInfoId=h.generateSessionId(),Nf(b(e));var a=e.constructor.defaultPreset;if(e.config.presets.length){var s=e.config.presets.indexOf("default");s>=0&&a&&(e.config.presets[s]=a)}else a&&e.config.presets.push(a);e.userTimer=null,e.waitTimer=null,e.handleSource=!0,e._state=q.INITIAL,e.isError=!1,e._hasStart=!1,e.isSeeking=!1,e.isCanplay=!1,e._useAutoplay=!1,e.__startTime=-1,e.rotateDeg=0,e.isActive=!1,e.fullscreen=!1,e.cssfullscreen=!1,e.isRotateFullscreen=!1,e._fullscreenEl=null,e.timeSegments=[],e._cssfullscreenEl=null,e.curDefinition=null,e._orgCss="",e._fullScreenOffset=null,e._videoHeight=0,e._videoWidth=0,e.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},e.sizeInfo={width:0,height:0,left:0,top:0},e._accPlayed={t:0,acc:0,loopAcc:0},e._offsetInfo={currentTime:-1,duration:0},e.innerContainer=null,e.controls=null,e.topBar=null,e.root=null,e.__i18n=Ot.init(e._pluginInfoId),$.os.isAndroid&&$.osVersion>0&&$.osVersion<6&&(e.config.autoplay=!1),e.database=new nh,e.isUserActive=!1,e._onceSeekCanplay=null,e._isPauseBeforeSeek=0,e.innerStates={isActiveLocked:!1},e.instManager=ft;var l=e._initDOM();if(!l)return console.error(new Error("can't find the dom which id is ".concat(e.config.id," or this.config.el does not exist"))),jn(e);var u=e.config,c=u.definition,f=c===void 0?{}:c,d=u.url;if(!d&&f.list&&f.list.length>0){var g=f.list.find(function(p){return p.definition&&p.definition===f.defaultDefinition});g||(f.defaultDefinition=f.list[0].definition,g=f.list[0]),e.config.url=g.url,e.curDefinition=g}return e._bindEvents(),e._registerPresets(),e._registerPlugins(),he.onPluginsReady(b(e)),e.getInitDefinition(),e.setState(q.READY),h.setTimeout(b(e),function(){e.emit(zn)},0),e.onReady&&e.onReady(),(e.config.videoInit||e.config.autoplay)&&(!e.hasStart||e.state<q.ATTACHED)&&e.start(),e}return R(n,[{key:"_initDOM",value:function(){var e,i=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var a=this.config.el;if(a&&a.nodeType===1)this.root=a;else return this.emit(ei,new Ei("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var s=wh(this.root);s&&(K.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),s.destroy()),this.root.setAttribute(dt,this.playerId),(e=ft)===null||e===void 0||e.add(this),he.init(this),this._initBaseDoms();var l=this.constructor.XgVideoProxy;if(l&&this.mediaConfig.mediaType===l.mediaType){var u=this.innerContainer||this.root;this.detachVideoEvents(this.media);var c=new l(u,this.config,this.mediaConfig);this.attachVideoEvents(c),this.media=c}if(this.media.setAttribute(dt,this.playerId),this.config.controls){var f=this.config.controls.root||null,d=he.register(this,_h,{root:f});this.controls=d}var g=this.config.isMobileSimulateMode==="mobile"?"mobile":$.device;if(this.addClass("".concat(w.DEFAULT," ").concat(w.INACTIVE," xgplayer-").concat(g," ").concat(this.config.controls?"":w.NO_CONTROLS)),this.config.autoplay?this.addClass(w.ENTER):this.addClass(w.NO_START),this.config.fluid){var p=this.config,v=p.width,y=p.height;(typeof v!="number"||typeof y!="number")&&(v=600,y=337.5);var T={width:"100%",height:"0","max-width":"100%","padding-top":"".concat(y*100/v,"%")};Object.keys(T).forEach(function(m){i.root.style[m]=T[m]})}else["width","height"].forEach(function(m){i.config[m]&&(typeof i.config[m]!="number"?i.root.style[m]=i.config[m]:i.root.style[m]="".concat(i.config[m],"px"))});var k=this.root.getBoundingClientRect(),C=k.width,F=k.height,N=k.left,E=k.top;return this.sizeInfo.width=C,this.sizeInfo.height=F,this.sizeInfo.left=N,this.sizeInfo.top=E,!0}},{key:"_initBaseDoms",value:function(){this.topBar=null,this.leftBar=null,this.rightBar=null,this.config.marginControls&&(this.innerContainer=h.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer))}},{key:"_bindEvents",value:function(){var e=this;["focus","blur"].forEach(function(i){e.on(i,e["on"+i.charAt(0).toUpperCase()+i.slice(1)])}),Or.forEach(function(i){document&&document.addEventListener(i,e.onFullscreenChange)}),$.os.isIos&&(this.media.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once(Ye,this.resize),this.playFunc=function(){e.config.closeFocusVideoFocus||e.media.focus()},this.once(Ee,this.playFunc)}},{key:"_unbindEvents",value:function(){var e=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),Or.forEach(function(i){document.removeEventListener(i,e.onFullscreenChange)}),this.playFunc&&this.off(Ee,this.playFunc),this.off(Ge,this.canPlayFunc),this.media.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.media.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(e){var i=this;if(this.media&&!((!e||e===""||h.typeOf(e)==="Array"&&e.length===0)&&(e="",this.emit(qa),K.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this.handleSource&&(this._detachSourceEvents(this.media),h.typeOf(e)==="Array"&&e.length>0?this._attachSourceEvents(this.media,e):!this.media.src||this.media.src!==e?this.media.src=e:e||this.media.removeAttribute("src")),h.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var a=this.innerContainer?this.innerContainer:this.root;this.media instanceof window.Element&&!a.contains(this.media)&&a.insertBefore(this.media,a.firstChild);var s=this.media.readyState;K.logInfo("_startInit readyState",s),this.config.autoplay&&(!h.isMSE(this.media)&&this.load(),($.os.isIpad||$.os.isPhone)&&this.mediaPlay());var l=this.config.startTime;this.__startTime=l>0?l:-1,this.config.startTime=0,s>=2&&this.duration>0?this.canPlayFunc():this.on(Ge,this.canPlayFunc),(!this.hasStart||this.state<q.ATTACHED)&&he.afterInit(this),this.hasStart=!0,this.setState(q.ATTACHED),h.setTimeout(this,function(){i.emit(ji)},0)}}},{key:"_registerPlugins",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var a=this.config.ignores||[],s=this.config.plugins||[],l=this.config.i18n||[];i&&Ot.extend(l,this.__i18n);var u=a.join("||").toLowerCase().split("||"),c=this.plugins;s.forEach(function(f){try{var d=f.plugin?f.plugin.pluginName:f.pluginName;if(d&&u.indexOf(d.toLowerCase())>-1)return null;if(!i&&c[d.toLowerCase()])return;if(f.lazy&&f.loader){var g=he.lazyRegister(e,f);f.forceBeforeInit&&(g.then(function(){e._loadingPlugins.splice(e._loadingPlugins.indexOf(g),1)}).catch(function(p){K.logError("_registerPlugins:loadingPlugin",p),e._loadingPlugins.splice(e._loadingPlugins.indexOf(g),1)}),e._loadingPlugins.push(g));return}return e.registerPlugin(f)}catch(p){K.logError("_registerPlugins:",p)}})}},{key:"_registerPresets",value:function(){var e=this;this.config.presets.forEach(function(i){bh(e,i)})}},{key:"_getRootByPosition",value:function(e){var i=null;switch(e){case ie.ROOT_RIGHT:this.rightBar||(this.rightBar=h.createPositionBar("xg-right-bar",this.root)),i=this.rightBar;break;case ie.ROOT_LEFT:this.leftBar||(this.leftBar=h.createPositionBar("xg-left-bar",this.root)),i=this.leftBar;break;case ie.ROOT_TOP:this.topBar||(this.topBar=h.createPositionBar("xg-top-bar",this.root),this.config.topBarAutoHide&&h.addClass(this.topBar,w.TOP_BAR_AUTOHIDE)),i=this.topBar;break;default:i=this.innerContainer||this.root;break}return i}},{key:"registerPlugin",value:function(e,i){var a=he.formatPluginInfo(e,i),s=a.PLUFGIN,l=a.options,u=this.config.plugins,c=he.checkPluginIfExits(s.pluginName,u);!c&&u.push(s);var f=he.getRootByConfig(s.pluginName,this.config);f.root&&(l.root=f.root),f.position&&(l.position=f.position);var d=l.position?l.position:l.config&&l.config.position||s.defaultConfig&&s.defaultConfig.position;return!l.root&&typeof d=="string"&&d.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(s,l,s.pluginName):(l.root||(l.root=this._getRootByPosition(d)),he.register(this,s,l))}},{key:"deregister",value:function(e){typeof e=="string"?he.unRegister(this,e):e instanceof rt&&he.unRegister(this,e.pluginName)}},{key:"unRegisterPlugin",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(e),i&&this.removePluginFromConfig(e)}},{key:"removePluginFromConfig",value:function(e){var i;if(typeof e=="string"?i=e:e instanceof rt&&(i=e.pluginName),!!i)for(var a=this.config.plugins.length-1;a>-1;a--){var s=this.config.plugins[a];if(s.pluginName.toLowerCase()===i.toLowerCase()){this.config.plugins.splice(a,1);break}}}},{key:"plugins",get:function(){return he.getPlugins(this)}},{key:"getPlugin",value:function(e){var i=he.findPlugin(this,e);return i&&i.pluginName?i:null}},{key:"addClass",value:function(e){this.root&&(h.hasClass(this.root,e)||h.addClass(this.root,e))}},{key:"removeClass",value:function(e){this.root&&h.removeClass(this.root,e)}},{key:"hasClass",value:function(e){if(this.root)return h.hasClass(this.root,e)}},{key:"setAttribute",value:function(e,i){this.root&&this.root.setAttribute(e,i)}},{key:"removeAttribute",value:function(e,i){this.root&&this.root.removeAttribute(e,i)}},{key:"start",value:function(e){var i=this;if(!(this.state>q.ATTACHING))return!e&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this.setState(q.ATTACHING),this._registerPlugins(!1),he.beforeInit(this).then(function(){if(i.config){e||(e=i.url||i.config.url);var a=i._preProcessUrl(e),s=i._startInit(a.url);return s}}).catch(function(a){throw a.fileName="player",a.lineNumber="236",K.logError("start:beforeInit:",a),a})}},{key:"switchURL",value:function(e,i){var a=this,s=e;h.typeOf(e)==="Object"&&(s=e.url),s=this._preProcessUrl(s).url;var l=this.currentTime;this.__startTime=l;var u=this.paused&&!this.isError;return this.src=s,new Promise(function(c,f){var d=function(v){a.off("timeupdate",g),a.off("canplay",g),f(v)},g=function(){a.duration>0&&a.__startTime>0&&(a.currentTime=a.__startTime,a.__startTime=-1),u&&a.pause(),a.off("error",d),c(!0)};if(a.once("error",d),!s){a.errorHandler("error",{code:6,message:"empty_src"});return}$.os.isAndroid?a.once("timeupdate",g):a.once("canplay",g),a.play()})}},{key:"videoPlay",value:function(){this.mediaPlay()}},{key:"mediaPlay",value:function(){var e=this;if(!this.hasStart&&this.state<q.ATTACHED){this.removeClass(w.NO_START),this.addClass(w.ENTER),this.start(),this._useAutoplay=!0;return}this.state<q.RUNNING&&(this.removeClass(w.NO_START),!this.isCanplay&&this.addClass(w.ENTER));var i=z(W(n.prototype),"play",this).call(this);return i!==void 0&&i&&i.then?i.then(function(){e.removeClass(w.NOT_ALLOW_AUTOPLAY),e.addClass(w.PLAYING),e.state<q.RUNNING&&(K.logInfo(">>>>playPromise.then"),e.setState(q.RUNNING),e.emit(pt))}).catch(function(a){if(K.logWarn(">>>>playPromise.catch",a.name),e.media&&e.media.error){e.onError(),e.removeClass(w.ENTER);return}a.name==="NotAllowedError"&&(e._errorTimer=h.setTimeout(e,function(){e._errorTimer=null,e.emit($n),e.addClass(w.NOT_ALLOW_AUTOPLAY),e.removeClass(w.ENTER),e.pause(),e.setState(q.NOTALLOW)},0))}):(K.logWarn("video.play not return promise"),this.state<q.RUNNING&&(this.setState(q.RUNNING),this.removeClass(w.NOT_ALLOW_AUTOPLAY),this.removeClass(w.NO_START),this.removeClass(w.ENTER),this.addClass(w.PLAYING),this.emit(pt))),i}},{key:"mediaPause",value:function(){z(W(n.prototype),"pause",this).call(this)}},{key:"videoPause",value:function(){z(W(n.prototype),"pause",this).call(this)}},{key:"play",value:function(){var e=this;return this.removeClass(w.PAUSED),We(this,"play",function(){return e.mediaPlay()})}},{key:"pause",value:function(){var e=this;We(this,"pause",function(){z(W(n.prototype),"pause",e).call(e)})}},{key:"seek",value:function(e,i){var a=this;if(!(!this.media||Number.isNaN(Number(e))||!this.hasStart)){var s=this.config,l=s.isSeekedPlay,u=s.seekedStatus,c=i||(l?"play":u);e=e<0?0:e>this.duration?parseInt(this.duration,10):e,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off($e,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(a.removeClass(w.ENTER),a.isSeeking=!1,c){case"play":a.play();break;case"pause":a.pause();break;default:a._isPauseBeforeSeek>1||a.paused?a.pause():a.play()}a._isPauseBeforeSeek=0,a._onceSeekCanplay=null},this.once($e,this._onceSeekCanplay),this.state<q.RUNNING?(this.removeClass(w.NO_START),this.currentTime=e,this.play()):this.currentTime=e}}},{key:"getInitDefinition",value:function(){var e=this,i=this.config,a=i.definition,s=i.url;!s&&a&&a.list&&a.list.length>0&&a.defaultDefinition&&a.list.map(function(l){l.definition===a.defaultDefinition&&(e.config.url=l.url,e.curDefinition=l)})}},{key:"changeDefinition",value:function(e,i){var a=this,s=this.config.definition;if(Array.isArray(s==null?void 0:s.list)&&s.list.forEach(function(u){(e==null?void 0:e.definition)===u.definition&&(a.curDefinition=u)}),e!=null&&e.bitrate&&typeof e.bitrate!="number"&&(e.bitrate=parseInt(e.bitrate,10)||0),this.emit(Yn,{from:i,to:e}),!this.hasStart){this.config.url=e.url;return}var l=this.switchURL(e.url,se({seamless:s.seamless!==!1&&typeof MediaSource!="undefined"&&typeof MediaSource.isTypeSupported=="function"},e));l&&l.then?l.then(function(){a.emit(Dn,{from:i,to:e})}):this.emit(Dn,{from:i,to:e})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once(Ye,this.reloadFunc)}},{key:"resetState",value:function(){var e=this,i=w.NOT_ALLOW_AUTOPLAY,a=w.PLAYING,s=w.NO_START,l=w.PAUSED,u=w.REPLAY,c=w.ENTER,f=w.ENDED,d=w.ERROR,g=w.LOADING,p=[i,a,s,l,u,c,f,d,g];this.hasStart=!1,this.isError=!1,this._useAutoplay=!1,this.mediaPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,p.forEach(function(v){e.removeClass(v)}),this.addClass(w.NO_START),this.emit(Wi)}},{key:"reset",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;this.resetState();var s=this.plugins;if(s&&(i.map(function(u){e.deregister(u)}),a)){var l=Ur();Object.keys(this.config).keys(function(u){e.config[u]!=="undefined"&&(u==="plugins"||u==="presets"||u==="el"||u==="id")&&(e.config[u]=l[u])})}}},{key:"destroy",value:function(){var e,i=this,a=this.innerContainer,s=this.root,l=this.media;if(!(!s||!l)){if(this.hasStart=!1,this._useAutoplay=!1,s.removeAttribute(dt),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.media),h.clearAllTimers(this),this.emit(Kn),(e=ft)===null||e===void 0||e.remove(this),he.destroy(this),so(this),z(W(n.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root&&this.exitFullscreen(),a)for(var u=a.children,c=0;c<u.length;c++)a.removeChild(u[c]);!a&&l instanceof window.Node&&s.contains(l)&&s.removeChild(l),["topBar","leftBar","rightBar","innerContainer"].map(function(d){i[d]&&s.removeChild(i[d]),i[d]=null});var f=s.className.split(" ");f.length>0?s.className=f.filter(function(d){return d.indexOf("xgplayer")<0}).join(" "):s.className="",this.removeAttribute("data-xgfill"),["isSeeking","isCanplay","isActive","cssfullscreen","fullscreen"].forEach(function(d){i[d]=!1})}}},{key:"replay",value:function(){var e=this;this.removeClass(w.ENDED),this.currentTime=0,this.isSeeking=!1,We(this,"replay",function(){e.once($e,function(){var i=e.mediaPlay();i&&i.catch&&i.catch(function(a){console.log(a)})}),e.play(),e.emit(xi),e.onPlay()})}},{key:"retry",value:function(){var e=this;this.removeClass(w.ERROR),this.addClass(w.LOADING),We(this,"retry",function(){var i=e.currentTime,a=e.config.url,s=h.isMSE(e.media)?{url:a}:e._preProcessUrl(a);e.src=s.url,!e.config.isLive&&(e.currentTime=i),e.once(Ge,function(){e.mediaPlay()})})}},{key:"changeFullStyle",value:function(e,i,a,s){e&&(s||(s=w.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=h.filterStyleFromText(e)),h.addClass(e,a),i&&i!==e&&!this._orgPCss&&(this._orgPCss=h.filterStyleFromText(i),h.addClass(i,s),i.setAttribute(dt,this.playerId)))}},{key:"recoverFullStyle",value:function(e,i,a,s){s||(s=w.PARENT_FULLSCREEN),this._orgCss&&(h.setStyleFromCsstext(e,this._orgCss),this._orgCss=""),h.removeClass(e,a),i&&i!==e&&this._orgPCss&&(h.setStyleFromCsstext(i,this._orgPCss),this._orgPCss="",h.removeClass(i,s),i.removeAttribute(dt))}},{key:"getFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,i=this.root,a=this.media;e||(e=i),this._fullScreenOffset={top:h.scrollTop(),left:h.scrollLeft()},this._fullscreenEl=e,this._fullActionFrom="get";var s=h.getFullScreenEl();if(s===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{for(var l=0;l<Rr.length;l++){var u=Rr[l];if(e[u]){var c=u==="webkitRequestFullscreen"?e.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):e[u]();return c&&c.then?c:Promise.resolve()}}return a.fullscreenEnabled||a.webkitSupportsFullscreen?(a.webkitEnterFullscreen(),Promise.resolve()):Promise.reject(new Error("call getFullscreen fail"))}catch(f){return Promise.reject(new Error("call getFullscreen fail"))}}},{key:"exitFullscreen",value:function(e){if(this.isRotateFullscreen&&this.exitRotateFullscreen(),!(!this._fullscreenEl&&!h.getFullScreenEl())){this.root;var i=this.media;this._fullActionFrom="exit";try{for(var a=0;a<Mr.length;a++){var s=Mr[a];if(document[s]){var l=document[s]();return l&&l.then?l:Promise.resolve()}}return i&&i.webkitSupportsFullscreen?(i.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}catch(u){return Promise.reject(new Error("call exitFullscreen fail"))}}}},{key:"getCssFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.isRotateFullscreen?this.exitRotateFullscreen():this.fullscreen&&this.exitFullscreen();var i=e?"".concat(w.INNER_FULLSCREEN," ").concat(w.CSS_FULLSCREEN):w.CSS_FULLSCREEN;this.changeFullStyle(this.root,e,i);var a=this.config.fullscreen,s=a===void 0?{}:a,l=s.useCssFullscreen===!0||typeof s.useCssFullscreen=="function"&&s.useCssFullscreen();l&&(this.fullscreen=!0,this.emit(Ve,!0)),this._cssfullscreenEl=e,this.cssfullscreen=!0,this.emit(Pi,!0)}},{key:"exitCssFullscreen",value:function(){var e=this._cssfullscreenEl?"".concat(w.INNER_FULLSCREEN," ").concat(w.CSS_FULLSCREEN):w.CSS_FULLSCREEN;if(!this.fullscreen)this.recoverFullStyle(this.root,this._cssfullscreenEl,e);else{var i=this.config.fullscreen,a=i===void 0?{}:i,s=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();s?(this.recoverFullStyle(this.root,this._cssfullscreenEl,e),this.fullscreen=!1,this.emit(Ve,!1)):this.removeClass(e)}this._cssfullscreenEl=null,this.cssfullscreen=!1,this.emit(Pi,!1)}},{key:"getRotateFullscreen",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.cssfullscreen&&this.exitCssFullscreen(e);var i=e?"".concat(w.INNER_FULLSCREEN," ").concat(w.ROTATE_FULLSCREEN):w.ROTATE_FULLSCREEN;this._fullscreenEl=e||this.root,this.changeFullStyle(this.root,e,i,w.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!0,this.fullscreen=!0,this.setRotateDeg(90),this._rootStyle=this.root.getAttribute("style"),this.root.style.width="".concat(window.innerHeight,"px"),this.emit(Ve,!0)}},{key:"exitRotateFullscreen",value:function(e){var i=this._fullscreenEl!==this.root?"".concat(w.INNER_FULLSCREEN," ").concat(w.ROTATE_FULLSCREEN):w.ROTATE_FULLSCREEN;this.recoverFullStyle(this.root,this._fullscreenEl,i,w.PARENT_ROTATE_FULLSCREEN),this.isRotateFullscreen=!1,this.fullscreen=!1,this.setRotateDeg(0),this.emit(Ve,!1),this._rootStyle&&(this.root.style.style=this._rootStyle,this._rootStyle=!1)}},{key:"setRotateDeg",value:function(e){window.orientation===90||window.orientation===-90?this.rotateDeg=0:this.rotateDeg=e}},{key:"focus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(e);return}this.emit(Gn,se({paused:this.paused,ended:this.ended},e))}},{key:"blur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(e);return}this.emit(Xa,se({paused:this.paused,ended:this.ended},e))}},{key:"onFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3},a=this.innerStates;if(this.isActive=!0,this.removeClass(w.INACTIVE),this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null),i.isLock!==void 0&&(a.isActiveLocked=i.isLock),i.autoHide===!1||i.isLock===!0||a.isActiveLocked){this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null);return}var s=i&&i.delay?i.delay:this.config.inactive;this.userTimer=h.setTimeout(this,function(){e.userTimer=null,e.blur()},s)}},{key:"onBlur",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=e.ignorePaused,a=i===void 0?!1:i;if(!(!this.isActive||this.innerStates.isActiveLocked)){var s=this.config.closePauseVideoFocus;this.isActive=!1,(a||s||!this.paused&&!this.ended)&&this.addClass(w.INACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.removeClass(w.ENTER),this.removeClass(w.ERROR),this.removeClass(w.LOADING),this.isCanplay=!0,this.waitTimer&&h.clearTimeout(this,this.waitTimer)}},{key:"onDurationchange",value:function(){this.__startTime>0&&this.duration>0&&(this.currentTime=this.__startTime,this.__startTime=-1)}},{key:"onLoadeddata",value:function(){this.isError=!1,this.isSeeking=!1}},{key:"onLoadstart",value:function(){this.removeClass(w.ERROR),this.isCanplay=!1}},{key:"onPlay",value:function(){this.state===q.ENDED&&this.setState(q.RUNNING),this.removeClass(w.PAUSED),this.ended&&this.removeClass(w.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){this.addClass(w.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.updateAcc("ended"),this.addClass(w.ENDED),this.setState(q.ENDED)}},{key:"onError",value:function(){this.isError=!0,this.updateAcc("error"),this.removeClass(w.NOT_ALLOW_AUTOPLAY),this.removeClass(w.NO_START),this.removeClass(w.ENTER),this.removeClass(w.LOADING),this.addClass(w.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(w.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&h.clearTimeout(this,this.waitTimer),this.removeClass(w.LOADING),this.removeClass(w.SEEKING)}},{key:"onWaiting",value:function(){var e=this;this.waitTimer&&h.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=h.setTimeout(this,function(){e.addClass(w.LOADING),h.clearTimeout(e,e.waitTimer),e.waitTimer=null},this.config.minWaitDelay)}},{key:"onPlaying",value:function(){var e=this;this.isError=!1;var i=w.NO_START,a=w.PAUSED,s=w.ENDED,l=w.ERROR,u=w.REPLAY,c=w.LOADING,f=[i,a,s,l,u,c];f.forEach(function(d){e.removeClass(d)}),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.media.videoHeight&&this.resize(),(this.waitTimer||this.hasClass(w.LOADING))&&this.media.readyState>2&&(this.removeClass(w.LOADING),h.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&this.state<q.RUNNING&&this.duration&&(this.setState(q.RUNNING),this.emit(pt)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){h.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"emitUserAction",value:function(e,i,a){if(!(!this.media||!i||!e)){var s=h.typeOf(e)==="String"?e:e.type||"";a.props&&h.typeOf(a.props)!=="Array"&&(a.props=[a.props]),this.emit(Di,se({eventType:s,action:i,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:e},a))}}},{key:"updateAcc",value:function(e){if(this._accPlayed.t){var i=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=i,this._accPlayed.t=0,(e==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(e){var i=this.media.buffered;if(!i||i.length===0||!this.duration)return!0;for(var a=e||this.media.currentTime||.2,s=i.length,l=0;l<s;l++)if(i.start(l)<=a&&i.end(l)>a)return!0;return!1}},{key:"resizePosition",value:function(){var e=this.videoPos,i=e.vy,a=e.vx,s=e.h,l=e.w,u=this.videoPos.rotate;if(!(u<0&&s<0&&l<0)){var c=this.videoPos._pi;if(!c&&this.media.videoHeight&&(c=this.media.videoWidth/this.media.videoHeight*100),!!c){this.videoPos.pi=c,u=u<0?0:u;var f={rotate:u},d=0,g=0,p=1,v=Math.abs(u/90),y=this.root,T=this.innerContainer,k=y.offsetWidth,C=T?T.offsetHeight:y.offsetHeight,F=C,N=k;if(v%2===0)p=s>0?100/s:l>0?100/l:1,f.scale=p,d=i>0?(100-s)/2-i:0,f.y=v===2?0-d:d,g=a>0?(100-l)/2-a:0,f.x=v===2?0-g:g,this.media.style.width="".concat(N,"px"),this.media.style.height="".concat(F,"px");else if(v%2===1){N=C,F=k;var E=C-k;g=-E/2/N*100,f.x=v===3?g+i/2:g-i/2,d=E/2/F*100,f.y=v===3?d+a/2:d-a/2,f.scale=p,this.media.style.width="".concat(N,"px"),this.media.style.height="".concat(F,"px")}var m=h.getTransformStyle(f,this.media.style.transform||this.media.style.webkitTransform);this.media.style.transform=m,this.media.style.webkitTransform=m}}}},{key:"position",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.media||!e||!e.h)){var i=this.videoPos;i.h=e.h*100||0,i.w=e.w*100||0,i.vx=e.x*100||0,i.vy=e.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(a){if(a!=="plugins"){i.config[a]=e[a];var s=i.plugins[a.toLowerCase()];s&&h.typeOf(s.setConfig)==="Function"&&s.setConfig(e[a])}})}},{key:"playNext",value:function(e){var i=this;this.resetState(),this.setConfig(e),this._currentTime=0,this._duration=0,We(this,"playnext",function(){i.start(),i.emit(Ai,e)})}},{key:"resize",value:function(){var e=this;if(this.media){var i=this.root.getBoundingClientRect();this.sizeInfo.width=i.width,this.sizeInfo.height=i.height,this.sizeInfo.left=i.left,this.sizeInfo.top=i.top;var a=this.media,s=a.videoWidth,l=a.videoHeight,u=this.config,c=u.fitVideoSize,f=u.videoFillMode;if((f==="fill"||f==="cover"||f==="contain")&&this.setAttribute("data-xgfill",f),!(!l||!s)){this._videoHeight=l,this._videoWidth=s;var d=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,g=i.width,p=i.height-d,v=parseInt(s/l*1e3,10),y=parseInt(g/p*1e3,10),T=g,k=p,C={};c==="auto"&&y>v||c==="fixWidth"?(k=g/v*1e3,this.config.fluid?C.paddingTop="".concat(k*100/T,"%"):C.height="".concat(k+d,"px")):(c==="auto"&&y<v||c==="fixHeight")&&(T=v*p/1e3,C.width="".concat(T,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(C).forEach(function(N){e.root.style[N]=C[N]}),(f==="fillHeight"&&y<v||f==="fillWidth"&&y>v)&&this.setAttribute("data-xgfill","cover");var F={videoScale:v,vWidth:T,vHeight:k,cWidth:T,cHeight:k+d};this.resizePosition(),this.emit(nt,F)}}}},{key:"updateObjectPosition",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.media.updateObjectPosition){this.media.updateObjectPosition(e,i);return}this.media.style.objectPosition="".concat(e*100,"% ").concat(i*100,"%")}},{key:"setState",value:function(e){K.logInfo("setState","state from:".concat(jr[this.state]," to:").concat(jr[e])),this._state=e}},{key:"_preProcessUrl",value:function(e,i){var a=this.config.preProcessUrl;return!h.isBlob(e)&&typeof a=="function"?a(e,i):{url:e}}},{key:"state",get:function(){return this._state}},{key:"isFullscreen",get:function(){return this.fullscreen}},{key:"isCssfullScreen",get:function(){return this.cssfullscreen}},{key:"hasStart",get:function(){return this._hasStart},set:function(e){typeof e=="boolean"&&(this._hasStart=e,e===!1&&this.setState(q.READY),this.emit("hasstart"))}},{key:"isPlaying",get:function(){return this._state===q.RUNNING||this._state===q.ENDED},set:function(e){e?this.setState(q.RUNNING):this._state>=q.RUNNING&&this.setState(q.ATTACHED)}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(e){var i=this,a=this.config.definition,s=null,l=null;a.list=e,this.emit("resourceReady",e),e.forEach(function(u){var c;((c=i.curDefinition)===null||c===void 0?void 0:c.definition)===u.definition&&(s=u),a.defaultDefinition===u.definition&&(l=u)}),!l&&e.length>0&&(l=e[0]),s?this.changeDefinition(s):l&&this.changeDefinition(l)}},{key:"videoFrameInfo",get:function(){var e={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.media||!this.media.getVideoPlaybackQuality)return e;var i=this.media.getVideoPlaybackQuality();return e.dropped=i.droppedVideoFrames||0,e.total=i.totalVideoFrames||0,e.corrupted=i.corruptedVideoFrames||0,e.total>0&&(e.droppedRate=e.dropped/e.total*100,e.droppedDuration=parseInt(this.cumulateTime/e.total*e.dropped,0)),e}},{key:"lang",get:function(){return this.config.lang},set:function(e){var i=Ot.langKeys.filter(function(a){return a===e});if(i.length===0&&e!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(e,"] is not supported now, list of all supported languages is [").concat(Ot.langKeys.join(),"] "));return}this.config.lang=e,he.setLang(e,this)}},{key:"i18n",get:function(){var e=this.config.lang;return e==="zh"&&(e="zh-cn"),this.__i18n.lang[e]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return In}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(e){this.__url=e}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(e){this.plugins.poster&&this.plugins.poster.update(e)}},{key:"readyState",get:function(){return z(W(n.prototype),"readyState",this)}},{key:"error",get:function(){var e=z(W(n.prototype),"error",this);return this.i18n[e]||e}},{key:"networkState",get:function(){return z(W(n.prototype),"networkState",this)}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var e=this._accPlayed,i=e.acc,a=e.t;return a?new Date().getTime()-a+i:i}},{key:"zoom",get:function(){return this.config.zoom},set:function(e){this.config.zoom=e}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(e){e=h.convertDeg(e),!(e%90!==0||e===this.videoPos.rotate)&&(this.videoPos.rotate=e,this.resizePosition())}},{key:"avgSpeed",get:function(){return Wr},set:function(e){Wr=e}},{key:"realTimeSpeed",get:function(){return Vr},set:function(e){Vr=e}},{key:"offsetCurrentTime",get:function(){return this._offsetInfo.currentTime||0},set:function(e){this._offsetInfo.currentTime=e}},{key:"offsetDuration",get:function(){return this._offsetInfo.duration||0},set:function(e){this._offsetInfo.duration=e||0}},{key:"hook",value:function(e,i){return Li.call.apply(Li,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(e,i){return Oi.call.apply(Oi,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(e,i){return Ri.call.apply(Ri,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(e,i,a){for(var s=arguments.length,l=new Array(s>3?s-3:0),u=3;u<s;u++)l[u-3]=arguments[u];return Nr.call.apply(Nr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(e,i,a){for(var s=arguments.length,l=new Array(s>3?s-3:0),u=3;u<s;u++)l[u-3]=arguments[u];return Fr.call.apply(Fr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;typeof i=="boolean"&&i!==this.muted&&(this.addInnerOP("volumechange"),this.muted=i),he.setCurrentUserActive(this.playerId,e)}}],[{key:"debugger",get:function(){return K.config.debug},set:function(e){K.config.debug=e}},{key:"instManager",get:function(){return ft},set:function(e){ft=e}},{key:"getCurrentUserActivePlayerId",value:function(){var e;return(e=ft)===null||e===void 0?void 0:e.getActiveId()}},{key:"setCurrentUserActive",value:function(e,i){var a;(a=ft)===null||a===void 0||a.setActive(e,i)}},{key:"isHevcSupported",value:function(){return $.isHevcSupported()}},{key:"probeConfigSupported",value:function(e){return $.probeConfigSupported(e)}},{key:"install",value:function(e,i){n.plugins||(n.plugins={}),n.plugins[e]||(n.plugins[e]=i)}},{key:"use",value:function(e,i){n.plugins||(n.plugins={}),n.plugins[e]=i}}]),n}(ih);_(Gi,"defaultPreset",null);_(Gi,"XgVideoProxy",null);Gi.instManager=uo.getInstance();function pe(){return new Date().getTime()}var Je={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd"},Eh=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"_onTimeupdate",function(){t._state.isTimeUpdate=!0,t._state.autoplayStart&&(K.logInfo("[xgLogger]".concat(t.player.playerId," _onTimeupdate")),t._sendFF("onTimeupdate"))}),_(b(t),"_onAutoplayStart",function(){K.logInfo("[xgLogger]".concat(t.player.playerId," _onAutoplayStart")),t._state.autoplayStart=!0,t.vt&&t._sendFF("onAutoplayStart")}),_(b(t),"_onReset",function(){t._state={autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},t.vt=0,t.pt=0,t.fvt=0,t.newPointTime=pe(),t.loadedCostTime=0,t.startCostTime=0,t._isSeeking=!1,t.seekingStart=0,t.waitingStart=0,t.fixedWaitingStart=0,t._isWaiting=!1,t._waitTimer&&h.clearTimeout(b(t),t._waitTimer),t._waittTimer&&h.clearTimeout(b(t),t._waittTimer),t._waitTimer=null,t._waittTimer=null,t._waitType=0}),_(b(t),"_onSeeking",function(){t.seekingStart||(t.suspendWaitingStatus("seek"),t.seekingStart=pe(),t.emitLog(Je.SEEK_START,{start:pe()}))}),_(b(t),"_onSeeked",function(){t.suspendSeekingStatus("seeked")}),_(b(t),"_onWaitingLoadStart",function(){t._isWaiting||t.vt||(t._isWaiting=!0,t.waitingStart=pe(),t.fixedWaitingStart=pe(),t._waitType=1,t.emitLog(Je.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:1,endType:"loadstart"}))}),_(b(t),"_onWaiting",function(){t._isWaiting||!t.vt||(t._isWaiting=!0,t.vt?t.seekingStart?t._waitType=2:t._waitType=0:t._waitType=1,t.fixedWaitingStart=pe(),t._waitTimer=h.setTimeout(b(t),function(){t._isWaiting&&(t.waitingStart=pe(),h.clearTimeout(b(t),t._waitTimer),t._waitTimer=null,t._startWaitTimeout(),t.emitLog(Je.WAIT_START,{fixedStart:t.fixedWaitingStart,start:t.waitingStart,type:t._waitType,endType:t._waitType===2?"seek":"playing"}))},200))}),_(b(t),"_onError",function(){t.suspendSeekingStatus("error"),t.suspendWaitingStatus("error")}),_(b(t),"_onPlaying",function(){t._isWaiting&&t.suspendWaitingStatus("playing")}),t}return R(n,[{key:"afterCreate",value:function(){var e=this;this._onReset(),this._waitType="firstFrame",this._initOnceEvents(),this.newPointTime=pe(),this.loadedCostTime=0,this.startCostTime=0,this.on(Wn,function(){var i=e._state,a=i.autoplayStart,s=i.isFFSend;e.startCostTime=pe()-e.newPointTime,K.logInfo("[xgLogger]".concat(e.player.playerId," LOAD_START"),"autoplayStart:".concat(a," isFFSend:").concat(s," startCostTime:").concat(e.startCostTime," newPointTime").concat(e.newPointTime)),!s&&(!i.isLs&&e.emitLog(Je.LOAD_START,{}),i.isLs=!0,i.isTimeUpdate=!1,i.isFFLoading=!0,e.pt=pe(),e.vt=0,e.fvt=0,e._initOnceEvents(),e._onWaitingLoadStart())}),this.on(Ye,function(){e.vt=pe(),e.fvt=e.vt-e.pt,e.loadedCostTime=e.vt-e.newPointTime;var i=e._state,a=i.isTimeUpdate,s=i.isFFSend,l=i.autoplayStart;K.logInfo("[xgLogger]".concat(e.player.playerId," LOADED_DATA"),"fvt:".concat(e.fvt," isTimeUpdate:").concat(e._state.isTimeUpdate," loadedCostTime:").concat(e.loadedCostTime)),(a||l)&&e._sendFF("loadedData"),s||e.emitLog(Je.LOADED_DATA,{}),e.suspendWaitingStatus("loadeddata")}),this.on(Ui,this._onSeeking),this.on($e,this._onSeeked),this.on(Kn,function(){e.endState("destroy")}),this.on(Vi,function(){e.endState("urlChange"),K.logInfo("[xgLogger]".concat(e.player.playerId," URL_CHANGE")),e._state.isFFSend&&e._onReset()}),this.on([Vn,Ge],this._onPlaying),this.on(ti,this._onWaiting),this.on(ei,this._onError),this.on(Wi,function(){K.logInfo("[xgLogger]".concat(e.player.playerId," RESET")),e.endState("reset"),e._initOnceEvents(),e._onReset()})}},{key:"_initOnceEvents",value:function(){this.off(pt,this._onAutoplayStart),this.off(Ie,this._onTimeupdate),this.once(pt,this._onAutoplayStart),this.once(Ie,this._onTimeupdate)}},{key:"_sendFF",value:function(e){this.s=pe();var i=this._state,a=i.isFFLoading,s=i.isFFSend;K.logInfo("[xgLogger]".concat(this.player.playerId," _sendFF"),"".concat(e," fvt:").concat(this.fvt," isFFLoading:").concat(a," !isFFSend:").concat(!s)),this.vt>0&&a&&!s&&(K.logInfo("[xgLogger]".concat(this.player.playerId," emitLog_firstFrame"),e),this._state.isFFLoading=!1,this._state.isFFSend=!0,this.emitLog(Je.FIRST_FRAME,{fvt:this.fvt,costTime:this.fvt,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime}))}},{key:"_startWaitTimeout",value:function(){var e=this;this._waittTimer&&h.clearTimeout(this,this._waittTimer),this._waittTimer=h.setTimeout(this,function(){e.suspendWaitingStatus("timeout"),h.clearTimeout(e,e._waittTimer),e._waittTimer=null},this.config.waitTimeout)}},{key:"endState",value:function(e){this.suspendWaitingStatus(e),this.suspendSeekingStatus(e)}},{key:"suspendSeekingStatus",value:function(e){if(this.seekingStart){var i=pe(),a=i-this.seekingStart;this.seekingStart=0,this.emitLog(Je.SEEK_END,{end:i,costTime:a,endType:e})}}},{key:"suspendWaitingStatus",value:function(e){if(this._waitTimer&&(h.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(h.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var i=pe(),a=i-this.waitingStart,s=i-this.fixedWaitingStart,l=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0,this.emitLog(Je.WAIT_END,{fixedCostTime:s>l?l:s,costTime:a>l?l:a,type:e==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":e})}}},{key:"emitLog",value:function(e,i){var a=this.player;this.emit(eo,se({t:pe(),host:h.getHostFromUrl(a.currentSrc),vtype:a.vtype,eventType:e,currentTime:this.player.currentTime,readyState:a.video.readyState,networkState:a.video.networkState},i))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),n}(Q);function xh(){return new DOMParser().parseFromString(`<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78">
  <path fill="#fff" transform="translate(20, 20)" d="M8.22708362,13.8757234 L11.2677371,12.6472196 C11.7798067,12.4403301 12.3626381,12.6877273 12.5695276,13.1997969 L12.9441342,14.1269807 C13.1510237,14.6390502 12.9036264,15.2218816 12.3915569,15.4287712 L6.8284538,17.6764107 L5.90126995,18.0510173 C5.38920044,18.2579068 4.80636901,18.0105096 4.5994795,17.49844 L1.97723335,11.0081531 C1.77034384,10.4960836 2.0177411,9.91325213 2.52981061,9.70636262 L3.45699446,9.33175602 C3.96906396,9.12486652 4.5518954,9.37226378 4.75878491,9.88433329 L5.67885163,12.1615783 C7.99551726,6.6766934 13.3983951,3 19.5,3 C27.7842712,3 34.5,9.71572875 34.5,18 C34.5,26.2842712 27.7842712,33 19.5,33 C15.4573596,33 11.6658607,31.3912946 8.87004692,28.5831991 C8.28554571,27.9961303 8.28762719,27.0463851 8.87469603,26.4618839 C9.46176488,25.8773827 10.4115101,25.8794641 10.9960113,26.466533 C13.2344327,28.7147875 16.263503,30 19.5,30 C26.127417,30 31.5,24.627417 31.5,18 C31.5,11.372583 26.127417,6 19.5,6 C14.4183772,6 9.94214483,9.18783811 8.22708362,13.8757234 Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Ph=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"registerIcons",value:function(){return{replay:xh}}},{key:"afterCreate",value:function(){var e=this;Q.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayClick",function(){e.player.replay()},{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(vt,function(){if(e.playerConfig.loop||h.addClass(e.player.root,"replay"),!e.config.disable){e.show();var i=e.root.querySelector("path");if(i){var a=window.getComputedStyle(i).getPropertyValue("transform");if(typeof a=="string"&&a.indexOf("none")>-1)return null;i.setAttribute("transform",a)}}}),this.on(Ee,function(){e.hide()})}},{key:"handleReplay",value:function(e){e.preventDefault(),e.stopPropagation(),this.player.replay(),h.removeClass(this.player.root,"replay")}},{key:"show",value:function(e){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),n}(Q),Ih=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(e){this.config.isEndedShow=e}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(e){h.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(e){typeof e.player.config.poster=="string"&&(e.config.poster=e.player.config.poster)}},{key:"afterCreate",value:function(){var e=this;this.on(vt,function(){e.isEndedShow&&h.removeClass(e.root,"hide")}),this.config.hideCanplay?(this.once(Ie,function(){e.onTimeUpdate()}),this.on(Vi,function(){h.removeClass(e.root,"hide"),h.addClass(e.root,"xg-showplay"),e.once(Ie,function(){e.onTimeUpdate()})})):this.on(Ee,function(){h.addClass(e.root,"hide")})}},{key:"onTimeUpdate",value:function(){var e=this;this.player.currentTime?h.removeClass(this.root,"xg-showplay"):this.once(Ie,function(){e.onTimeUpdate()})}},{key:"update",value:function(e){e&&(this.config.poster=e,this.root.style.backgroundImage="url(".concat(e,")"))}},{key:"getBgSize",value:function(e){var i="";switch(e){case"cover":i="cover";break;case"container":i="container";break;case"fixHeight":i="auto 100%";break;default:i=""}return i?"background-size: ".concat(i,";"):""}},{key:"render",value:function(){var e=this.config,i=e.poster,a=e.hideCanplay,s=e.fillMode,l=e.notHidden,u=this.getBgSize(s),c=i?"background-image:url(".concat(i,");").concat(u):u,f=l?"xg-not-hidden":a?"xg-showplay":"";return'<xg-poster class="xgplayer-poster '.concat(f,'" style="').concat(c,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,notHidden:!1,poster:"",fillMode:"fixWidth"}}}]),n}(Q);function qn(){return new DOMParser().parseFromString(`<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M576,363L810,512L576,661zM342,214L576,363L576,661L342,810z"></path>
</svg>
`,"image/svg+xml").firstChild}function Jn(){return new DOMParser().parseFromString(`<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598,214h170v596h-170v-596zM256 810v-596h170v596h-170z"></path>
</svg>
`,"image/svg+xml").firstChild}var Fe={};function Ah(r,o){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};return Fe[r]&&window.clearTimeout(Fe[r].id),Fe[r]={},n.start&&n.start(),Fe[r].id=window.setTimeout(function(){n.end&&n.end(),window.clearTimeout(Fe[r].id),delete Fe[r]},o),Fe[r].id}function Gr(r){if(r){window.clearTimeout(r);return}Object.keys(Fe).map(function(o){window.clearTimeout(Fe[o].id),delete Fe[o]})}var Dh=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),_(b(e),"onPlayerReset",function(){e.autoPlayStart=!1;var i=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),h.removeClass(e.root,i),e.show()}),_(b(e),"onAutoplayStart",function(){if(!e.autoPlayStart){var i=e.config.mode==="auto"?"auto-hide":"hide";h.addClass(e.root,i),e.autoPlayStart=!0,e.onPlayPause("play")}}),e.autoPlayStart=!1,e}return R(n,[{key:"afterCreate",value:function(){var e=this,i=this.player,a=this.playerConfig;this.initIcons(),this.once(zn,function(){a&&(a.lang&&a.lang==="en"?h.addClass(i.root,"lang-is-en"):a.lang==="jp"&&h.addClass(i.root,"lang-is-jp"))}),this.on(pt,this.onAutoplayStart),a.autoplay||this.show(),this.on($n,function(){var s=e.config.mode==="auto"?"auto-hide":"hide";e.setAttr("data-state","play"),h.removeClass(e.root,s),e.show()}),this.on(Ee,function(){e.onPlayPause("play")}),this.on(Ft,function(){e.onPlayPause("pause")}),this.on(Wi,function(){e.onPlayerReset()}),this.clickHandler=this.hook("startClick",this.switchPausePlay,{pre:function(l){l.cancelable&&l.preventDefault(),l.stopPropagation();var u=e.player.paused;e.emitUserAction(l,"switch_play_pause",{props:"paused",from:u,to:!u})}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:qn,class:"xg-icon-play"},startPause:{icon:Jn,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild("xg-start-inner",e.startPlay),this.appendChild("xg-start-inner",e.startPause)}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(e){h.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){h.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){h.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(e){e?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(e){var i=this;this._animateId=Ah("pauseplay",400,{start:function(){h.addClass(i.root,"interact"),i.show(),i.switchStatus(!0)},end:function(){h.removeClass(i.root,"interact"),!e&&i.hide(),i._animateId=null}})}},{key:"endAnimate",value:function(){h.removeClass(this.root,"interact"),Gr(this._animateId),this._animateId=null}},{key:"switchPausePlay",value:function(e){var i=this.player;if(e.cancelable&&e.preventDefault(),e.stopPropagation(),!(i.state<q.READY)){var a=this.player.paused;!a&&i.state===q.RUNNING?i.pause():i.play()}}},{key:"onPlayPause",value:function(e){var i=this.config,a=this.player;if(!(!a||a.state<q.RUNNING||!this.autoPlayStart)){if(i.mode==="show"){this.switchStatus(),this.show();return}if(i.mode==="auto"){this.switchStatus();return}if(i.isShowPause&&a.paused&&!a.ended||i.isShowEnd&&a.ended){this.switchStatus(),this.show(),this.endAnimate();return}if(i.disableAnimate){this.switchStatus(),this.hide();return}if(e==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||a.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),Gr(this._animateId)}},{key:"render",value:function(){var e=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(e,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),n}(Q),Lh=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"render",value:function(){var e=this.config.innerHtml,i=h.createDom("xg-enter","",{},"xgplayer-enter");if(e&&e instanceof window.HTMLElement)i.appendChild(e);else if(e&&typeof e=="string")i.innerHTML=e;else{for(var a="",s=1;s<=12;s++)a+='<div class="xgplayer-enter-bar'.concat(s,'"></div>');i.innerHTML='<div class="xgplayer-enter-spinner">'.concat(a,"</div>")}return i}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),n}(Q);function ot(r,o,n){try{return' <div class="xg-tips '.concat(n?"hide":" ",'" lang-key="').concat(r.i18nKeys[o],`">
    `).concat(r.i18n[o],`
    </div>`)}catch(t){return'<div class="xg-tips hide"></div>'}}var zr=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var e="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[e],'">').concat(this.i18n[e],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:10}}}]),n}(Q);function $r(r){var o=parseFloat(r),n=r.indexOf("%")===-1&&!Number.isNaN(o);return n&&o}var Zn=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],co=Zn.length;function Oh(){for(var r={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},o=0;o<co;o++){var n=Zn[o];r[n]=0}return r}function Rh(r){var o=window.getComputedStyle(r);return o}function Kr(r){if(typeof r=="string"&&(r=document.querySelector(r)),!(!r||me(r)!=="object"||!r.nodeType)){var o=Rh(r);if(o.display==="none")return Oh();var n={};n.width=r.offsetWidth,n.height=r.offsetHeight;for(var t=n.isBorderBox=o.boxSizing==="border-box",e=0;e<co;e++){var i=Zn[e],a=o[i],s=parseFloat(a);n[i]=Number.isNaN(s)?0:s}var l=n.paddingLeft+n.paddingRight,u=n.paddingTop+n.paddingBottom,c=n.marginLeft+n.marginRight,f=n.marginTop+n.marginBottom,d=n.borderLeftWidth+n.borderRightWidth,g=n.borderTopWidth+n.borderBottomWidth,p=t,v=$r(o.width);v!==!1&&(n.width=v+(p?0:l+d));var y=$r(o.height);return y!==!1&&(n.height=y+(p?0:u+g)),n.innerWidth=n.width-(l+d),n.innerHeight=n.height-(u+g),n.outerWidth=n.width+c,n.outerHeight=n.height+f,n}}function gn(r,o){for(var n=0;n<r.length;n++){var t=r[n];if(t.identifier===o)return t}}var pn={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},Yr={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Mh=function(r){j(n,r);var o=V(n);function n(t){var e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return O(this,n),e=o.call(this),e.isEnabled=!0,e.isDragging=!1,e.isDown=!1,e.position={},e.downPoint={},e.dragPoint={x:0,y:0},e.startPos={x:0,y:0},e._root=t instanceof Element?t:document.querySelector(t),e._handlerDom=i.handle instanceof Element?i.handle:document.querySelector(i.handle),!e._root||!e._handlerDom?jn(e):(e._bindStartEvent(),e)}return R(n,[{key:"_bindStartEvent",value:function(){var e=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),Yr[this._startKey].map(function(i){e["on".concat(i)]=e["on".concat(i)].bind(e)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(e){var i=this;if(e){var a=Yr[this._startKey];a.map(function(s){window.addEventListener(s,i["on".concat(s)])}),this._boundPointerEvents=a}}},{key:"_unbindPostStartEvents",value:function(){var e=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(i){window.removeEventListener(i,e["on".concat(i)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(e){this.onUp()}},{key:"animate",value:function(){var e=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){e.animate()}))}},{key:"positionDrag",value:function(){var e="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=e,this._root.style.webKitTransform=e}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(e){this.dragStart(e,e)}},{key:"onmousemove",value:function(e){this.dragMove(e,e)}},{key:"onmouseup",value:function(e){this.dragEnd(e,e)}},{key:"ontouchstart",value:function(e){var i=e.changedTouches[0];this.dragStart(e,i),this.touchIdentifier=i.pointerId!==void 0?i.pointerId:i.identifier,e.preventDefault()}},{key:"ontouchmove",value:function(e){var i=gn(e.changedTouches,this.touchIdentifier);i&&this.dragMove(e,i)}},{key:"ontouchend",value:function(e){var i=gn(e.changedTouches,this.touchIdentifier);i&&this.dragEnd(e,i),e.preventDefault()}},{key:"ontouchcancel",value:function(e){var i=gn(e.changedTouches,this.touchIdentifier);i&&this.dragCancel(e,i)}},{key:"dragStart",value:function(e,i){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=i,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var a=Kr(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-a.height,this.startPos.maxX=window.innerWidth-a.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(e)}}},{key:"dragRealStart",value:function(e,i){this.isDragging=!0,this.animate(),this.emit(pn.START,this.startPos)}},{key:"dragEnd",value:function(e,i){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(pn.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(e,i){var a={x:i.pageX-this.downPoint.pageX,y:i.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this.dragRealStart(e,i),a}},{key:"dragMove",value:function(e,i){if(e=e||window.event,!!this.isDown){var a=this.startPos,s=a.x,l=a.y,u=this._dragPointerMove(e,i),c=u.x,f=u.y;c=this.checkContain("x",c,s),f=this.checkContain("y",f,l),this.position.x=s+c,this.position.y=l+f,this.dragPoint.x=c,this.dragPoint.y=f,this.emit(pn.MOVE,this.position)}}},{key:"dragCancel",value:function(e,i){this.dragEnd(e,i)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(e){return Math.abs(e.x)>3||Math.abs(e.y)>3}},{key:"checkContain",value:function(e,i,a){return i+a<0?0-a:e==="x"&&i+a>this.startPos.maxX?this.startPos.maxX-a:e==="y"&&i+a>this.startPos.maxY?this.startPos.maxY-a:i}},{key:"_getPosition",value:function(){var e=window.getComputedStyle(this._root),i=this._getPositionCoord(e.left,"width"),a=this._getPositionCoord(e.top,"height");this.position.x=Number.isNaN(i)?0:i,this.position.y=Number.isNaN(a)?0:a,this._addTransformPosition(e)}},{key:"_addTransformPosition",value:function(e){var i=e.transform;if(i.indexOf("matrix")===0){var a=i.split(","),s=i.indexOf("matrix3d")===0?12:4,l=parseInt(a[s],10),u=parseInt(a[s+1],10);this.position.x+=l,this.position.y+=u}}},{key:"_getPositionCoord",value:function(e,i){if(e.indexOf("%")!==-1){var a=Kr(this._root.parentNode);return a?parseFloat(e)/100*a[i]:0}return parseInt(e,10)}}]),n}(Ga),Nh=function(r){j(n,r);var o=V(n);function n(t){var e;O(this,n),e=o.call(this,t),_(b(e),"onCancelClick",function(s){e.exitMini(),e.isClose=!0}),_(b(e),"onCenterClick",function(s){var l=b(e),u=l.player;u.paused?u.play():u.pause()}),_(b(e),"onScroll",function(s){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-e.pos.scrollY)<50)){var l=parseInt(h.getCss(e.player.root,"height"));l+=e.config.scrollTop,e.pos.scrollY=window.scrollY,window.scrollY>l+5?!e.isMini&&!e.isClose&&e.getMini():window.scrollY<=l&&(e.isMini&&e.exitMini(),e.isClose=!1)}}),e.isMini=!1,e.isClose=!1;var i=b(e),a=i.config;return e.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:e.config.height,width:e.config.width,scrollY:window.scrollY||0},e.lastStyle=null,e}return R(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.mini=="boolean"&&(e.config.isShowIcon=e.player.config.mini)}},{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.on(Ft,function(){e.setAttr("data-state","pause")}),this.on(Ee,function(){e.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var e=this,i=this.player,a=this.config;if(!a.disable){if(this.config.isShowIcon){var s={config:{onClick:function(){e.getMini()}}};i.controls.registerPlugin(zr,s,zr.pluginName)}var l=h.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",l,this.onCancelClick),this.bind(".play-icon",l,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Mh(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:qn,class:"xg-icon-play"},pause:{icon:Jn,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".play-icon",e.play),this.appendChild(".play-icon",e.pause)}},{key:"getMini",value:function(){var e=this;if(!this.isMini){var i=this.player,a=this.playerConfig,s=this.config.target||this.player.root;this.lastStyle={},h.addClass(i.root,"xgplayer-mini"),["width","height","top","left"].map(function(l){e.lastStyle[l]=s.style[l],s.style[l]="".concat(e.pos[l],"px")}),a.fluid&&(s.style["padding-top"]=""),this.emit(Ii,!0),i.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var e=this;if(!this.isMini)return!1;var i=this.player,a=this.playerConfig,s=this.config.target||this.player.root;h.removeClass(i.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(l){s.style[l]=e.lastStyle[l]}),this.lastStyle=null,a.fluid&&(i.root.style.width="100%",i.root.style.height="0",i.root.style["padding-top"]="".concat(a.height*100/a.width,"%")),this.emit(Ii,!1),this.isMini=i.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var e=h.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",e,this.onCancelClick),this.unbind(".play-icon",e,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      `.concat(ot(this,"MINI_DRAG",this.playerConfig.isHideTips),`
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),n}(Q),ui={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},vn=["videoClick","videoDbClick"],mn=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"onMouseMove",function(s){var l=b(t),u=l.player,c=l.playerConfig;u.isActive||(u.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&u.media.focus())}),_(b(t),"onMouseEnter",function(s){var l=b(t),u=l.playerConfig,c=l.player;!u.closeFocusVideoFocus&&c.media.focus(),u.closeDelayBlur?c.focus({autoHide:!1}):c.focus()}),_(b(t),"onMouseLeave",function(s){var l=t.playerConfig,u=l.closePlayerBlur,c=l.leavePlayerTime,f=l.closeDelayBlur;!u&&!f&&(c?t.player.focus({autoHide:!0,delay:c}):t.player.blur())}),_(b(t),"onVideoClick",function(s){var l=b(t),u=l.player,c=l.playerConfig;s.target&&c.closeVideoClick||(s.target===u.root||s.target===u.media||s.target===u.innerContainer||s.target===u.media.__canvas)&&(s.preventDefault(),c.closeVideoStopPropagation||s.stopPropagation(),t._clickCount++,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),t.clickTimer=setTimeout(function(){t._clickCount&&(t._clickCount--,We(b(t),vn[0],function(f,d){t.switchPlayPause(d.e)},{e:s,paused:u.paused}),clearTimeout(t.clickTimer),t.clickTimer=null)},300))}),_(b(t),"onVideoDblClick",function(s){var l=b(t),u=l.player,c=l.playerConfig;if(!(c.closeVideoDblclick||!s.target||s.target!==u.media&&s.target!==u.media.__canvas)){if(!c.closeVideoClick&&t._clickCount<2){t._clickCount=0;return}t._clickCount=0,t.clickTimer&&(clearTimeout(t.clickTimer),t.clickTimer=null),s.preventDefault(),s.stopPropagation(),We(b(t),vn[1],function(f,d){t.emitUserAction(d.e,"switch_fullscreen",{props:"fullscreen",from:u.fullscreen,to:!u.fullscreen}),u.fullscreen?u.exitFullscreen():u.getFullscreen()},{e:s,fullscreen:u.fullscreen})}}),t}return R(n,[{key:"afterCreate",value:function(){var e=this;this._clickCount=0,vn.map(function(a){e.__hooks[a]=null});var i=this.playerConfig.isMobileSimulateMode;i==="mobile"||$.device==="mobile"&&!$.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var e=this,i=this.player,a=i.media,s=i.root,l=this.playerConfig.enableContextmenu;s&&s.addEventListener("click",this.onVideoClick,!1),s&&s.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(ui).map(function(u){s.addEventListener(u,e[ui[u]],!1)}),!l&&a&&a.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(e){var i=this.player;this.emitUserAction(e,"switch_play_pause",{props:"paused",from:i.paused,to:!i.paused}),i.ended?i.duration!==1/0&&i.duration>0&&i.replay():i.paused?i.play():i.pause()}},{key:"onContextmenu",value:function(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():(e.returnValue=!1,e.cancelBubble=!0)}},{key:"destroy",value:function(){var e=this,i=this.player,a=i.video,s=i.root;this.clickTimer&&clearTimeout(this.clickTimer),s.removeEventListener("click",this.onVideoClick,!1),s.removeEventListener("dblclick",this.onVideoDblClick,!1),a.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(ui).map(function(l){s.removeEventListener(l,e[ui[l]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),n}(rt),Ze={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},Fh={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},Bh={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Xr(r){return r&&r.length>0?r[r.length-1]:null}function Hh(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var Uh=function(){function r(o){var n=this,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};O(this,r),_(this,"onTouchStart",function(e){var i=n._pos,a=n.root,s=Xr(e.touches);i.x=s?parseInt(s.pageX,10):e.pageX,i.y=s?parseInt(s.pageX,10):e.pageX,i.start=!0,n.__setPress(e),a.addEventListener(n.events.end,n.onTouchEnd),a.addEventListener(n.events.cancel,n.onTouchCancel),a.addEventListener(n.events.move,n.onTouchMove),n.trigger(Ze.TOUCH_START,e)}),_(this,"onTouchCancel",function(e){n.onTouchEnd(e)}),_(this,"onTouchEnd",function(e){var i=n._pos,a=n.root;n.__clearPress(),a.removeEventListener(n.events.cancel,n.onTouchCancel),a.removeEventListener(n.events.end,n.onTouchEnd),a.removeEventListener(n.events.move,n.onTouchMove),e.moving=i.moving,e.press=i.press,i.press&&n.trigger(Ze.PRESS_END,e),n.trigger(Ze.TOUCH_END,e),!i.press&&!i.moving&&n.__setDb(e),i.press=!1,i.start=!1,i.moving=!1}),_(this,"onTouchMove",function(e){var i=n._pos,a=n.config,s=Xr(e.touches),l=s?parseInt(s.pageX,10):e.pageX,u=s?parseInt(s.pageY,10):e.pageX,c=l-i.x,f=u-i.y;Math.abs(f)<a.miniStep&&Math.abs(c)<a.miniStep||(n.__clearPress(),i.press&&n.trigger(Ze.PRESS_END,e),i.press=!1,i.moving=!0,n.trigger(Ze.TOUCH_MOVE,e))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config=Hh(),Object.keys(t).map(function(e){n.config[e]=t[e]}),this.root=o,this.events=t.eventType==="mouse"?Bh:Fh,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return R(r,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(n){var t=this,e=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){t.trigger(Ze.PRESS,n),t._pos.press=!0,t.__clearPress()},e.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(n){var t=this,e=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(Ze.DOUBlE_CLICK,n);return}this.dbIntrvalId=setTimeout(function(){t.__clearDb(),!t._pos.start&&!t._pos.press&&!t._pos.moving&&t.trigger(Ze.CLICK,n)},e.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(n,t){this.__handlers[n]||(this.__handlers[n]=[]),this.__handlers[n].push(t)}},{key:"off",value:function(n,t){if(this.__handlers[n]){for(var e=this.__handlers[n],i=-1,a=0;a<e.length;a++)if(e[a]===t){i=a;break}i>=0&&this.__handlers[n].splice(i,1)}}},{key:"trigger",value:function(n,t){this.__handlers[n]&&this.__handlers[n].map(function(e){try{e(t)}catch(i){console.error("trigger>>:".concat(n),i)}})}},{key:"destroy",value:function(){var n=this,t={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(t).forEach(function(e){n.root.removeEventListener(e,n[t[e]])})}}]),r}();function jh(){return new DOMParser().parseFromString(`<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink">
  <path opacity="0.54"
    d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z"
    fill="white" />
  <path transform="translate(5 0)" d="M7.5 3.63397C8.16667 4.01887 8.16667 4.98113 7.5 5.36603L1.5 8.83013C0.833334 9.21503 0 8.7339 0 7.9641L0 1.0359C0 0.266098 0.833333 -0.215027 1.5 0.169873L7.5 3.63397Z" fill="white"/>
</svg>`,"image/svg+xml").firstChild}var wt={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},yn=["videoClick","videoDbClick"],Vh=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),_(b(e),"onTouchStart",function(i){var a=b(e),s=a.player,l=a.config,u=a.pos,c=a.playerConfig,f=e.getTouche(i);if(f&&!l.disableGesture&&e.duration>0&&!s.ended){u.isStart=!0,h.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),e.find(".xg-dur").innerHTML=h.format(e.duration);var d=e.root.getBoundingClientRect();s.rotateDeg===90?(u.top=d.left,u.left=d.top,u.width=d.height,u.height=d.width):(u.top=d.top,u.left=d.left,u.width=d.width,u.height=d.height);var g=parseInt(f.pageX-u.left,10),p=parseInt(f.pageY-u.top,10);u.x=s.rotateDeg===90?p:g,u.y=s.rotateDeg===90?g:p,u.scopeL=l.scopeL*u.width,u.scopeR=(1-l.scopeR)*u.width,u.scopeM1=u.width*(1-l.scopeM)/2,u.scopeM2=u.width-u.scopeM1}}),_(b(e),"onTouchMove",function(i){var a=e.getTouche(i),s=b(e),l=s.pos,u=s.config,c=s.player;if(!(!a||u.disableGesture||!e.duration||!l.isStart)){var f=u.miniMoveStep,d=u.hideControlsActive,g=parseInt(a.pageX-l.left,10),p=parseInt(a.pageY-l.top,10),v=c.rotateDeg===90?p:g,y=c.rotateDeg===90?g:p;if(Math.abs(v-l.x)>f||Math.abs(y-l.y)>f){var T=v-l.x,k=y-l.y,C=l.scope;if(C===-1&&(C=e.checkScope(v,y,T,k,l),C===0&&(d?c.blur():c.focus({autoHide:!1}),!l.time&&(l.time=parseInt(c.currentTime*1e3,10)+e.timeOffset*1e3)),l.scope=C),C===-1||C>0&&!u.gestureY||C===0&&!u.gestureX)return;i.cancelable&&i.preventDefault(),e.executeMove(T,k,C,l.width,l.height),l.x=v,l.y=y}}}),_(b(e),"onTouchEnd",function(i){var a=b(e),s=a.player,l=a.pos,u=a.playerConfig;if(l.isStart){l.scope>-1&&i.cancelable&&i.preventDefault();var c=e.config,f=c.disableGesture,d=c.gestureX;!f&&d?(e.endLastMove(l.scope),setTimeout(function(){s.getPlugin("progress")&&s.getPlugin("progress").resetSeekState()},10)):l.time=0,l.scope=-1,e.resetPos(),h.checkIsFunction(u.enableSwipeHandler)&&u.enableSwipeHandler(),e.changeAction(wt.AUTO)}}),_(b(e),"onRootTouchMove",function(i){e.config.disableGesture||!e.config.gestureX||e.checkIsRootTarget(i)&&(i.stopPropagation(),e.pos.isStart?e.onTouchMove(i):e.onTouchStart(i))}),_(b(e),"onRootTouchEnd",function(i){e.pos.isStart&&e.checkIsRootTarget(i)&&(i.stopPropagation(),e.onTouchEnd(i))}),e.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},e.timer=null,e}return R(n,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:jh,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var e=this;yn.map(function(f){e.__hooks[f]=null});var i=this.playerConfig,a=this.config,s=this.player;i.closeVideoDblclick===!0&&(a.closedbClick=!0),this.resetPos(),h.isUndefined(i.disableGesture)||(a.disableGesture=!!i.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=h.createDom("xg-mask","",{},"xgmask"),s.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var l=this.domEventType==="mouse"?"mouse":"touch";this.touch=new Uh(this.root,{eventType:l,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(f){f.preventDefault()}),s.root.addEventListener("touchmove",this.onRootTouchMove,!0),s.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(at,function(){var f=e.player,d=e.config;f.duration*1e3<d.moveDuration&&(d.moveDuration=f.duration*1e3)}),this.on([Ge,vt],function(){var f=e.pos,d=f.time,g=f.isStart;!g&&d>0&&(e.pos.time=0)});var u={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(u).map(function(f){e.touch.on(f,function(d){e[u[f]](d)})}),!a.disableActive){var c=s.plugins.progress;c&&(c.addCallBack("dragmove",function(f){e.activeSeekNote(f.currentTime,f.forward)}),c.addCallBack("dragend",function(){e.changeAction(wt.AUTO)}))}}},{key:"registerThumbnail",value:function(){var e=this.player,i=e.plugins.thumbnail;if(i&&i.usable){this.thumbnail=i.createThumbnail(null,"mobile-thumbnail");var a=this.find(".time-preview");a.insertBefore(this.thumbnail,a.children[0])}}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,a=i.playedColor,s=i.progressColor;a&&(this.find(".xg-curbar").style.backgroundColor=a,this.find(".xg-cur").style.color=a),s&&(this.find(".xg-bar").style.backgroundColor=s,this.find(".time-preview").style.color=s),this.config.disableTimeProgress&&h.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var e=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(i){e.pos[i]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(e){var i=this.player,a=this.root;a.setAttribute("data-xg-action",e);var s=i.plugins.start;s&&s.recover()}},{key:"getTouche",value:function(e){var i=this.player.rotateDeg,a=e.touches&&e.touches.length>0?e.touches[e.touches.length-1]:e;return i===0?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.pageX,pageY:a.pageY}}},{key:"checkScope",value:function(e,i,a,s,l){var u=l.width,c=-1;if(e<0||e>u)return c;var f=Math.abs(s===0?a:a/s);return Math.abs(a)>0&&f>=1.73&&e>l.scopeM1&&e<l.scopeM2?c=0:(Math.abs(a)===0||f<=.57)&&(c=e<l.scopeL?1:e>l.scopeR?2:3),c}},{key:"executeMove",value:function(e,i,a,s,l){switch(a){case 0:this.updateTime(e/s*this.config.scopeM);break;case 1:this.updateBrightness(i/l);break;case 2:$.os.isIos||this.updateVolume(i/l);break}}},{key:"endLastMove",value:function(e){var i=this,a=this.pos,s=this.player,l=this.config,u=(a.time-this.timeOffset)/1e3;switch(e){case 0:s.seek(Number(u).toFixed(1)),l.hideControlsEnd?s.blur():s.focus(),this.timer=setTimeout(function(){i.pos.time=0},500);break}this.changeAction(wt.AUTO)}},{key:"checkIsRootTarget",value:function(e){var i=this.player.plugins||{};return i.progress&&i.progress.root.contains(e.target)?!1:i.start&&i.start.root.contains(e.target)||i.controls&&i.controls.root.contains(e.target)}},{key:"sendUseAction",value:function(e){var i=this.player.paused;this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i,to:!i})}},{key:"clickHandler",value:function(e){var i=this.player,a=this.config,s=this.playerConfig;if(i.state<q.RUNNING){s.closeVideoClick||(this.sendUseAction(h.createEvent("click")),i.play());return}!a.closedbClick||s.closeVideoClick?i.isActive?i.blur():i.focus():s.closeVideoClick||((i.isActive||a.focusVideoClick)&&(this.sendUseAction(h.createEvent("click")),this.switchPlayPause()),i.focus())}},{key:"dbClickHandler",value:function(e){var i=this.config,a=this.player;!i.closedbClick&&a.state>=q.RUNNING&&(this.sendUseAction(h.createEvent("dblclick")),this.switchPlayPause())}},{key:"onClick",value:function(e){var i=this,a=this.player;We(this,yn[0],function(s,l){i.clickHandler(l.e)},{e,paused:a.paused})}},{key:"onDbClick",value:function(e){var i=this,a=this.player;We(this,yn[1],function(s,l){i.dbClickHandler(l.e)},{e,paused:a.paused})}},{key:"onPress",value:function(e){var i=this.pos,a=this.config,s=this.player;a.disablePress||(i.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{prop:"playbackRate",from:s.playbackRate,to:a.pressRate}),s.playbackRate=a.pressRate,this.changeAction(wt.PLAYBACK))}},{key:"onPressEnd",value:function(e){var i=this.pos,a=this.config,s=this.player;a.disablePress||(this.emitUserAction("pressend","change_rate",{prop:"playbackRate",from:s.playbackRate,to:i.rate}),s.playbackRate=i.rate,i.rate=1,this.changeAction(wt.AUTO))}},{key:"updateTime",value:function(e){var i=this.player,a=this.config,s=this.player.duration;e=Number(e.toFixed(4));var l=parseInt(e*a.moveDuration,10)+this.timeOffset;l+=this.pos.time,l=l<0?0:l>s*1e3?s*1e3-200:l,i.getPlugin("time")&&i.getPlugin("time").updateTime(l/1e3),i.getPlugin("progress")&&i.getPlugin("progress").updatePercent(l/1e3/this.duration,!0),this.activeSeekNote(l/1e3,e>0),a.isTouchingSeek&&i.seek(Number((l-this.timeOffset)/1e3).toFixed(1)),this.pos.time=l}},{key:"updateVolume",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.player,a=this.pos;if(e=parseInt(e*100,10),a.volume+=e,!(Math.abs(a.volume)<10)){var s=parseInt(i.volume*10,10)-parseInt(a.volume/10,10);s=s>10?10:s<1?0:s,i.volume=s/10,a.volume=0}}},{key:"updateBrightness",value:function(e){this.player.rotateDeg&&(e=-e);var i=this.pos,a=this.config,s=this.xgMask,l=i.light+.8*e;l=l>a.maxDarkness?a.maxDarkness:l<0?0:l,s&&(s.style.backgroundColor="rgba(0,0,0,".concat(l,")")),i.light=l}},{key:"activeSeekNote",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.player,s=this.config,l=!(this.duration!==1/0&&this.duration>0);if(!(!e||typeof e!="number"||l||s.disableActive)){e<0?e=0:e>a.duration&&(e=a.duration-.2),this.changeAction(wt.SEEKING);var u=a.plugins.start;u&&u.focusHide(),this.find(".xg-dur").innerHTML=h.format(this.duration),this.find(".xg-cur").innerHTML=h.format(e),this.find(".xg-curbar").style.width="".concat(e/this.duration*100,"%"),i?h.removeClass(this.find(".xg-seek-show"),"xg-back"):h.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(e)}}},{key:"updateThumbnails",value:function(e){var i=this.player,a=i.plugins.thumbnail;a&&a.usable&&this.thumbnail&&a.update(this.thumbnail,e,160,90)}},{key:"switchPlayPause",value:function(){var e=this.player;if(e.state<q.ATTACHED)return!1;e.ended||(e.paused?e.play():e.pause())}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var e=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,e.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,e.root.removeEventListener("touchmove",this.onRootTouchMove,!0),e.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var e=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(e,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{index:0,disableGesture:!1,gestureX:!0,gestureY:!0,gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),n}(Q);function Wh(r){r.preventDefault(),r.returnValue=!1}function qr(r){var o=r.tagName;return!!(o==="INPUT"||o==="TEXTAREA"||r.isContentEditable)}var Jr=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"onBodyKeyDown",function(s){if(t.player){var l=s||window.event,u=l.keyCode,c=b(t),f=c._keyState,d=c.player,g=t.config,p=g.disable,v=g.disableBodyTrigger,y=g.isIgnoreUserActive;if(p||v||!(d.isUserActive||y)||qr(l.target)||!t.checkIsVisible()||l.metaKey||l.altKey||l.ctrlKey){f.isBodyKeyDown=!1;return}!s.repeat&&!f.isKeyDown&&((l.target===document.body||t.config.isGlobalTrigger&&!qr(l.target))&&t.checkCode(u,!0)&&(f.isBodyKeyDown=!0),document.addEventListener("keyup",t.onBodyKeyUp)),f.isBodyKeyDown&&t.handleKeyDown(l)}}),_(b(t),"onBodyKeyUp",function(s){t.player&&(document.removeEventListener("keyup",t.onBodyKeyUp),t.handleKeyUp(s))}),_(b(t),"onKeydown",function(s){if(t.player){var l=s||window.event,u=b(t),c=u._keyState;if(!l.repeat){if(t.config.disable||t.config.disableRootTrigger||l.metaKey||l.altKey||l.ctrlKey)return;l&&(l.keyCode===37||t.checkCode(l.keyCode))&&(l.target===t.player.root||l.target===t.player.video||l.target===t.player.controls.el)&&(c.isKeyDown=!0),t.player.root.addEventListener("keyup",t.onKeyup)}c.isKeyDown&&t.handleKeyDown(l)}}),_(b(t),"onKeyup",function(s){t.player&&(t.player.root.removeEventListener("keyup",t.onKeyup),t.handleKeyUp(s))}),t}return R(n,[{key:"mergekeyCodeMap",value:function(){var e=this,i=this.config.keyCodeMap;i&&Object.keys(i).map(function(a){e.keyCodeMap[a]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(s){i[a][s]&&(e.keyCodeMap[a][s]=i[a][s])}):e.keyCodeMap[a]=i[a]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var e=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!e||typeof e!="number"||(this.seekStep=e),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var e=this.player.root.getBoundingClientRect(),i=e.height,a=e.top,s=e.bottom,l=window.innerHeight;return!(a<0&&a<0-i*.9||s>0&&s-l>i*.9)}},{key:"checkCode",value:function(e,i){var a=this,s=!1;return Object.keys(this.keyCodeMap).map(function(l){a.keyCodeMap[l]&&e===a.keyCodeMap[l].keyCode&&!a.keyCodeMap[l].disable&&(s=!i||i&&!a.keyCodeMap[l].noBodyTarget)}),s}},{key:"downVolume",value:function(e){var i=this.player;if(!(i.volume<=0)){var a=parseFloat((i.volume-.1).toFixed(1)),s={volume:{from:i.volume,to:a}};this.emitUserAction(e,"change_volume",{props:s}),a>=0?i.volume=a:i.volume=0}}},{key:"upVolume",value:function(e){var i=this.player;if(!(i.volume>=1)){var a=parseFloat((i.volume+.1).toFixed(1)),s={volume:{from:i.volume,to:a}};this.emitUserAction(e,"change_volume",{props:s}),a<=1?i.volume=a:i.volume=1}}},{key:"seek",value:function(e){var i=this.player,a=i.currentTime,s=i.offsetCurrentTime,l=i.duration,u=i.offsetDuration,c=i.timeSegments,f=s>-1?s:a,d=u||l,g=e.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;f+g<=d?f=f+g:f=d;var p=h.getCurrentTimeByOffset(f,c),v={currentTime:{from:a,to:p}};this.emitUserAction(e,"seek",{props:v}),this.player.currentTime=p}},{key:"seekBack",value:function(e){var i=this.player,a=i.currentTime,s=i.offsetCurrentTime,l=i.timeSegments,u=e.repeat?parseInt(this.seekStep/2,10):this.seekStep,c=s>-1?s:a,f=c-u;f<0&&(f=0),f=h.getCurrentTimeByOffset(f,l);var d={currentTime:{from:a,to:f}};this.emitUserAction(e,"seek",{props:d}),this.player.currentTime=f}},{key:"changePlaybackRate",value:function(e){var i=this._keyState,a=this.config,s=this.player;i.playbackRate===0&&(i.playbackRate=s.playbackRate,s.playbackRate=a.playbackRate)}},{key:"playPause",value:function(e){var i=this.player;i&&(this.emitUserAction(e,"switch_play_pause"),i.paused?i.play():i.pause())}},{key:"exitFullscreen",value:function(e){var i=this.player,a=i.fullscreen,s=i.cssfullscreen;a&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:a,to:!a}),i.exitFullscreen()),s&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:s,to:!s}),i.exitCssFullscreen())}},{key:"handleKeyDown",value:function(e){var i=this._keyState;if(e.repeat){i.isPress=!0;var a=Date.now();if(a-i.tt<200)return;i.tt=a}this.handleKeyCode(e.keyCode,e,i.isPress)}},{key:"handleKeyUp",value:function(e){var i=this._keyState;i.playbackRate>0&&(this.player.playbackRate=i.playbackRate,i.playbackRate=0),i.isKeyDown=!1,i.isPress=!1,i.tt=0}},{key:"handleKeyCode",value:function(e,i,a){for(var s=Object.keys(this.keyCodeMap),l=0;l<s.length;l++){var u=this.keyCodeMap[s[l]],c=u.action,f=u.keyCode,d=u.disable,g=u.pressAction,p=u.disablePress;if(f===e){if(!d&&!(a&&p)){var v=a&&g||c;typeof v=="function"?c(i,this.player,a):typeof v=="string"&&typeof this[v]=="function"&&this[v](i,this.player,a),this.emit(Qa,se({key:s[l],target:i.target,isPress:a},this.keyCodeMap[s[l]]))}Wh(i);break}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!0,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!0}}}]),n}(rt);function Gh(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110">
  <path d="M100,50A50,50,0,1,1,50,0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"></path>
</svg>
`,"image/svg+xml").firstChild}var zh=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"registerIcons",value:function(){return{loadingIcon:Gh}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:ie.ROOT}}}]),n}(Q),$h=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],Kh=function(){function r(o){O(this,r),this.fragments=o.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=o.actionCallback,this.fragConfig={fragFocusClass:o.fragFocusClass||"inner-focus-point",fragAutoFocus:!!o.fragAutoFocus,fragClass:o.fragClass||""},this.style=o.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return R(r,[{key:"updateDuration",value:function(n){var t=this;this.duration=n;var e=0,i=this.fragments;this.fragments=i.map(function(a){return a.start=parseInt(e,10),a.end=parseInt(e+a.percent*t.duration,10),a.duration=parseInt(a.percent*t.duration,10),e+=a.percent*t.duration,a})}},{key:"updateProgress",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},e=this.progressList,i=this.fragments;if(!(e.length<1)){var a=t.newIndex,s=t.curIndex,l=t.millisecond;a!==s&&e.map(function(f,d){d<a?f[n].style.width="100%":d>a&&(f[n].style.width=0)});var u=i[a],c=l===0?0:(l-u.start)/u.duration;e[a][n].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(n){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!n){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var t={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(t),this.focusIndex=-1}return}var e=this.findIndex(n.currentTime*1e3,this.focusIndex);if(e>=0&&e!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(e);var i={index:e,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=e,this._callBack&&this._callBack(i)}}}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},t=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(t*1e3,10)!==this.duration){if(!t&&t!==0)return;this.updateDuration(parseInt(t*1e3,10))}var e=this.playedIndex,i=this.cachedIndex;if(h.typeOf(n.played)!=="Undefined"){var a=this.findIndex(n.played*1e3,e);if(a<0)return;this.updateProgress("played",{newIndex:a,curIndex:e,millisecond:parseInt(n.played*1e3,10)}),this.playedIndex=a}if(h.typeOf(n.cached)!=="Undefined"){var s=this.findIndex(n.cached*1e3,i);if(s<0)return;this.updateProgress("cached",{newIndex:s,curIndex:i,millisecond:parseInt(n.cached*1e3,10)}),this.cachedIndex=s}}},{key:"findIndex",value:function(n,t){var e=this.fragments;if(!e||e.length===0)return-1;if(e.length===1)return 0;if(t>-1&&t<e.length&&n>e[t].start&&n<e[t].end)return t;if(n>e[e.length-1].start)return e.length-1;for(var i=0;i<e.length;i++)if(n>e[i].start&&n<=e[i].end){t=i;break}return t}},{key:"findHightLight",value:function(){for(var n=this.root.children,t=0;t<n.length;t++)if(h.hasClass(n[t],this.fragConfig.fragFocusClass))return{dom:n[t],pos:n[t].getBoundingClientRect()}}},{key:"findFragment",value:function(n){var t=this.root.children;return n<0||n>=t.length?null:{dom:t[n],pos:t[n].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var n=this.root.children,t=0;t<n.length;t++)h.removeClass(n[t],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(n){var t=this.root.children;if(n<t.length)return h.addClass(t[n],this.fragConfig.fragFocusClass),{dom:t[n],pos:t[n].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(n){var t=this;if(Object.keys(this.fragConfig).forEach(function(i){n[i]!==void 0&&(t.fragConfig[i]=n[i])}),n.fragments){if(this.fragments=n.fragments.length===0?[{percent:1}]:n.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var e=this.root.children;e.length>0;)this.root.removeChild(e[0]);this.render()}}},{key:"render",value:function(){var n=this,t=this.style.progressColor;if(this.root||(this.root=h.createDom("xg-inners","",{},"progress-list")),this.fragments){var e=this.fragConfig,i=e.fragClass,a=e.fragFocusClass;this.progressList=this.fragments.map(function(s){var l=h.createDom("xg-inner","",{style:t?"background:".concat(t,"; flex: ").concat(s.percent):"flex: ".concat(s.percent)},"".concat(s.isFocus?a:""," xgplayer-progress-inner ").concat(i));return n.root.appendChild(l),$h.forEach(function(u){l.appendChild(h.createDom(u.tag,"",{style:u.styleKey?"background: ".concat(n.style[u.styleKey],"; width:0;"):"width:0;"},u.className))}),{cached:l.children[0],played:l.children[1]}})}return this.root}}]),r}(),Zr={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},Yh=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),_(b(e),"onMoveOnly",function(i,a){var s=b(e),l=s.pos,u=s.config,c=s.player,f=a;if(i){h.event(i);var d=h.getEventPos(i,c.zoom),g=c.rotateDeg===90?d.clientY:d.clientX;if(l.moving&&Math.abs(l.x-g)<u.miniMoveStep)return;l.moving=!0,l.x=g,f=e.computeTime(i,g)}e.triggerCallbacks("dragmove",f,i),e._updateInnerFocus(f)}),_(b(e),"onBodyClick",function(i){e.pos.isLocked&&(e.pos.isLocked=!1,i.preventDefault(),i.stopPropagation())}),_(b(e),"_mouseDownHandler",function(i,a){e._state.time=a.currentTime,e.updateWidth(a.currentTime,a.seekTime,a.percent,0),e._updateInnerFocus(a)}),_(b(e),"_mouseUpHandler",function(i,a){var s=b(e),l=s.pos;l.moving&&e.updateWidth(a.currentTime,a.seekTime,a.percent,2)}),_(b(e),"_mouseMoveHandler",function(i,a){var s=b(e),l=s._state,u=s.pos,c=s.config,f=s.player;l.time<a.currentTime?a.forward=!0:a.forward=!1,l.time=a.currentTime,u.isDown&&!u.moving&&(u.moving=!0,c.isPauseMoving&&f.pause(),e.triggerCallbacks("dragstart",a,i),e.emitUserAction("drag","dragstart",a)),e.updateWidth(a.currentTime,a.seekTime,a.percent,1),e.triggerCallbacks("dragmove",a,i),e._updateInnerFocus(a)}),_(b(e),"onMouseDown",function(i){var a=b(e),s=a._state,l=a.player,u=a.pos,c=a.config,f=a.playerConfig,d=h.getEventPos(i,l.zoom),g=l.rotateDeg===90?d.clientY:d.clientX;if(!(l.isMini||c.closeMoveSeek||!f.allowSeekAfterEnded&&l.ended)){if(!l.duration&&!l.isPlaying){l.play();return}i.stopPropagation(),e.focus(),h.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),h.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),h.event(i),u.x=g,u.isDown=!0,u.moving=!1,s.prePlayTime=l.currentTime,l.focus({autoHide:!1}),e.isProgressMoving=!0,h.addClass(e.progressBtn,"active");var p=e.computeTime(i,g);p.prePlayTime=s.prePlayTime,e._mouseDownHandlerHook(i,p);var v=i.type;return v==="touchstart"?(e.root.addEventListener("touchmove",e.onMouseMove),e.root.addEventListener("touchend",e.onMouseUp)):(e.unbind("mousemove",e.onMoveOnly),document.addEventListener("mousemove",e.onMouseMove,!1),document.addEventListener("mouseup",e.onMouseUp,!1)),!0}}),_(b(e),"onMouseUp",function(i){var a=b(e),s=a.player,l=a.config,u=a.pos,c=a.playerConfig,f=a._state;i.stopPropagation(),i.preventDefault(),h.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),h.checkIsFunction(l.onMoveEnd)&&l.onMoveEnd(),h.event(i),h.removeClass(e.progressBtn,"active");var d=e.computeTime(i,u.x);d.prePlayTime=f.prePlayTime,u.moving?(e.triggerCallbacks("dragend",d,i),e.emitUserAction("drag","dragend",d)):(e.triggerCallbacks("click",d,i),e.emitUserAction("click","click",d)),e._mouseUpHandlerHook(i,d),u.moving=!1,u.isDown=!1,u.x=0,u.y=0,u.isLocked=!0,f.prePlayTime=0,f.time=0;var g=i.type;g==="touchend"?(e.root.removeEventListener("touchmove",e.onMouseMove),e.root.removeEventListener("touchend",e.onMouseUp),e.blur()):(document.removeEventListener("mousemove",e.onMouseMove,!1),document.removeEventListener("mouseup",e.onMouseUp,!1),u.isEnter?c.isMobileSimulateMode!=="mobile"&&e.bind("mousemove",e.onMoveOnly):e.onMouseLeave(i)),h.setTimeout(b(e),function(){e.resetSeekState()},10),s.focus()}),_(b(e),"onMouseMove",function(i){var a=b(e),s=a._state,l=a.pos,u=a.player,c=a.config;h.checkTouchSupport()&&i.preventDefault(),h.event(i);var f=h.getEventPos(i,u.zoom),d=u.rotateDeg===90?f.clientY:f.clientX,g=Math.abs(l.x-d);if(!(l.moving&&g<c.miniMoveStep||!l.moving&&g<c.miniStartStep)){l.x=d;var p=e.computeTime(i,d);p.prePlayTime=s.prePlayTime,e._mouseMoveHandlerHook(i,p)}}),_(b(e),"onMouseOut",function(i){e.triggerCallbacks("mouseout",null,i)}),_(b(e),"onMouseOver",function(i){e.triggerCallbacks("mouseover",null,i)}),_(b(e),"onMouseEnter",function(i){var a=b(e),s=a.player,l=a.pos;if(!(l.isDown||l.isEnter||s.isMini||!s.config.allowSeekAfterEnded&&s.ended)){l.isEnter=!0,e.bind("mousemove",e.onMoveOnly),e.bind("mouseleave",e.onMouseLeave),h.event(i);var u=h.getEventPos(i,s.zoom),c=s.rotateDeg===90?u.clientY:u.clientX,f=e.computeTime(i,c);e.triggerCallbacks("mouseenter",f,i),e.focus()}}),_(b(e),"onMouseLeave",function(i){e.triggerCallbacks("mouseleave",null,i),e.unlock(),e._updateInnerFocus(null)}),_(b(e),"onVideoResize",function(){var i=e.pos,a=i.x,s=i.isDown,l=i.isEnter;if(l&&!s){var u=e.computeTime(null,a);e.onMoveOnly(null,u)}}),e.useable=!1,e.isProgressMoving=!1,e.__dragCallBacks=[],e._state={now:-1,direc:0,time:0,prePlayTime:-1},e._disableBlur=!1,e}return R(n,[{key:"offsetDuration",get:function(){return this.playerConfig.customDuration||this.player.offsetDuration||this.player.duration}},{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"currentTime",get:function(){var e=this.player,i=e.offsetCurrentTime,a=e.currentTime;return i>=0?i:a+this.timeOffset}},{key:"changeState",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=e}},{key:"show",value:function(e){this.root&&(this.root.style.display="flex")}},{key:"_initInner",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!i||i.length===0)&&(i=[{percent:1}]);var s=se(se({fragments:i},a),{},{actionCallback:function(u){e.emitUserAction("fragment_focus","fragment_focus",u)}});this.innerList?this.innerList.reset(s):(this.innerList=new Kh(s),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(l){e[l]=e.innerList[l].bind(e.innerList)}))}},{key:"_updateInnerFocus",value:function(e){this.innerList&&this.innerList.updateFocus(e)}},{key:"afterCreate",value:function(){var e=this;if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1,isLocked:!1},this.outer=this.find("xg-outer");var i=this.config,a=i.fragFocusClass,s=i.fragAutoFocus,l=i.fragClass;this._initInner(this.config.fragments,{fragFocusClass:a,fragAutoFocus:s,fragClass:l,style:this.playerConfig.commonStyle||{}}),$.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(at,function(){e.onMouseLeave()}),this.on(Ie,function(){e.onTimeupdate()}),this.on($e,function(){e.onTimeupdate(),e.onCacheUpdate()}),this.on(Ya,function(){e.onCacheUpdate()}),this.on(vt,function(){e.onCacheUpdate(!0),e.onTimeupdate(!0),e._state.now=0}),this.on(Bt,function(){e.onReset()}),this.on(nt,function(){e.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(e){var i=this,a=null;Object.keys(e).forEach(function(s){i.config[s]=e[s],s==="fragments"&&(a=e[s])}),a&&this._initInner(a,e)}},{key:"initCustomStyle",value:function(){var e=this.playerConfig||{},i=e.commonStyle,a=i.sliderBtnStyle,s=this.progressBtn;a&&(typeof a=="string"?s.style.boxShadow=a:me(a)==="object"&&Object.keys(a).map(function(l){s.style[l]=a[l]}))}},{key:"triggerCallbacks",value:function(e,i,a){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(s){if(s&&s.handler&&s.type===e)try{s.handler(i,a)}catch(l){console.error("[XGPLAYER][triggerCallbacks] ".concat(s," error"),l)}})}},{key:"addCallBack",value:function(e,i){i&&typeof i=="function"&&this.__dragCallBacks.push({type:e,handler:i})}},{key:"removeCallBack",value:function(e,i){var a=this.__dragCallBacks,s=-1;a.map(function(l,u){l&&l.type===e&&l.handler===i&&(s=u)}),s>-1&&a.splice(s,1)}},{key:"unlock",value:function(){var e=this.player,i=this.pos;if(i.isEnter=!1,i.isLocked=!1,!e.isMini){if(this.unbind("mousemove",this.onMoveOnly),i.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var e=this.player,i=e.controls,a=e.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&(this.root.addEventListener("touchstart",this.onMouseDown),i&&(i.root&&i.root.addEventListener("touchmove",h.stopPropagation),i.center&&i.center.addEventListener("touchend",h.stopPropagation))),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),a.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut),this.player.root.addEventListener("click",this.onBodyClick,!0))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),h.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),h.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(e,i,a,s){var l=this.config,u=this.player;if(!(l.isCloseClickSeek&&s===0)){var c=i=i>=u.duration?u.duration-l.endedDiff:Number(i).toFixed(1);this.updatePercent(a),this.updateTime(e),!(s===1&&(!l.isDragingSeek||u.config.mediaType==="audio"))&&(this._state.now=c,this._state.direc=c>u.currentTime?0:1,u.seek(c))}}},{key:"computeTime",value:function(e,i){var a=this.player,s=this.root.getBoundingClientRect(),l=s.width,u=s.height,c=s.top,f=s.left,d,g,p=i;a.rotateDeg===90?(d=u,g=c):(d=l,g=f);var v=p-g;v=v>d?d:v<0?0:v;var y=v/d;y=y<0?0:y>1?1:y;var T=parseInt(y*this.offsetDuration*1e3,10)/1e3,k=h.getCurrentTimeByOffset(T,a.timeSegments);return{percent:y,currentTime:T,seekTime:k,offset:v,width:d,left:g,e}}},{key:"updateTime",value:function(e){var i=this.player,a=this.duration;e>a?e=a:e<0&&(e=0);var s=i.plugins.time;s&&s.updateTime(e)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var e=this.player.plugins.time;e&&e.resetActive()}},{key:"updatePercent",value:function(e,i){if(this.isProgressMoving=!0,!this.config.disable){e=e>1?1:e<0?0:e,this.progressBtn.style.left="".concat(e*100,"%"),this.innerList.update({played:e*this.offsetDuration},this.offsetDuration);var a=this.player.plugins.miniprogress;a&&a.update({played:e*this.offsetDuration},this.offsetDuration)}}},{key:"onTimeupdate",value:function(e){var i=this.player,a=this._state,s=this.offsetDuration;if(!(i.isSeeking&&i.media.seeking||this.isProgressMoving||!i.hasStart)){if(a.now>-1){var l=parseInt(a.now*1e3,10)-parseInt(i.currentTime*1e3,10);if(a.direc===0&&l>300||a.direc===1&&l>-300){a.now=-1;return}else a.now=-1}var u=this.currentTime;u=h.adjustTimeByDuration(u,s,e),this.innerList.update({played:u},s),this.progressBtn.style.left="".concat(u/s*100,"%");var c=this.player.plugins.miniprogress;c&&c.update({played:u},s)}}},{key:"onCacheUpdate",value:function(e){var i=this.player,a=this.duration;if(i){var s=i.bufferedPoint.end;s=h.adjustTimeByDuration(s,a,e),this.innerList.update({cached:s},a);var l=this.player.plugins.miniprogress;l&&l.update({cached:s},a)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0),this.progressBtn.style.left="0%";var e=this.player.plugins.miniprogress;e&&e.update({cached:0,played:0},0),this.progressBtn.style.left="0%"}},{key:"destroy",value:function(){var e=this.player,i=e.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var a=this.domEventType;(a==="touch"||a==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),i&&(i.root&&i.root.removeEventListener("touchmove",h.stopPropagation),i.center&&i.center.removeEventListener("touchend",h.stopPropagation))),(a==="mouse"||a==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),e.root.removeEventListener("click",this.onBodyClick,!0))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var e=this.player.controls?this.player.controls.config.mode:"",i=e==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(i,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:Zr.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return Zr}}]),n}(Q),mt=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"_onMouseenter",function(s){t.emit("icon_mouseenter",{pluginName:t.pluginName})}),_(b(t),"_onMouseLeave",function(s){t.emit("icon_mouseleave",{pluginName:t.pluginName})}),t}return R(n,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave)}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),n}(Q),Xh=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"afterCreate",value:function(){var e=this;z(W(n.prototype),"afterCreate",this).call(this);var i=this.player,a=this.config;a.disable||(this.initIcons(),this.btnClick=this.btnClick.bind(this),this.bind(["touchend","click"],this.btnClick),this.on([Ft,ei,Bt],function(){e.animate(i.paused)}),this.on(Ee,function(){e.animate(i.paused)}),this.animate(!0))}},{key:"registerIcons",value:function(){return{play:{icon:qn,class:"xg-icon-play"},pause:{icon:Jn,class:"xg-icon-pause"}}}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player;return this.emitUserAction(e,"switch_play_pause",{prop:"paused",from:i.paused,to:!i.paused}),i.ended?i.replay():i.paused?(i.play(),this.animate(!1)):(i.pause(),this.animate(!0)),!1}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.play),this.appendChild(".xgplayer-icon",e.pause)}},{key:"animate",value:function(e){if(this.player){var i=this.i18nKeys,a=this.find(".xg-tips");e?(this.setAttr("data-state","pause"),a&&this.changeLangTextKey(a,i.PLAY_TIPS)):(this.setAttr("data-state","play"),a&&this.changeLangTextKey(a,i.PAUSE_TIPS))}}},{key:"destroy",value:function(){z(W(n.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    `.concat(ot(this,"PLAY_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_LEFT,index:0,disable:!1}}}]),n}(mt);function qh(){return new DOMParser().parseFromString(`<svg width="32px" height="40px" viewBox="0 0 32 32" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
        <path d="M11.2374369,14 L17.6187184,7.61871843 C17.9604272,7.27700968 17.9604272,6.72299032 17.6187184,6.38128157 C17.2770097,6.03957281 16.7229903,6.03957281 16.3812816,6.38128157 L9.38128157,13.3812816 C9.03957281,13.7229903 9.03957281,14.2770097 9.38128157,14.6187184 L16.3812816,21.6187184 C16.7229903,21.9604272 17.2770097,21.9604272 17.6187184,21.6187184 C17.9604272,21.2770097 17.9604272,20.7229903 17.6187184,20.3812816 L11.2374369,14 L11.2374369,14 Z" fill="#FFFFFF"></path>
    </g>
</svg>`,"image/svg+xml").firstChild}var Jh=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"afterCreate",value:function(){var e=this;this.initIcons(),this.onClick=function(i){i.preventDefault(),i.stopPropagation(),e.config.onClick(i)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:qh,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(this.root,e.screenBack)}},{key:"show",value:function(){h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:ie.ROOT_TOP,index:0}}}]),n}(Q);function Zh(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M598 214h212v212h-84v-128h-128v-84zM726 726v-128h84v212h-212v-84h128zM214 426v-212h212v84h-128v128h-84zM298 598v128h128v84h-212v-212h84z"></path>
</svg>
`,"image/svg+xml").firstChild}function Qh(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40">
  <path fill="#fff" transform="scale(0.0320625 0.0320625)" d="M682 342h128v84h-212v-212h84v128zM598 810v-212h212v84h-128v128h-84zM342 342v-128h84v212h-212v-84h128zM214 682v-84h212v212h-84v-128h-128z"></path>
</svg>
`,"image/svg+xml").firstChild}var ed=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"_onOrientationChange",function(s){t.player.fullscreen&&t.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?t.player.setRotateDeg(0):t.player.setRotateDeg(90))}),t}return R(n,[{key:"afterCreate",value:function(){var e=this;z(W(n.prototype),"afterCreate",this).call(this);var i=this.config,a=this.playerConfig;if(!i.disable){i.target&&(this.playerConfig.fullscreenTarget=this.config.target);var s=h.getFullScreenEl();a.fullscreenTarget===s&&this.player.getFullscreen().catch(function(l){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreenChange",this.toggleFullScreen,{pre:function(u){var c=e.player.fullscreen;e.emitUserAction(u,"switch_fullscreen",{prop:"fullscreen",from:c,to:!c})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(Ve,function(l){var u=e.find(".xg-tips");u&&e.changeLangTextKey(u,l?e.i18nKeys.EXITFULLSCREEN_TIPS:e.i18nKeys.FULLSCREEN_TIPS),e.animate(l)}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:Jh,options:{config:{onClick:function(u){e.handleFullscreen(u)}}}})),$.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}}},{key:"registerIcons",value:function(){return{fullscreen:{icon:Zh,class:"xg-get-fullscreen"},exitFullscreen:{icon:Qh,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){z(W(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",$.device==="mobile"?"touchend":"click",this.handleFullscreen),$.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.fullscreen),this.appendChild(".xgplayer-icon",e.exitFullscreen)}},{key:"toggleFullScreen",value:function(e){e&&(e.preventDefault(),e.stopPropagation());var i=this.player,a=this.config,s=a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen();s?(i.fullscreen?i.exitCssFullscreen():i.getCssFullscreen(),this.animate(i.fullscreen)):a.rotateFullscreen?(i.fullscreen?i.exitRotateFullscreen():i.getRotateFullscreen(),this.animate(i.fullscreen)):a.switchCallback&&typeof a.switchCallback=="function"?a.switchCallback(i.fullscreen):i.fullscreen?i.exitFullscreen():i.getFullscreen().catch(function(l){})}},{key:"animate",value:function(e){e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(e?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"render",value:function(){if(!this.config.disable){var e="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    `.concat(ot(this,e,this.playerConfig.isHideTips),`
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),n}(mt),td=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),e.isActiving=!1,e}return R(n,[{key:"duration",get:function(){var e=this.player,i=e.offsetDuration,a=e.duration;return this.playerConfig.customDuration||i||a}},{key:"currentTime",get:function(){var e=this.player,i=e.offsetCurrentTime,a=e.currentTime;return i>=0?i:a}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var e=this,i=this.player.controls.config.mode;this.mode=i==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.root.style.display="none"),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on([at,$e,Ie],function(a){a.eventName==="durationchange"&&(e.isActiving=!1),e.onTimeUpdate()}),this.on(vt,function(){e.onTimeUpdate(!0)}),this.on(Bt,function(){e.onReset()}))}},{key:"show",value:function(e){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="block"),this.centerDurDom&&(this.centerDurDom.style.display="block");return}this.root.style.display="block"}},{key:"hide",value:function(){if(this.mode==="flex"){this.centerCurDom&&(this.centerCurDom.style.display="none"),this.centerDurDom&&(this.centerDurDom.style.display="none");return}this.root.style.display="none"}},{key:"onTimeUpdate",value:function(e){var i=this.player,a=this.config,s=this.duration;if(!(a.disable||this.isActiving||!i.hasStart)){var l=this.currentTime+this.timeOffset;l=h.adjustTimeByDuration(l,s,e),this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(h.format(l)),s!==1/0&&s>0&&(this.centerDurDom.innerHTML=h.format(s))):(this.timeDom.innerHTML=this.minWidthTime(h.format(l)),s!==1/0&&s>0&&(this.durationDom.innerHTML=h.format(s)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=this.minWidthTime(h.format(0)),this.centerDurDom.innerHTML=h.format(0)):(this.timeDom.innerHTML=this.minWidthTime(h.format(0)),this.durationDom.innerHTML=h.format(0))}},{key:"createCenterTime",value:function(){var e=this.player;if(!(!e.controls||!e.controls.center)){var i=e.controls.center;this.centerCurDom=h.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-left"),this.centerDurDom=h.createDom("xg-icon","00:00",{},"xgplayer-time xg-time-right"),i.children.length>0?i.insertBefore(this.centerCurDom,i.children[0]):i.appendChild(this.centerCurDom),i.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var e=this.config;if(this.duration===1/0||this.playerConfig.isLive?(h.hide(this.durationDom),h.hide(this.timeDom),h.hide(this.find(".time-separator")),h.show(this.find(".time-live-tag"))):h.hide(this.find(".time-live-tag")),e.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(e){e?(h.hide(this.durationDom),h.hide(this.timeDom),h.hide(this.find(".time-separator")),h.show(this.find(".time-live-tag"))):(h.hide(this.find(".time-live-tag")),h.show(this.find(".time-separator")),h.show(this.durationDom),h.show(this.timeDom))}},{key:"updateTime",value:function(e){if(this.isActiving=!0,!(!e&&e!==0||e>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=this.minWidthTime(h.format(e));return}this.timeDom.innerHTML=this.minWidthTime(h.format(e))}}},{key:"minWidthTime",value:function(e){return e.split(":").map(function(i){return'<span class="time-min-width">'.concat(i,"</span>")}).join(":")}},{key:"resetActive",value:function(){var e=this,i=this.player,a=function(){e.isActiving=!1};this.off($e,a),i.isSeeking&&i.media.seeking?this.once($e,a):this.isActiving=!1}},{key:"destroy",value:function(){var e=this.player.controls.center;this.centerCurDom&&e.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&e.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_LEFT,index:2,disable:!1}}}]),n}(Q),id=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"_onDurationChange",function(){t.updateSegments();var s=t.player,l=s.currentTime,u=s.timeSegments;if(t._checkIfEnabled(u)){var c=h.getIndexByTime(l,u),f=h.getOffsetCurrentTime(l,u,c);t.player.offsetCurrentTime=f,t.changeIndex(c,u)}}),_(b(t),"_onLoadedData",function(){var s=t.player.timeSegments;if(t._checkIfEnabled(s)){var l=h.getOffsetCurrentTime(0,s);t.player.offsetCurrentTime=l,t.changeIndex(0,s),t.curPos.start>0&&(t.player.currentTime=t.curPos.start)}}),_(b(t),"_onTimeupdate",function(){var s=t.player,l=s.currentTime,u=s.timeSegments;if(t._checkIfEnabled(u)){var c=u.length;t.lastCurrentTime=l;var f=h.getIndexByTime(l,u);f!==t.curIndex&&t.changeIndex(f,u);var d=h.getOffsetCurrentTime(l,u,f);if(t.player.offsetCurrentTime=d,!!t.curPos){var g=t.curPos,p=g.start,v=g.end;l<p?t.player.currentTime=p:l>v&&f>=c-1&&t.player.pause()}}}),_(b(t),"_onSeeking",function(){var s=t.player,l=s.currentTime,u=s.timeSegments;if(t._checkIfEnabled(u))if(l<u[0].start)t.player.currentTime=u[0].start;else if(l>u[u.length-1].end)t.player.currentTime=u[u.length-1].end;else{var c=h.getIndexByTime(l,u);if(c>=0){var f=t.getSeekTime(l,t.lastCurrentTime,c,u);f>=0&&(t.player.currentTime=f)}}}),_(b(t),"_onPlay",function(){var s=t.player,l=s.currentTime,u=s.timeSegments;t._checkIfEnabled(u)&&l>=u[u.length-1].end&&(t.player.currentTime=u[0].start)}),t}return R(n,[{key:"afterCreate",value:function(){this.curIndex=-1,this.curPos=null,this.lastCurrentTime=0,this.updateSegments(),this.on(at,this._onDurationChange),this.on(Ye,this._onLoadedData),this.on(Ie,this._onTimeupdate),this.on(Ui,this._onSeeking),this.on(Ee,this._onPlay)}},{key:"setConfig",value:function(e){var i=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(s){i.config[s]=e[s]}),this.updateSegments())}}},{key:"updateSegments",value:function(){var e=this.config,i=e.disable,a=e.segments,s=this.player;if(i||!a||a.length===0)s.timeSegments=[],s.offsetDuration=0,s.offsetCurrentTime=-1;else{var l=this.formatTimeSegments(a,s.duration);s.timeSegments=l,s.offsetDuration=l.length>0?l[l.length-1].duration:0}}},{key:"formatTimeSegments",value:function(e,i){var a=[];return e?(e.sort(function(s,l){return s.start-l.start}),e.forEach(function(s,l){var u={};if(u.start=s.start<0?0:s.start,u.end=i>0&&s.end>i?i:s.end,!(i>0&&u.start>i)){a.push(u);var c=u.end-u.start;if(l===0)u.offset=s.start,u.cTime=0,u.segDuration=c,u.duration=c;else{var f=a[l-1];u.offset=f.offset+(u.start-f.end),u.cTime=f.duration+f.cTime,u.segDuration=c,u.duration=f.duration+c}}}),a):[]}},{key:"getSeekTime",value:function(e,i,a,s){var l=-1,u=s[a],c=u.start,f=u.end;if(e>=c&&e<=f)return l;var d=e-i;if(d<0&&e<c){var g=i>c?i-c:0;return l=a-1>=0?s[a-1].end+d+g:0,l}return-1}},{key:"_checkIfEnabled",value:function(e){return!(!e||e.length<1)}},{key:"changeIndex",value:function(e,i){this.curIndex=e,e>=0&&i.length>0?this.curPos=i[e]:this.curPos=null}}],[{key:"pluginName",get:function(){return"TimeSegmentsControls"}},{key:"defaultConfig",get:function(){return{disable:!0,segments:[]}}}]),n}(rt);function nd(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M940.632 837.632l-72.192-72.192c65.114-64.745 105.412-154.386 105.412-253.44s-40.299-188.695-105.396-253.424l-0.016-0.016 72.192-72.192c83.639 83.197 135.401 198.37 135.401 325.632s-51.762 242.434-135.381 325.612l-0.020 0.020zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function rd(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021zM795.648 693.248l-72.704-72.704c27.756-27.789 44.921-66.162 44.921-108.544s-17.165-80.755-44.922-108.546l0.002 0.002 72.704-72.704c46.713 46.235 75.639 110.363 75.639 181.248s-28.926 135.013-75.617 181.227l-0.021 0.021z"></path>
</svg>
`,"image/svg+xml").firstChild}function ad(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40">
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M358.4 358.4h-204.8v307.2h204.8l256 256v-819.2l-256 256z"></path>
  <path fill="#fff" transform="scale(0.0220625 0.0220625)" d="M920.4 439.808l-108.544-109.056-72.704 72.704 109.568 108.544-109.056 108.544 72.704 72.704 108.032-109.568 108.544 109.056 72.704-72.704-109.568-108.032 109.056-108.544-72.704-72.704-108.032 109.568z"></path>
</svg>
`,"image/svg+xml").firstChild}var od=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"onBarMousedown",function(s){var l=b(t),u=l.player,c=t.find(".xgplayer-bar");h.event(s);var f=c.getBoundingClientRect(),d=h.getEventPos(s,u.zoom),g=f.height-(d.clientY-f.top);if(d.h=g,d.barH=f.height,t.pos=d,!(g<-2))return t.updateVolumePos(g,s),document.addEventListener("mouseup",t.onBarMouseUp),t._d.isStart=!0,!1}),_(b(t),"onBarMouseMove",function(s){var l=b(t),u=l._d;if(u.isStart){var c=b(t),f=c.pos,d=c.player;s.preventDefault(),s.stopPropagation(),h.event(s);var g=h.getEventPos(s,d.zoom);u.isMoving=!0;var p=f.h-g.clientY+f.clientY;p>f.barH||t.updateVolumePos(p,s)}}),_(b(t),"onBarMouseUp",function(s){h.event(s),document.removeEventListener("mouseup",t.onBarMouseUp);var l=b(t),u=l._d;u.isStart=!1,u.isMoving=!1}),_(b(t),"onMouseenter",function(s){t._d.isActive=!0,t.focus(),t.emit("icon_mouseenter",{pluginName:t.pluginName})}),_(b(t),"onMouseleave",function(s){t._d.isActive=!1,t.unFocus(100,!1,s),t.emit("icon_mouseleave",{pluginName:t.pluginName})}),_(b(t),"onVolumeChange",function(s){if(t.player){var l=t.player,u=l.muted,c=l.volume;t._d.isMoving||(t.find(".xgplayer-drag").style.height=u||c===0?"4px":"".concat(c*100,"%"),t.config.showValueLabel&&t.updateVolumeValue()),t.animate(u,c)}}),t}return R(n,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:rd,class:"xg-volume-small"},volumeLarge:{icon:nd,class:"xg-volume"},volumeMuted:{icon:ad,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var e=this;if(this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},!this.config.disable){this.initIcons();var i=this.playerConfig,a=i.commonStyle,s=i.volume;a.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=a.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(l){e.changeMuted(l)},{pre:function(u){u.preventDefault(),u.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),$.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on($a,this.onVolumeChange),this.once(Ye,this.onVolumeChange),h.typeOf(s)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange()}}},{key:"updateVolumePos",value:function(e,i){var a=this.player,s=this.find(".xgplayer-drag"),l=this.find(".xgplayer-bar");if(!(!l||!s)){var u=parseInt(e/l.getBoundingClientRect().height*1e3,10);s.style.height="".concat(e,"px");var c=Math.max(Math.min(u/1e3,1),0),f={volume:{from:a.volume,to:c}};a.muted&&(f.muted={from:!0,to:!1}),this.emitUserAction(i,"change_volume",{muted:a.muted,volume:a.volume,props:f}),a.volume=Math.max(Math.min(u/1e3,1),0),a.muted&&(a.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var e=this.player,i=e.volume,a=e.muted,s=this.find(".xgplayer-value-label"),l=Math.max(Math.min(i,1),0);s.innerText=a?0:Math.ceil(l*100)}},{key:"focus",value:function(){var e=this.player;e.focus({autoHide:!1}),this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),h.addClass(this.root,"slide-show")}},{key:"unFocus",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2?arguments[2]:void 0,l=this._d,u=this.player;l.isActive||(this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=h.setTimeout(this,function(){l.isActive||(a?u.blur():u.focus(),h.removeClass(e.root,"slide-show"),l.isStart&&e.onBarMouseUp(s)),e._timerId=null},i))}},{key:"changeMuted",value:function(e){e&&e.stopPropagation();var i=this.player,a=this._d;a.isStart&&this.onBarMouseUp(e),this.emitUserAction(e,"change_muted",{muted:i.muted,volume:i.volume,props:{muted:{from:i.muted,to:!i.muted}}}),i.volume>0&&(i.muted=!i.muted),i.volume<.01&&(i.volume=this.config.miniVolume)}},{key:"animate",value:function(e,i){e||i===0?this.setAttr("data-state","mute"):i<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.volumeSmall),this.appendChild(".xgplayer-icon",e.volumeLarge),this.appendChild(".xgplayer-icon",e.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",$.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){if(!this.config.disable){var e=this.config.default||this.player.volume,i=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(i?'<div class="xgplayer-value-label">'.concat(e*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(e*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),n}(Q);function sd(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none">
  <g clip-path="url(#clip0)">
    <path transform="scale(1.5 1.5)" d="M11.6665 9.16663H4.1665C2.78579 9.16663 1.6665 10.2859 1.6665 11.6666V15.8333C1.6665 17.214 2.78579 18.3333 4.1665 18.3333H11.6665C13.0472 18.3333 14.1665 17.214 14.1665 15.8333V11.6666C14.1665 10.2859 13.0472 9.16663 11.6665 9.16663Z" fill="white"/>
    <path transform="scale(1.5 1.5)" fill-rule="evenodd" clip-rule="evenodd" d="M3.88148 4.06298C3.75371 4.21005 3.67667 4.40231 3.67749 4.61242C3.67847 4.87253 3.79852 5.10435 3.98581 5.25646L6.99111 8.05895C7.32771 8.37283 7.85502 8.35443 8.16891 8.01782C8.48279 7.68122 8.46437 7.15391 8.12778 6.84003L6.62061 5.43457L9.8198 5.4224C9.82848 5.42239 9.8372 5.42221 9.84591 5.4219C10.9714 5.38233 12.0885 5.6285 13.0931 6.13744C14.0976 6.64635 14.957 7.40148 15.5908 8.33234C16.2246 9.2632 16.6122 10.3394 16.7177 11.4606C16.823 12.5819 16.6427 13.7115 16.1934 14.7442C16.0098 15.1661 16.203 15.6571 16.6251 15.8408C17.0471 16.0243 17.5381 15.8311 17.7216 15.4091C18.2833 14.1183 18.5087 12.7063 18.3771 11.3047C18.2453 9.90318 17.7607 8.55792 16.9684 7.39433C16.1761 6.23073 15.1021 5.28683 13.8463 4.65065C12.5946 4.01651 11.203 3.70872 9.80072 3.75583L6.43415 3.76862L7.96326 2.12885C8.27715 1.79225 8.25872 1.26494 7.92213 0.951061C7.58553 0.63718 7.05822 0.655585 6.74433 0.99219L3.90268 4.0395C3.89545 4.04724 3.88841 4.05509 3.88154 4.06303L3.88148 4.06298Z" fill="white"/>
  </g>
  <defs>
    <clipPath id="clip0">
      <rect width="40" height="40" fill="white"/>
    </clipPath>
  </defs>
</svg>
`,"image/svg+xml").firstChild}var ld=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),e.rotateDeg=e.config.rotateDeg||0,e}return R(n,[{key:"afterCreate",value:function(){var e=this;if(!this.config.disable){z(W(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.onBtnClick=this.onBtnClick.bind(this),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(nt,function(){e.rotateDeg&&e.config.innerRotate&&h.setTimeout(e,function(){e.updateRotateDeg(e.rotateDeg,e.config.innerRotate)},100)});var i=this.player.root;this.rootWidth=i.style.width||i.offsetWidth||i.clientWidth,this.rootHeight=i.style.height||i.offsetHeight||i.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){z(W(n.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"onBtnClick",value:function(e){e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"rotate"),this.rotate(this.config.clockwise,this.config.innerRotate,1)}},{key:"updateRotateDeg",value:function(e,i){if(e||(e=0),i){this.player.videoRotateDeg=e;return}var a=this.player,s=this.rootWidth,l=this.rootHeight,u=a.root,c=a.innerContainer,f=a.media,d=u.offsetWidth,g=c&&i?c.offsetHeight:u.offsetHeight,p=s,v=l,y=0,T=0;(e===.75||e===.25)&&(p="".concat(g,"px"),v="".concat(d,"px"),y=-(g-d)/2,T=-(d-g)/2);var k="translate(".concat(y,"px,").concat(T,"px) rotate(").concat(e,"turn)"),C={transformOrigin:"center center",transform:k,webKitTransform:k,height:v,width:p},F=i?f:u,N=i?a.getPlugin("poster"):null;Object.keys(C).map(function(E){F.style[E]=C[E],N&&N.root&&(N.root.style[E]=C[E])})}},{key:"rotate",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=this.player;this.rotateDeg||(this.rotateDeg=0);var l=e?1:-1;this.rotateDeg=(this.rotateDeg+1+l*.25*a)%1,this.updateRotateDeg(this.rotateDeg,i),s.emit(Ja,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:sd}}},{key:"render",value:function(){if(!this.config.disable)return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      `.concat(ot(this,"ROTATE_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),n}(mt);function ud(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}function cd(){return new DOMParser().parseFromString(`<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M16.5 4.3H3.5C3.38954 4.3 3.3 4.38954 3.3 4.5V15.5C3.3 15.6105 3.38954 15.7 3.5 15.7H8.50005L8.50006 17.5H3.5C2.39543 17.5 1.5 16.6046 1.5 15.5V4.5C1.5 3.39543 2.39543 2.5 3.5 2.5H16.5C17.6046 2.5 18.5 3.39543 18.5 4.5V8.5H16.7V4.5C16.7 4.38954 16.6105 4.3 16.5 4.3ZM12 11.5C11.4477 11.5 11 11.9477 11 12.5L11 16.5C11 17.0523 11.4478 17.5 12 17.5H17.5C18.0523 17.5 18.5 17.0523 18.5 16.5L18.5 12.5C18.5 11.9477 18.0523 11.5 17.5 11.5H12Z"
    fill="white" />
  <path fill-rule="evenodd" clip-rule="evenodd"
    d="M9.4998 7.7C9.77595 7.7 9.9998 7.47614 9.9998 7.2V6.5C9.9998 6.22386 9.77595 6 9.4998 6H5.5402L5.52754 6.00016H5.5C5.22386 6.00016 5 6.22401 5 6.50016V10.4598C5 10.7359 5.22386 10.9598 5.5 10.9598H6.2C6.47614 10.9598 6.7 10.7359 6.7 10.4598V8.83005L8.76983 10.9386C8.96327 11.1357 9.27984 11.1386 9.47691 10.9451L9.97645 10.4548C10.1735 10.2613 10.1764 9.94476 9.983 9.7477L7.97289 7.7H9.4998Z"
    fill="white" />
</svg>`,"image/svg+xml").firstChild}var St={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},fd=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"switchPIP",function(s){if(!t.isPIPAvailable())return!1;s.stopPropagation&&s.stopPropagation(),t.isPip?(t.exitPIP(),t.emitUserAction(s,"change_pip",{props:"pip",from:!0,to:!1}),t.setAttr("data-state","normal")):t.player.media.readyState===4&&(t.requestPIP(),t.emitUserAction(s,"change_pip",{props:"pip",from:!1,to:!0}),t.setAttr("data-state","pip"))}),t}return R(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.pip=="boolean"&&(e.config.showIcon=e.player.config.pip)}},{key:"afterCreate",value:function(){var e=this;this.isPIPAvailable()&&(z(W(n.prototype),"afterCreate",this).call(this),this.pMode=St.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(ji,function(){e.config.showIcon&&(h.removeClass(e.find(".xgplayer-icon"),"xg-icon-disable"),e.bind("click",e.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:ud,class:"xg-get-pip"},pipIconExit:{icon:cd,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var e=this.icons;this.appendChild(".xgplayer-icon",e.pipIcon),this.appendChild(".xgplayer-icon",e.pipIconExit)}},{key:"initPipEvents",value:function(){var e=this,i=this.player;this.leavePIPCallback=function(){var a=i.paused;h.setTimeout(e,function(){!a&&i.mediaPlay()},0),!a&&i.mediaPlay(),e.setAttr("data-state","normal"),e.pipWindow=null,i.emit(Ln,!1)},this.enterPIPCallback=function(a){i.emit(Ln,!0),a!=null&&a.pictureInPictureWindow&&(e.pipWindow=a.pictureInPictureWindow),e.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(a){var s=i.media.webkitPresentationMode;e.pMode===St.FULLSCREEN&&s!==St.FULLSCREEN&&i.onFullscreenChange(null,!1),e.pMode=s,s===St.PIP?e.enterPIPCallback(a):s===St.INLINE&&e.leavePIPCallback(a)},i.media&&(i.media.addEventListener("enterpictureinpicture",this.enterPIPCallback),i.media.addEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(i.media)&&i.media.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"copyStyleIntoPiPWindow",value:function(e){var i=De(document.styleSheets).map(function(s){try{return De(s.cssRules).map(function(u){return u.cssText}).join("")}catch(u){var l=document.createElement("link");l.rel="stylesheet",l.type=s.type,l.media=s.media,l.href=s.href,e.document.head.appendChild(l)}return""}).filter(Boolean).join(`
`),a=document.createElement("style");a.textContent=i,e.document.head.appendChild(a)}},{key:"requestPIP",value:function(){var e=this,i=this.player,a=this.playerConfig,s=this.config;if(!(!this.isPIPAvailable()||this.isPip))try{var l=a.poster;if(l&&(i.media.poster=h.typeOf(l)==="String"?l:l.poster),s.preferDocument&&this.isDocPIPAvailable()){var u={};if(s.width&&s.height)u.width=s.width,u.height=s.height;else{var c=i.root.getBoundingClientRect();u.width=c.width,u.height=c.height}documentPictureInPicture.requestWindow(u).then(function(f){var d=s.docPiPNode,g=s.docPiPStyle;e.enterPIPCallback();var p=d||i.root,v=p.parentElement,y=p.previousSibling,T=p.nextSibling;e.copyStyleIntoPiPWindow(f);var k=document.createElement("style");if(k.append("body{padding:0; margin:0;}"),g){var C="";typeof g=="string"?C=g:typeof g=="function"&&(C=g.call(s)),C&&k.append(C)}else p===i.root&&k.append(`
              .xgplayer{width: 100%!important; height: 100%!important;}
            `);f.document.head.append(k),f.document.body.append(p),f.addEventListener("pagehide",function(F){v&&(T?v.insertBefore(p,T):y?v.insertBefore(p,y.nextSibling):v.appendChild(p)),e.leavePIPCallback()},{once:!0})})}else n.checkWebkitSetPresentationMode(i.media)?i.media.webkitSetPresentationMode("picture-in-picture"):i.media.requestPictureInPicture();return!0}catch(f){return console.error("requestPiP",f),!1}}},{key:"exitPIP",value:function(){var e=this.player;try{if(this.isPIPAvailable()&&this.isPip){var i;this.isDocPIPAvailable()&&(i=documentPictureInPicture)!==null&&i!==void 0&&i.window?documentPictureInPicture.window.close():n.checkWebkitSetPresentationMode(e.media)?e.media.webkitSetPresentationMode("inline"):document.exitPictureInPicture()}return!0}catch(a){return console.error("exitPIP",a),!1}}},{key:"isPip",get:function(){var e,i=this.player;return!!(this.isDocPIPAvailable()&&(e=documentPictureInPicture)!==null&&e!==void 0&&e.window)||document.pictureInPictureElement&&document.pictureInPictureElement===i.media||i.media.webkitPresentationMode===St.PIP}},{key:"isPIPAvailable",value:function(){var e=this.player.media,i=h.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!0;return i&&(h.typeOf(e.disablePictureInPicture)==="Boolean"&&!e.disablePictureInPicture||e.webkitSupportsPresentationMode&&h.typeOf(e.webkitSetPresentationMode)==="Function")||this.isDocPIPAvailable()}},{key:"isDocPIPAvailable",value:function(){return"documentPictureInPicture"in window&&/^(https|file)/.test(location.protocol)}},{key:"destroy",value:function(){z(W(n.prototype),"destroy",this).call(this);var e=this.player;e.media.removeEventListener("enterpictureinpicture",this.enterPIPCallback),e.media.removeEventListener("leavepictureinpicture",this.leavePIPCallback),n.checkWebkitSetPresentationMode(e.media)&&e.media.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      `.concat(ot(this,"PIP",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:6,showIcon:!1,preferDocument:!1,width:void 0,height:void 0,docPiPNode:void 0,docPiPStyle:void 0}}},{key:"checkWebkitSetPresentationMode",value:function(e){return typeof e.webkitSetPresentationMode=="function"}}]),n}(mt);function hd(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40">
  <path transform="scale(0.038 0.028)" d="M800 380v768h-128v-352l-320 320v-704l320 320v-352z"></path>
</svg>
`,"image/svg+xml").firstChild}var dd=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),_(b(e),"playNext",function(i){var a=b(e),s=a.player;i.preventDefault(),i.stopPropagation(),e.idx+1<e.config.urlList.length?(e.idx++,e.nextHandler(e.config.urlList[e.idx],e.idx),s.emit(Ai,e.idx+1)):(e.nextHandler(),s.emit(Ai))}),e.idx=-1,e}return R(n,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:hd}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("nextClick",this.changeSrc);var e=$.device==="mobile"?"touchend":"click";this.bind(e,this.playNext),this.show()}},{key:"changeSrc",value:function(e){var i=this.player;e&&(i.pause(),i.currentTime=0,i.switchURL?i.switchURL(e):i.src=e,i.config.url=e,i.play())}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      `.concat(ot(this,"PLAYNEXT_TIPS",this.playerConfig.isHideTips),`
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),n}(Q),fo={exports:{}};(function(r,o){(function(n,t){r.exports=t()})($o,function(){return function n(t,e,i){var a=window,s="application/octet-stream",l=i||s,u=t,c=!e&&!i&&u,f=document.createElement("a"),d=function(m){return String(m)},g=a.Blob||a.MozBlob||a.WebKitBlob||d,p=e||"download",v,y;if(g=g.call?g.bind(a):Blob,String(this)==="true"&&(u=[u,l],l=u[0],u=u[1]),c&&c.length<2048&&(p=c.split("/").pop().split("?")[0],f.href=c,f.href.indexOf(c)!==-1)){var T=new XMLHttpRequest;return T.open("GET",c,!0),T.responseType="blob",T.onload=function(m){n(m.target.response,p,s)},setTimeout(function(){T.send()},0),T}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(u))if(u.length>1024*1024*1.999&&g!==d)u=N(u),l=u.type||s;else return navigator.msSaveBlob?navigator.msSaveBlob(N(u),p):E(u);else if(/([\x80-\xff])/.test(u)){var k=0,C=new Uint8Array(u.length),F=C.length;for(k;k<F;++k)C[k]=u.charCodeAt(k);u=new g([C],{type:l})}v=u instanceof g?u:new g([u],{type:l});function N(m){var x=m.split(/[:;,]/),P=x[1],I=x[2]=="base64"?atob:decodeURIComponent,L=I(x.pop()),H=L.length,U=0,ee=new Uint8Array(H);for(U;U<H;++U)ee[U]=L.charCodeAt(U);return new g([ee],{type:P})}function E(m,x){if("download"in f)return f.href=m,f.setAttribute("download",p),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),x===!0&&setTimeout(function(){a.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(m)&&(m="data:"+m.replace(/^data:([\w\/\-\+]+)/,s)),window.open(m)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=m),!0;var P=document.createElement("iframe");document.body.appendChild(P),!x&&/^data:/.test(m)&&(m="data:"+m.replace(/^data:([\w\/\-\+]+)/,s)),P.src=m,setTimeout(function(){document.body.removeChild(P)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(v,p);if(a.URL)E(a.URL.createObjectURL(v),!0);else{if(typeof v=="string"||v.constructor===d)try{return E("data:"+l+";base64,"+a.btoa(v))}catch(m){return E("data:"+l+","+encodeURIComponent(v))}y=new FileReader,y.onload=function(m){E(this.result)},y.readAsDataURL(v)}return!0}})})(fo);var gd=fo.exports;const pd=Fi(gd);function vd(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24">
  <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
    <g transform="translate(-488.000000, -340.000000)" fill="#FFFFFF">
      <g id="Group-2">
        <g id="volme_big-copy" transform="translate(488.000000, 340.000000)">
          <rect id="Rectangle-18" x="11" y="4" width="2" height="12" rx="1"></rect>
          <rect id="Rectangle-2" x="3" y="18" width="18" height="2" rx="1"></rect>
          <rect id="Rectangle-2" transform="translate(4.000000, 17.500000) rotate(90.000000) translate(-4.000000, -17.500000) " x="1.5" y="16.5" width="5" height="2" rx="1"></rect><rect id="Rectangle-2-Copy-3" transform="translate(20.000000, 17.500000) rotate(90.000000) translate(-20.000000, -17.500000) " x="17.5" y="16.5" width="5" height="2" rx="1"></rect>
          <path d="M9.48791171,8.26502656 L9.48791171,14.2650266 C9.48791171,14.8173113 9.04019646,15.2650266 8.48791171,15.2650266 C7.93562696,15.2650266 7.48791171,14.8173113 7.48791171,14.2650266 L7.48791171,7.26502656 C7.48791171,6.71274181 7.93562696,6.26502656 8.48791171,6.26502656 L15.4879117,6.26502656 C16.0401965,6.26502656 16.4879117,6.71274181 16.4879117,7.26502656 C16.4879117,7.81731131 16.0401965,8.26502656 15.4879117,8.26502656 L9.48791171,8.26502656 Z" id="Combined-Shape" transform="translate(11.987912, 10.765027) scale(1, -1) rotate(45.000000) translate(-11.987912, -10.765027) "></path>
        </g>
      </g>
    </g>
  </g>
</svg>
`,"image/svg+xml").firstChild}var md=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),_(b(e),"download",function(i){if(!e.isLock){e.emitUserAction(i,"download");var a=e.playerConfig.url,s="";h.typeOf(a)==="String"?s=a:h.typeOf(a)==="Array"&&a.length>0&&(s=a[0].src);var l=e.getAbsoluteURL(s);pd(l),e.isLock=!0,e.timer=window.setTimeout(function(){e.isLock=!1,window.clearTimeout(e.timer),e.timer=null},300)}}),e.timer=null,e.isLock=!1,e}return R(n,[{key:"afterCreate",value:function(){z(W(n.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this._handler=this.hook("click",this.download,{pre:function(i){i.preventDefault(),i.stopPropagation()}}),this.bind(["click","touchend"],this._handler))}},{key:"registerIcons",value:function(){return{download:vd}}},{key:"getAbsoluteURL",value:function(e){if(!e.match(/^https?:\/\//)){var i=document.createElement("div");i.innerHTML='<a href="'.concat(e,'">x</a>'),e=i.firstChild.href}return e}},{key:"destroy",value:function(){z(W(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   `.concat(ot(this,"DOWNLOAD_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:3,disable:!0}}}]),n}(mt),yd=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.screenShot=="boolean"&&(e.config.disable=!e.player.config.screenShot)}},{key:"afterCreate",value:function(){z(W(n.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var e=this.config;this.initSize=function(i){e.fitVideo&&(e.width=i.vWidth,e.height=i.vHeight)},this.once(nt,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(e,i){var a=document.createElement("a");a.href=e,a.download=i;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(s)}},{key:"createCanvas",value:function(e,i){var a=document.createElement("canvas"),s=a.getContext("2d");this.canvasCtx=s,this.canvas=a,a.width=e||this.config.width,a.height=i||this.config.height,s.imageSmoothingEnabled=!0,s.imageSmoothingEnabled&&(s.imageSmoothingQuality="high")}},{key:"onClickBtn",value:function(e){var i=this;e.preventDefault(),e.stopPropagation(),this.emitUserAction(e,"shot");var a=this.config;this.shot(a.width,a.height).then(function(s){i.emit(Za,s),a.saveImg&&i.saveScreenShot(s,a.name+a.format)})}},{key:"shot",value:function(e,i){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},l=this.config,u=this.player,c=s.quality||l.quality,f=s.type||l.type;return new Promise(function(d,g){var p=null,v;if(u.media.canvas)p=u.media.canvas;else{a.canvas?(a.canvas.width=e||l.width,a.canvas.height=i||l.height):a.createCanvas(e,i),p=a.canvas,v=a.canvasCtx;var y=u.media.videoWidth/u.media.videoHeight,T=p.width/p.height,k=0,C=0,F=u.media.videoWidth,N=u.media.videoHeight,E,m,x,P;y>T?(x=p.width,P=p.width/y,E=0,m=Math.round((p.height-P)/2)):y===T?(x=p.width,P=p.height,E=0,m=0):y<T&&(x=p.height*y,P=p.height,E=Math.round((p.width-x)/2),m=0),v.drawImage(u.media,k,C,F,N,E,m,x,P)}var I=p.toDataURL(f,c).replace(f,"image/octet-stream");I=I.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),d(I)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){z(W(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(nt,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var e=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",i="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(e,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[i],'">').concat(this.i18n[i],"</span>"),`
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,saveImg:!0,fitVideo:!0,disable:!1,name:"screenshot"}}}]),n}(mt),bd=function(){function r(o){O(this,r),this.config=o.config,this.parent=o.root,this.root=h.createDom("ul","",{},"xg-options-list xg-list-slide-scroll ".concat(this.config.className)),o.root.appendChild(this.root);var n=this.config.maxHeight;n&&this.setStyle({maxHeight:n}),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var t=$.device==="mobile"?"touchend":"click";this._delegates=Q.delegate.call(this,this.root,"li",t,this.onItemClick)}return R(r,[{key:"renderItemList",value:function(n){var t=this,e=this.config,i=this.root;n?e.data=n:n=e.data,e.style&&Object.keys(e.style).map(function(a){i.style[a]=e[a]}),n.length>0&&(this.attrKeys=Object.keys(n[0])),this.root.innerHTML="",n.map(function(a,s){var l=a.selected?"option-item selected":"option-item";a["data-index"]=s,t.root.appendChild(h.createDom("li","<span>".concat(a.showText,"</span>"),a,l))})}},{key:"onItemClick",value:function(n){n.delegateTarget||(n.delegateTarget=n.target);var t=n.delegateTarget;if(t&&h.hasClass(t,"selected"))return!1;var e=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,i=this.root.querySelector(".selected");h.addClass(t,"selected"),i&&h.removeClass(i,"selected"),e(n,{from:i?this.getAttrObj(i,this.attrKeys):null,to:this.getAttrObj(t,this.attrKeys)})}},{key:"getAttrObj",value:function(n,t){if(!n||!t)return{};var e={};t.map(function(a){e[a]=n.getAttribute(a)});var i=n.getAttribute("data-index");return i&&(e.index=Number(i)),e}},{key:"show",value:function(){h.removeClass(this.root,"hide"),h.addClass(this.root,"active")}},{key:"hide",value:function(){h.removeClass(this.root,"active"),h.addClass(this.root,"hide")}},{key:"setStyle",value:function(n){var t=this;Object.keys(n).forEach(function(e){t.root.style[e]=n[e]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(n){n.destroy&&n.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),r}(),Me={SIDE:"side",MIDDLE:"middle"},Et={CLICK:"click",HOVER:"hover"};function _d(r,o){return r===Me.SIDE?o===ie.CONTROLS_LEFT?"xg-side-list xg-left-side":"xg-side-list xg-right-side":""}var ci=$.device==="mobile",Mi=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),_(b(e),"onEnter",function(i){i.stopPropagation(),e.emit("icon_mouseenter",{pluginName:e.pluginName}),e.switchActiveState(i)}),_(b(e),"switchActiveState",function(i){i.stopPropagation();var a=e.config.toggleMode;a===Et.CLICK?e.toggle(!e.isActive):e.toggle(!0)}),_(b(e),"onLeave",function(i){i.stopPropagation(),e.emit("icon_mouseleave",{pluginName:e.pluginName}),e.config.listType!==Me.SIDE&&e.isActive&&e.toggle(!1)}),_(b(e),"onListEnter",function(i){e.enterType=2}),_(b(e),"onListLeave",function(i){e.enterType=0,e.isActive&&e.toggle(!1)}),e.isIcons=!1,e.isActive=!1,e.curValue=null,e.curIndex=0,e}return R(n,[{key:"updateLang",value:function(e){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var e=this,i=this.config;this.initIcons(),ci&&i.listType!==Me.MIDDLE&&(i.listType=Me.SIDE),i.hidePortrait&&h.addClass(this.root,"portrait"),this.on([nt,Ve],function(){e._resizeList()}),this.once(Ge,function(){i.list&&i.list.length>0&&(e.renderItemList(i.list),e.show())}),ci&&this.on(Gn,function(){e.isActive&&(e.optionsList&&e.optionsList.hide(),e.isActive=!1)}),ci?(i.toggleMode=Et.CLICK,this.activeEvent="touchend"):this.activeEvent=i.toggleMode===Et.CLICK?"click":"mouseenter",i.toggleMode===Et.CLICK?this.bind(this.activeEvent,this.switchActiveState):(this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave)),this.isIcons&&this.bind("click",this.onIconClick)}},{key:"initIcons",value:function(){var e=this,i=this.icons,a=Object.keys(i),s=!1;a.length>0&&(a.forEach(function(l){e.appendChild(".xgplayer-icon",i[l]),!s&&(s=i[l])}),this.isIcons=s),!s&&(this.appendChild(".xgplayer-icon",h.createDom("span","",{},"icon-text")),h.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(e,i,a){if(e===void 0)return"";var s=this.config.list;!a&&(a=this.player.lang),i=!i||h.isUndefined(e[i])?"text":i,typeof e=="number"&&(e=s[e]);try{return me(e[i])==="object"?e[i][a]||e[i].en:e[i]}catch(l){return console.warn(l),""}}},{key:"toggle",value:function(e){if(e!==this.isActive){var i=this.player.controls,a=this.config.listType;e?(a===Me.SIDE?i.blur():i.focus(),this.optionsList&&this.optionsList.show()):(a===Me.SIDE?i.focus():i.focusAwhile(),this.optionsList&&this.optionsList.hide()),this.isActive=e}}},{key:"onItemClick",value:function(e,i){e.stopPropagation();var a=this.config,s=a.listType,l=a.list;this.curIndex=i.to.index,this.curItem=l[this.curIndex],this.changeCurrentText();var u=this.config.isItemClickHide;(u||ci||s===Me.SIDE)&&this.toggle(!1)}},{key:"onIconClick",value:function(e){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,a=e[i];a&&(this.find(".icon-text").innerHTML=this.getTextByLang(a,"iconText"))}}},{key:"renderItemList",value:function(e,i){var a=this,s=this.config,l=this.optionsList,u=this.player;if(typeof i=="number"&&(this.curIndex=i,this.curItem=s.list[i]),l){l.renderItemList(e),this.changeCurrentText();return}var c={config:{data:e||[],className:_d(s.listType,s.position),onItemClick:function(v,y){a.onItemClick(v,y)}},root:s.listType===Me.SIDE?u.innerContainer||u.root:this.root};if(this.config.isShowIcon){var f=this.player.root.getBoundingClientRect(),d=f.height,g=s.listType===Me.MIDDLE?d-50:d;g&&s.heightLimit&&(c.config.maxHeight="".concat(g,"px")),this.optionsList=new bd(c),this.changeCurrentText(),this.show()}this._resizeList()}},{key:"_resizeList",value:function(){if(this.config.heightLimit){var e=this.player.root.getBoundingClientRect(),i=e.height,a=this.config.listType===Me.MIDDLE?i-50:i;this.optionsList&&this.optionsList.setStyle({maxHeight:"".concat(a,"px")})}}},{key:"destroy",value:function(){var e=this.config;e.toggleMode===Et.CLICK?this.unbind(this.activeEvent,this.switchActiveState):(this.unbind(this.activeEvent,this.onEnter),this.unbind("mouseleave",this.onLeave)),this.isIcons&&this.unbind("click",this.onIconClick),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1,isItemClickHide:!0,toggleMode:Et.HOVER,heightLimit:!0}}}]),n}(Q),Cd=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),e.curTime=0,e.isPaused=!0,e}return R(n,[{key:"beforeCreate",value:function(e){var i=e.config.list;Array.isArray(i)&&i.length>0&&(e.config.list=i.map(function(a){return!a.text&&a.name&&(a.text=a.name),a.text||(a.text=a.definition),a}))}},{key:"afterCreate",value:function(){var e=this;z(W(n.prototype),"afterCreate",this).call(this),this.on("resourceReady",function(i){e.changeDefinitionList(i)}),this.on(Yn,function(i){e.renderItemList(e.config.list,i.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"show",value:function(e){!this.config.list||this.config.list.length<2||h.addClass(this.root,"show")}},{key:"initDefinition",value:function(){var e=this.config,i=e.list,a=e.defaultDefinition;if(i.length>0){var s=null;i.map(function(l){l.definition===a&&(s=l)}),s||(s=i[0]),this.changeDefinition(s)}}},{key:"renderItemList",value:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.list||[],a=arguments.length>1?arguments[1]:void 0,s=a&&a.definition?a.definition:this.config.defaultDefinition;a&&i.forEach(function(c){c.selected=!1});var l=0,u=i.map(function(c,f){var d=se(se({},c),{},{showText:e.getTextByLang(c)||c.definition,selected:!1});return(c.selected||c.definition&&c.definition==s)&&(d.selected=!0,l=f),d});z(W(n.prototype),"renderItemList",this).call(this,u,l)}},{key:"changeDefinitionList",value:function(e){Array.isArray(e)&&(this.config.list=e.map(function(i){return!i.text&&i.name&&(i.text=i.name),i.text||(i.text=i.definition),i}),this.renderItemList(),this.config.list.length<2?this.hide():this.show())}},{key:"changeDefinition",value:function(e,i){this.player.changeDefinition(e,i)}},{key:"onItemClick",value:function(e,i){var a=this.player.definitionList;z(W(n.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(e,"change_definition",{from:i.from,to:i.to});for(var s=0;s<a.length;s++)i.to&&a[s].definition===i.to.definition&&(i.to.url=a[s].url),i.from&&a[s].definition===i.from.definition&&(i.from.url=a[s].url);this.player.changeDefinition(i.to,i.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return se(se({},Mi.defaultConfig),{},{position:ie.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0})}}]),n}(Mi),Td=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),e.curRate=1,e}return R(n,[{key:"beforeCreate",value:function(e){var i=e.player.config.playbackRate,a=i?Array.isArray(i)?i:e.config.list:[];Array.isArray(a)&&(e.config.list=a.map(function(s){return typeof s=="number"?s={rate:s,text:"".concat(s,"x")}:!s.text&&s.rate&&(s.text="".concat(s.rate,"x")),s}))}},{key:"afterCreate",value:function(){var e=this;z(W(n.prototype),"afterCreate",this).call(this),this.on(Ka,function(){e.curValue!==e.player.playbackRate&&e.renderItemList()}),this.renderItemList()}},{key:"show",value:function(e){!this.config.list||this.config.list.length===0||z(W(n.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(e,i){z(W(n.prototype),"onItemClick",this).apply(this,arguments);var a=e.delegateTarget,s=Number(a.getAttribute("rate"));if(!s||s===this.curValue)return!1;var l={playbackRate:{from:this.player.playbackRate,to:s}};this.emitUserAction(e,"change_rate",{props:l}),this.curValue=s,this.player.playbackRate=s}},{key:"renderItemList",value:function(){var e=this,i=this.player.playbackRate||1;this.curValue=i;var a=-1,s=this.config.list.map(function(l,u){var c={rate:l.rate};return c.rate===i&&(c.selected=!0,a=u),c.showText=e.getTextByLang(l),c});z(W(n.prototype),"renderItemList",this).call(this,s,a)}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var e=this.config.list,i=this.curIndex<e.length?this.curIndex:0,a=e[i],s="";!a||this.curIndex<0?s="".concat(this.player.playbackRate,"x"):s=this.getTextByLang(a,"iconText"),this.find(".icon-text").innerHTML=s}}},{key:"destroy",value:function(){z(W(n.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return se(se({},Mi.defaultConfig),{},{position:ie.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1})}}]),n}(Mi);function kd(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" class='path_full' d="M9,10v1a.9.9,0,0,1-1,1,.9.9,0,0,1-1-1V9A.9.9,0,0,1,8,8h2a.9.9,0,0,1,1,1,.9.9,0,0,1-1,1Zm6,4V13a1,1,0,0,1,2,0v2a.9.9,0,0,1-1,1H14a1,1,0,0,1,0-2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}function wd(){return new DOMParser().parseFromString(`<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40">
  <path fill="#fff" transform="scale(1.3, 1.3)" d="M9,10V9a.9.9,0,0,1,1-1,.9.9,0,0,1,1,1v2a.9.9,0,0,1-1,1H8a.9.9,0,0,1-1-1,.9.9,0,0,1,1-1Zm6,4v1a1,1,0,0,1-2,0V13a.9.9,0,0,1,1-1h2a1,1,0,0,1,0,2Zm3-7H6V17H18Zm2,0V17a2,2,0,0,1-2,2H6a2,2,0,0,1-2-2V7A2,2,0,0,1,6,5H18A2,2,0,0,1,20,7Z"></path>
</svg>
`,"image/svg+xml").firstChild}var Qr=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"beforeCreate",value:function(e){typeof e.player.config.cssFullscreen=="boolean"&&(e.config.disable=!e.player.config.cssFullscreen)}},{key:"afterCreate",value:function(){var e=this;z(W(n.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(Pi,function(i){e.animate(i)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen))}},{key:"initIcons",value:function(){var e=this.icons,i=this.find(".xgplayer-icon");i.appendChild(e.cssFullscreen),i.appendChild(e.exitCssFullscreen)}},{key:"btnClick",value:function(e){e.preventDefault(),e.stopPropagation();var i=this.player.isCssfullScreen;this.emitUserAction(e,"switch_cssfullscreen",{cssfullscreen:i}),i?this.player.exitCssFullscreen():this.player.getCssFullscreen()}},{key:"animate",value:function(e){this.root&&(e?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(e))}},{key:"switchTips",value:function(e){var i=this.i18nKeys,a=this.find(".xg-tips");a&&this.changeLangTextKey(a,e?i.EXITCSSFULLSCREEN_TIPS:i.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:kd,class:"xg-get-cssfull"},exitCssFullscreen:{icon:wd,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){z(W(n.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    `.concat(ot(this,"CSSFULLSCREEN_TIPS",this.playerConfig.isHideTips),`
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:ie.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),n}(mt),Sd=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"afterCreate",value:function(){var e=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.onError=this.hook("showError",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(ei,function(i){e.onError(i)})}},{key:"errorRetry",value:function(e){this.emitUserAction(e,"error_retry",{}),this.player.retry()}},{key:"handleError",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=this.player,a=e.errorType,s=i.errorNote?this.i18n[i.errorNote]:"";if(!s)switch(a){case"decoder":s=this.i18n.MEDIA_ERR_DECODE;break;case"network":s=this.i18n.MEDIA_ERR_NETWORK;break;default:s=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=s,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),n}(Q),Ed=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"afterCreate",value:function(){var e=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(i){(e.config.onClick||e.customOnClick)&&(i.preventDefault(),i.stopPropagation(),e.customOnClick?e.customOnClick(i):e.config.onClick(i))}),this.player.showPrompt=function(){e.showPrompt.apply(e,arguments)},this.player.hidePrompt=function(){e.hide()}}},{key:"setStyle",value:function(e){var i=this;Object.keys(e).map(function(a){i.root.style[a]=e[a]})}},{key:"showPrompt",value:function(e){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){this.customOnClick=s;var l=this.config.interval;this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),h.addClass(this.root,"show"),a.mode==="arrow"&&h.addClass(this.root,"arrow"),typeof e=="string"?this.find(".xgplayer-prompt-detail").innerHTML=e:this.find(".xgplayer-prompt-detail").innerHTML="".concat(e.text||"")+"".concat(e.highlight?'<i class="highlight">'.concat(e.highlight,"</i>"):""),a.style&&this.setStyle(a.style);var u=typeof a.autoHide=="boolean"?a.autoHide:this.config.autoHide;if(u){var c=a.interval||l;this.intervalId=setTimeout(function(){i.hide()},c)}}}},{key:"hide",value:function(){h.removeClass(this.root,"show"),h.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(w.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,detail:{text:"",highlight:""},onClick:function(){}}}}]),n}(Q),ea={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function ho(r){Object.keys(ea).map(function(o){r[o]===void 0&&(r[o]=ea[o])})}var ta={_updateDotDom:function(o,n){if(n){var t=this.calcuPosition(o.time,o.duration),e=o.style||{};e.left="".concat(t.left,"%"),e.width="".concat(t.width,"%"),n.setAttribute("data-text",o.text),n.setAttribute("data-time",o.time),t.isMini?h.addClass(n,"mini"):h.removeClass(n,"mini"),Object.keys(e).map(function(i){n.style[i]=e[i]})}},initDots:function(){var o=this;this._ispots.map(function(n){o.createDot(n,!1)}),this.ispotsInit=!0},createDot:function(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this.player.plugins.progress;if(t&&(n&&(ho(o),this._ispots.push(o)),!(!this.ispotsInit&&n))){var e=this.calcuPosition(o.time,o.duration),i=o.style||{};i.left="".concat(e.left,"%"),i.width="".concat(e.width,"%");var a="xgspot_".concat(o.id," xgplayer-spot");e.isMini&&(a+=" mini");var s=o.template?'<div class="xgplayer-spot-pop">'.concat(o.template,"</div>"):"",l=h.createDom("xg-spot",s,{"data-text":o.text,"data-time":o.time,"data-id":o.id},a);Object.keys(i).map(function(u){l.style[u]=i[u]}),t.outer&&t.outer.appendChild(l),this.positionDot(l,o.id)}},findDot:function(o){if(this.player.plugins.progress){var n=this._ispots.filter(function(t,e){return t.id===o});return n.length>0?n[0]:null}},updateDot:function(o){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=this.player.plugins.progress;if(t){var e=this.findDot(o.id);if(e&&Object.keys(o).map(function(a){e[a]=o[a]}),!!this.ispotsInit){var i=t.find('xg-spot[data-id="'.concat(o.id,'"]'));i&&(this._updateDotDom(o,i),n&&this.showDot(o.id))}}},deleteDot:function(o){var n=this._ispots,t=this.player.plugins.progress;if(t){for(var e=[],i=0;i<n.length;i++)n[i].id===o&&e.push(i);for(var a=e.length,s=a-1;s>=0;s--)if(n.splice(e[s],1),this.ispotsInit){var l=t.find('xg-spot[data-id="'.concat(o,'"]'));l&&l.parentElement.removeChild(l)}}},deleteAllDots:function(){var o=this.player.plugins.progress;if(o){if(!this.ispotsInit){this._ispots=[];return}for(var n=o.root.getElementsByTagName("xg-spot"),t=n.length-1;t>=0;t--)o.outer.removeChild(n[t]);this._ispots=[]}},updateAllDots:function(){var o=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=this.player.plugins.progress;if(t){if(!this.ispotsInit){this._ispots=n;return}this._ispots=[];var e=t.root.getElementsByTagName("xg-spot"),i=e.length;if(i>n.length)for(var a=i-1;a>n.length-1;a--)t.outer.removeChild(e[a]);n.forEach(function(s,l){l<i?(e[l].setAttribute("data-id","".concat(s.id)),o._ispots.push(s),o.updateDot(s)):o.createDot(s)})}},positionDots:function(){var o=this,n=this._ispots,t=this.playerSize,e=this.player.sizeInfo,i=this.player.plugins.progress;!i||e.width===t.width||(t.width=e.width,t.left=e.left,n.forEach(function(a){var s=i.find('xg-spot[data-id="'.concat(a.id,'"]'));s&&o.positionDot(s,a.id)}))},positionDot:function(o,n){var t=h.findDom(o,".xgplayer-spot-pop");if(t){var e=this.playerSize,i=o.getBoundingClientRect(),a=t.getBoundingClientRect(),s=i.left-e.left,l=e.width-s-i.width/2;if(s<a.width/2||e.width<a.width){var u=a.width/2-s;t.style.left="".concat(u,"px")}else if(l<a.width/2){var c=l-a.width/2+i.width/2;t.style.left="".concat(c,"px")}else t.style.left="50%"}},updateDuration:function(){var o=this,n=this.player.plugins.progress;if(n){var t=this._ispots;t.forEach(function(e){var i=n.find('xg-spot[data-id="'.concat(e.id,'"]'));o._updateDotDom(e,i)})}},getAllDotsDom:function(){var o=this.player.plugins.progress;if(!o)return[];var n=o.root.getElementsByTagName("xg-spot");return n},getDotDom:function(o){var n=this.player.plugins.progress;if(n)return n.find('xg-spot[data-id="'.concat(o,'"]'))}};function xd(r){var o=r.config,n=r.player;Object.keys(ta).map(function(e){r[e]=ta[e].bind(r)});var t=n.config.progressDot||o.ispots||[];r._ispots=t.map(function(e){return ho(e),e}),r.ispotsInit=!1,r.playerSize={left:n.sizeInfo.left,width:n.sizeInfo.width},r.on(at,function(){r.ispotsInit?r.updateDuration():r.initDots()}),r.on(nt,function(){r.positionDots()})}var xt={dragmove:"onProgressMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseOver"},Pd=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),_(b(e),"onMousemove",function(i){if(!e.config.disable){if(h.hasClass(i.target,"xg-spot-content")&&e.config.isHideThumbnailHover){e.player.plugins.progress.onMouseLeave(i);return}(e._state.f||h.hasClass(i.target,"xg-spot-content"))&&(h.event(i),i.stopPropagation())}}),_(b(e),"onMousedown",function(i){e.config.disable||(e._state.f||h.hasClass(i.target,"xg-spot-content"))&&(h.event(i),i.stopPropagation())}),_(b(e),"onMouseup",function(i){if(e.isDrag){var a=e.player.plugins.progress;a&&a.pos&&(a.onMouseUp(i),!a.pos.isEnter&&a.onMouseLeave(i))}}),_(b(e),"onDotMouseLeave",function(i){if(!e.config.disable){e._curDot.removeEventListener("mouseleave",e.onDotMouseLeave),e.blurDot(i.target),e._curDot=null;var a=e.player.plugins.progress;a&&a.enableBlur(),e.show()}}),_(b(e),"onProgressMouseOver",function(i,a){if(!e.config.disable&&h.hasClass(a.target,"xgplayer-spot")&&!e._curDot){e._curDot=a.target,e.focusDot(a.target),e._curDot.children.length>0&&e.hide();var s=e.player.plugins.progress;s&&s.disableBlur(),e._curDot.addEventListener("mouseleave",e.onDotMouseLeave)}}),e._ispots=[],e.videoPreview=null,e.videothumbnail=null,e.thumbnail=null,e.timeStr="",e._state={now:0,f:!1},e}return R(n,[{key:"beforeCreate",value:function(e){var i=e.player.plugins.progress;i&&(e.root=i.root)}},{key:"afterCreate",value:function(){var e=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(i,a){a.seekTime&&e.player.seek(a.seekTime)}),this.transformTimeHook=this.hook("transformTime",function(i){e.setTimeContent(h.format(i))}),xd(this),this.on(at,function(){e.show()}),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(e){var i=this;e&&Object.keys(e).map(function(a){i.config[a]=e[a]})}},{key:"onPluginsReady",value:function(){var e=this.player;e.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var e=this,i=this.player.plugins.progress;if(i&&(Object.keys(xt).map(function(s){e[xt[s]]=e[xt[s]].bind(e),i.addCallBack(s,e[xt[s]])}),$.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var a=this.hook("previewClick",function(){});this.handlerPreviewClick=function(s){s.stopPropagation(),a(parseInt(e._state.now*1e3,10)/1e3,s)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMove",value:function(e,i){this.config.disable||!this.player.duration||this.updatePosition(e.offset,e.width,e.currentTime,e.e)}},{key:"onProgressDragStart",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&h.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(e){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&h.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(e,i){this.config.disable||h.hasClass(i.target,"xgplayer-spot")&&(i.stopPropagation(),i.preventDefault(),["time","id","text"].map(function(a){e[a]=i.target.getAttribute("data-".concat(a))}),e.time&&(e.time=Number(e.time)),this.handlerSpotClick(i,e))}},{key:"updateLinePos",value:function(e,i){var a=this.root,s=this.previewLine,l=this.player,u=this.config,c=l.controls.mode,f=c==="flex",d=a.getBoundingClientRect().width;if(!(!d&&this._hasThumnail)){d=this._hasThumnail&&d<u.width?u.width:d;var g=e-d/2,p;g<0&&!f?(g=0,p=e-d/2):g>i-d&&!f?(p=g-(i-d),g=i-d):p=0,p!==void 0&&(s.style.transform="translateX(".concat(p.toFixed(2),"px)")),a.style.transform="translateX(".concat(g.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(e){var i=this.timeText,a=this.timePoint;i.innerHTML=e,!this.thumbnail&&(a.innerHTML=e)}},{key:"updatePosition",value:function(e,i,a,s){var l=this.root,u=this.config,c=this._state;if(l){c.now=a,this.transformTimeHook(a);var f=this.timeStr;s&&s.target&&h.hasClass(s.target,"xgplayer-spot")?(this.showTips(s.target.getAttribute("data-text"),!1,f),this.focusDot(s.target),c.f=!0,u.isFocusDots&&c.f&&(c.now=parseInt(s.target.getAttribute("data-time"),10))):u.defaultText?(c.f=!1,this.showTips(u.defaultText,!0,f)):(c.f=!1,this.hideTips("")),this.updateTimeText(f),this.updateThumbnails(c.now),this.updateLinePos(e,i)}}},{key:"setTimeContent",value:function(e){this.timeStr=e}},{key:"updateThumbnails",value:function(e){var i=this.player,a=this.videoPreview,s=this.config,l=i.plugins.thumbnail;if(l&&l.usable){this.thumbnail&&l.update(this.thumbnail,e,s.width,s.height);var u=a&&a.getBoundingClientRect();this.videothumbnail&&l.update(this.videothumbnail,e,u.width,u.height)}}},{key:"registerThumbnail",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if($.device!=="mobile"){var i=this.player,a=this.config,s=i.getPlugin("thumbnail");if(s&&s.setConfig(e),!s||!s.usable||!a.isShowThumbnail){h.addClass(this.root,"short-line no-thumbnail");return}else h.removeClass(this.root,"short-line no-thumbnail");a.mode==="short"&&h.addClass(this.root,"short-line"),this._hasThumnail=!0;var l=this.find(".xg-spot-thumbnail");this.thumbnail=s.createThumbnail(l,"progress-thumbnail"),a.isShowCoverPreview&&(this.videoPreview=h.createDom("xg-video-preview","",{},"xgvideo-preview"),i.root.appendChild(this.videoPreview),this.videothumbnail=s.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(e,i){var a=this.player.plugins.progress,s=this.player,l=a.root.getBoundingClientRect().width,u=s.duration/l*6;return e+i>s.duration&&(i=s.duration-e),e/s.duration*100,i/s.duration,{left:e/s.duration*100,width:i/s.duration*100,isMini:i<u}}},{key:"showDot",value:function(e){var i=this.findDot(e);if(i){var a=this.root.getBoundingClientRect(),s=a.width,l=i.time/this.player.duration*s;this.updatePosition(l,s,i.time)}}},{key:"focusDot",value:function(e,i){e&&(i||(i=e.getAttribute("data-id")),h.addClass(e,"active"),this._activeDotId=i)}},{key:"blurDot",value:function(e){if(!e){var i=this._activeDotId;e=this.getDotDom(i)}e&&(h.removeClass(e,"active"),this._activeDotId=null)}},{key:"showTips",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";h.addClass(this.root,"no-timepoint"),e&&(h.addClass(this.find(".xg-spot-content"),"show-text"),i&&this.config.mode==="production"?(h.addClass(this.root,"product"),this.tipText.textContent=e):(h.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?e:"".concat(a," ").concat(e)))}},{key:"hideTips",value:function(){h.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",h.removeClass(this.find(".xg-spot-content"),"show-text"),h.removeClass(this.root,"product")}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(e){h.removeClass(this.root,"hide")}},{key:"enable",value:function(){var e=this.config,i=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&e.isShowThumbnail&&this.registerThumbnail(i.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var e=this,i=this.player.plugins.progress;i&&Object.keys(xt).map(function(a){i.removeCallBack(a,e[xt[a]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return $.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info hide '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),n}(Q),Id=function(r){j(n,r);var o=V(n);function n(t){var e;return O(this,n),e=o.call(this,t),e.ratio=1,e.interval=null,e._preloadMark={},e}return R(n,[{key:"afterCreate",value:function(){var e=this;this.usable&&this.initThumbnail(),this.on([at],function(){var i=e.config,a=i.pic_num,s=i.interval;e.usable&&(e.interval=s>0?s:Math.round(e.player.duration*1e3/a)/1e3)})}},{key:"setConfig",value:function(e){var i=this;if(e){var a=Object.keys(e);a.length<1||(a.forEach(function(s){i.config[s]=e[s]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var e=this.config,i=e.urls,a=e.pic_num;return i&&i.length>0&&a>0}},{key:"initThumbnail",value:function(){var e=this.config,i=e.width,a=e.height,s=e.pic_num,l=e.interval;this.ratio=i/a*100,this.interval=l||Math.round(this.player.duration/s),this._preloadMark={}}},{key:"getUrlByIndex",value:function(e){return e>=0&&e<this.config.urls.length?this.config.urls[e]:""}},{key:"preload",value:function(e){var i=this;if(!this._preloadMark[e]){var a=this.config.urls,s=a.length,l=[];e>0&&l.push(e-1),l.push(e),e>0&&e<s-1&&l.push(e+1),l.map(function(u){!i._preloadMark[u]&&u>=0&&u<s&&(i._preloadMark[u]=1,h.preloadImg(a[u],function(){i._preloadMark[u]=2}))})}}},{key:"getPosition",value:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=this.config,l=s.pic_num,u=s.row,c=s.col,f=s.width,d=s.height;this.interval=Math.round(this.player.duration/l);var g=Math.ceil(e/this.interval);g=g>l?l:g;var p=g<u*c?0:Math.ceil(g/(u*c))-1,v=g-p*(c*u),y=v>0?Math.ceil(v/c)-1:0,T=v>0?v-y*c-1:0,k=0,C=0;if(i&&a){var F=i/a;F<f/d?(C=a,k=C*(f/d)):(k=i,C=k/(f/d))}else a?i||(C=a||d,k=C*(f/d)):(k=i||f,C=k/(f/d));var N=this.getUrlByIndex(p);return{urlIndex:p,rowIndex:y,colIndex:T,url:N,height:C,width:k,style:{backgroundImage:"url(".concat(N,")"),backgroundSize:"".concat(k*c,"px auto"),backgroundPosition:"-".concat(T*k,"px -").concat(y*C,"px"),width:"".concat(k,"px"),height:"".concat(C,"px")}}}},{key:"update",value:function(e,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",u=this.config,c=u.pic_num,f=u.urls;if(!(c<=0||!f||f.length===0)){var d=this.getPosition(i,a,s);this.preload(d.urlIndex),Object.keys(d.style).map(function(g){e.style[g]=d.style[g]}),Object.keys(l).map(function(g){e.style[g]=l[g]})}}},{key:"changeConfig",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(e)}},{key:"createThumbnail",value:function(e,i){var a=h.createDom("xg-thumbnail","",{},"thumbnail ".concat(i));return e&&e.appendChild(a),a}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),n}(Q);function bn(r){return r?"background:".concat(r,";"):""}var Ad=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},i=arguments.length>1?arguments[1]:void 0;!i||!this.root||(e.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(e.cached/i*100,"%")),e.played&&(this.find("xg-mini-progress-played").style.width="".concat(e.played/i*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress)){var e=this.playerConfig.commonStyle,i={cached:bn(e.cachedColor),played:bn(e.playedColor),progress:bn(e.progressColor)};return'<xg-mini-progress class="xg-mini-progress" style="'.concat(i.progress,`">
    <xg-mini-progress-cache class="xg-mini-progress-cache" style="`).concat(i.cached,`"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played" style="`).concat(i.played,`"></xg-mini-progress-played>
    </xg-mini-progress>`)}}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),n}(Q),Pt={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function Dd(){try{return parseInt(window.performance.now(),10)}catch(r){return new Date().getTime()}}function Ld(){try{var r=document.createElement("canvas").getContext;return!!r}catch(o){return!1}}var fi=null,Od=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"onLoadedData",function(s){t.player&&(t._frameCount=t.config.startFrameCount,t.stop(),t.renderOnTimeupdate(s),t.off(Ie,t.renderOnTimeupdate),t.on(Ie,t.renderOnTimeupdate))}),_(b(t),"onVisibilitychange",function(s){document.visibilityState==="visible"?t._checkIfCanStart()&&t.start():document.visibilityState==="hidden"&&t.stop()}),_(b(t),"renderOnTimeupdate",function(s){if(t._frameCount>0)t.renderOnce(),t._frameCount--;else{t._isLoaded=!0,t.off(Ie,t.renderOnTimeupdate);var l=t.config.startInterval;!t.player.paused&&t._checkIfCanStart()&&t.start(0,l)}}),_(b(t),"start",function(s,l){var u=t.player.video,c=Dd(),f=t.checkVideoIsSupport(u);!f||!t.canvasCtx||(l||(l=t.interval),t.stop(),u.videoWidth&&u.videoHeight&&(t.videoPI=u.videoHeight>0?parseInt(u.videoWidth/u.videoHeight*100,10):0,(t.config.mode===Pt.REAL_TIME||c-t.preTime>=l)&&(u&&u.videoWidth&&t.update(f,t.videoPI),t.preTime=c)),t.frameId=t._loopType==="timer"?h.setTimeout(b(t),t.start,l):h.requestAnimationFrame(t.start))}),_(b(t),"stop",function(){t.frameId&&(t._loopType==="timer"?h.clearTimeout(b(t),t.frameId):h.cancelAnimationFrame(t.frameId),t.frameId=null)}),t}return R(n,[{key:"afterCreate",value:function(){var e=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),n.isSupport||(this.config.disable=!0);var i=this.config,a=i.disable,s=i.mode,l=i.frameRate;a||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/l,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this._loopType=this.config.mode!==Pt.REAL_TIME&&this.interval>=1e3?"timer":"animation",this.once(ji,function(){e.player&&(e.init(),e.renderByPoster(),e.player.paused||e.start())}),s!==Pt.POSTER&&(s!==Pt.FIRST_FRAME&&(this.on(Bt,function(){e.stop()}),this.on(Ee,function(){var u=e.config.startInterval;e._checkIfCanStart()&&e.start(0,u)}),this.on(Ft,function(){e.stop()})),this.on(Ye,this.onLoadedData),this.on(Wn,function(){e._isLoaded=!1,e.stop()}),document.addEventListener("visibilitychange",this.onVisibilitychange)))}},{key:"setConfig",value:function(e){var i=this;Object.keys(e).forEach(function(a){a==="root"&&e[a]!==i.config[a]?i.reRender(e[a]):a==="frameRate"?i.interval=parseInt(1e3/e[a],10):a==="disable"&&e[a]&&i.stop(),i.config[a]=e[a]})}},{key:"init",value:function(e){var i=this.player,a=this.config;this.canvasFilter=n.supportCanvasFilter();try{var s=e||a.root;s||(s=a.isInnerRender&&i.innerContainer||i.root),s.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(a.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=s.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=a.filter,this.canvas.style.webkitFilter=a.filter),this.mask=this.find("xgmask"),a.addMask&&(this.mask.style.background=a.maskBg),this.canvasCtx=this.canvas.getContext("2d")}catch(l){K.logError("plugin:DynamicBg",l)}}},{key:"reRender",value:function(e){var i=this.config.disable;if(!(!i&&!this.root)){this.stop();var a=this.root?this.root.parentElement:null;if(a!==e&&a.removeChild(this.root),!e){this.root=null;return}this.init(e),this.renderOnce();var s=this.config.startInterval;this._checkIfCanStart()&&this.start(0,s)}}},{key:"checkVideoIsSupport",value:function(e){if(!e)return null;var i=e&&e instanceof window.HTMLVideoElement?e:e.canvas?e.canvas:e.flyVideo?e.flyVideo:null;if(i&&!($.browser==="safari"&&h.isMSE(i)))return i;var a=i?i.tagName.toLowerCase():"";return a==="canvas"||a==="img"?i:null}},{key:"renderByPoster",value:function(){var e=this.playerConfig.poster;if(e){var i=h.typeOf(e)==="String"?e:h.typeOf(e.poster)==="String"?e.poster:null;this.updateImg(i)}}},{key:"_checkIfCanStart",value:function(){var e=this.config.mode;return this._isLoaded&&!this.player.paused&&e!==Pt.FIRST_FRAME&&e!==Pt.POSTER}},{key:"renderOnce",value:function(){var e=this.player.video;if(!(!e.videoWidth||!e.videoHeight)){this.videoPI=parseInt(e.videoWidth/e.videoHeight*100,10);var i=this.checkVideoIsSupport(e);i&&this.update(i,this.videoPI)}}},{key:"updateImg",value:function(e){var i=this;if(e){var a=this.canvas.getBoundingClientRect(),s=a.width,l=a.height,u=new window.Image;u.onload=function(){if(!(!i.canvas||i.frameId||i.isStart)){i.canvas.height=l,i.canvas.width=s;var c=parseInt(s/l*100,10);i.update(u,c),u=null}},u.src=e}}},{key:"update",value:function(e,i){if(!(!this.canvas||!this.canvasCtx||!i))try{var a=this._pos,s=this.config,l=this.canvas.getBoundingClientRect(),u=l.width,c=l.height;if(u!==a.width||c!==a.height||a.pi!==i){var f=parseInt(u/c*100,10);a.pi=i,a.width!==u&&(a.width=this.canvas.width=u),a.height!==c&&(a.height=this.canvas.height=c);var d=c,g=u;f<i?g=parseInt(c*i/100,10):f>i&&(d=parseInt(u*100/i,10)),a.rwidth=g*s.multiple,a.rheight=d*s.multiple,a.x=(u-a.rwidth)/2,a.y=(c-a.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=s.filter),this.canvasCtx.drawImage(e,a.x,a.y,a.rwidth,a.rheight)}catch(p){K.logError("plugin:DynamicBg",p)}}},{key:"destroy",value:function(){this.stop(),document.removeEventListener("visibilitychange",this.onVisibilitychange),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,startInterval:0,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof fi=="boolean"||(fi=Ld()),fi}},{key:"supportCanvasFilter",value:function(){return!($.browser==="safari"||$.browser==="firefox")}}]),n}(Q),Rd={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}},Ut="info",_n=ro,Md=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"_recordUserActions",function(s){var l=t._getTime(),u=Object.assign({},s,{msg:s.msg||s.action});t._stats[Ut].push(se(se({type:"userAction"},l),{},{payload:u}))}),_(b(t),"_onReset",function(){t.reset()}),_(b(t),"_recordInfo",function(s){t.info(s)}),_(b(t),"_downloadStats",function(){var s=t.getStats(),l=new Blob([JSON.stringify(s)],{type:"application/json"}),u=window.URL.createObjectURL(l),c=document.createElement("a");c.style.display="none",c.href=u,c.download="player.txt",c.disabled=!1,c.click()}),t}return R(n,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(Di,this._recordUserActions),this.on(_n.STATS_INFO,this._recordInfo),this.on(_n.STATS_DOWNLOAD,this._downloadStats),this.on(_n.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(e){e.profile?this._infoProfile(e):this._info(e)}},{key:"_info",value:function(e){var i=this._getTime();this._stats[Ut].push(se(se({},i),{},{payload:e}))}},{key:"_infoProfile",value:function(e){if(e&&e.startMs){var i=Date.now(),a=i-e.startMs,s=se({cat:"function",dur:a,name:e.name||e.msg,ph:"X",pid:0,tid:0,ts:e.startMs,profile:!0},e);this._info(s)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var e;this._stats=(e={},_(e,Ut,[]),_(e,"media",{}),e)}},{key:"getStats",value:function(){for(var e=this.player,i=e.media,a=[],s=0;s<i.buffered.length;s++)a.push({start:i.buffered.start(s),end:i.buffered.end(s)});var l={currentTime:i.currentTime,readyState:i.readyState,buffered:a,paused:i.paused,ended:i.ended};return this._stats.media=l,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var e=this._stats[Ut],i=e.map(function(a){var s=a.payload.data,l="";try{s instanceof Error?l=s.msg:s!==void 0&&(l=JSON.stringify(s))}catch(u){console.log("err",u)}return"[".concat(a.timeFormat,"] : ").concat(a.payload.msg," ").concat(l," ")});return i}},{key:"_getProfile",value:function(){var e={traceEvents:[]},i=this._stats[Ut];return i.forEach(function(a){a.payload.profile&&e.traceEvents.push(a.payload)}),e}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),n}(rt),go=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"onGapJump",function(){var s=b(t),l=s.player,u=s.config;if(l.media.readyState!==HTMLMediaElement.HAVE_NOTHING){if(l.media.seeking){if(!t.seekingEventReceived)return}else t.seekingEventReceived=!1;if(!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){var c=l.media.buffered,f=u.smallGapLimit||.5,d=u.gapDetectionThreshold||.3,g=l.media.currentTime,p=t._getIndex(c,g,d);if(!(p===null||p===0)){console.log("GapJump  bufferRange ",c.start(p),c.end(p));var v=c.start(p)+.1,y=l.media.duration;if(!(v>y)){var T=v-g,k=T<=f;T<n.BROWSER_GAP_TOLERANCE||k&&(u.useGapJump!==!1&&(l.media.currentTime=t.isSafari?v+.1:v),t.player&&t.player.emit("detectGap"),console.log("gapJump gapIndex",p," isGapSamll:",k," currentTime:",l.media.currentTime," jumpSize:",g-l.media.currentTime),v!==.08&&l&&l.emit("log",{type:"oneevent",end_type:"gap",vid:l.config.vid,ext:{video_postion:Math.floor(v*1e3)}}))}}}}}),t}return R(n,[{key:"afterCreate",value:function(){var e=this,i=this.config.useGapJump;i!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(ti,this.onGapJump),this.on(Ee,function(){e.hasPlayed=!0}),this.on(Ui,function(){e.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(e,i,a){if(!e||!e.length||e.length===1&&e.end(0)-e.start(0)<1e-6)return null;for(var s=this._getBuffered(e),l=null,u=0;u<s.length;u++){var c=s[u];if(c.start>i&&(u===0||s[u-1].end-i<=a)){l=u;break}}return l}},{key:"_getBuffered",value:function(e){if(!e)return[];for(var i=[],a=0;a<e.length;a++)i.push({start:e.start(a),end:e.end(a)});return i}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),n}(Q);go.BROWSER_GAP_TOLERANCE=.001;var Nd=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"onWaiting",function(){var s=b(t),l=s.config;t.jumpCnt>l.jumpCntMax||t.timer||l.useWaitingTimeoutJump===!1||(t.timer=setTimeout(t.onJump,l.waitingTime*1e3))}),_(b(t),"onJump",function(){var s=b(t),l=s.player,u=s.config;if(clearTimeout(t.timer),t.timer=null,!(t.jumpCnt>u.jumpCntMax||u.useWaitingTimeoutJump===!1)&&!(l.media.paused&&l.media.currentTime!==0&&t.hasPlayed)){t.jumpSize=u.jumpSize*(t.jumpCnt+1),t.jumpCnt===u.jumpSize&&t.jumpSize<6&&(t.jumpSize=6);var c=l.currentTime+t.jumpSize,f=l.media.duration;c>f||(console.log("waitintTimeout, currentTime:",l.currentTime,", jumpTo:",c),t.jumpCnt++,l.currentTime=c)}}),t}return R(n,[{key:"afterCreate",value:function(){var e=this,i=this.config,a=i.useWaitingTimeoutJump,s=i.jumpSize;a!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=s,this.on(ti,this.onWaiting),this.on([Vn,Ge],function(){clearTimeout(e.timer),e.timer=null,e.jumpSize=e.config.jumpSize}),this.on(Ee,function(){e.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),n}(Q),It="cdn",hi=["cdn"],Fd=function(r){j(n,r);var o=V(n);function n(){var t;O(this,n);for(var e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return t=o.call.apply(o,[this].concat(i)),_(b(t),"getSpeed",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:It;if(!t.speedListCache||!t.speedListCache[s]||t.speedListCache[s].length<=0)return 0;var l=0;return t.speedListCache[s].map(function(u){l+=u}),Math.floor(l/t.speedListCache[s].length)}),_(b(t),"startTimer",function(){h.isMSE(t.player.video)||(t.initSpeedList(),t.cnt=0,t.timer=setTimeout(t.testSpeed,t.config.testTimeStep))}),_(b(t),"initSpeedList",function(){t.speedListCache={},hi.forEach(function(s){t.speedListCache[s]=[]})}),_(b(t),"_onRealSpeedChange",function(s){s.speed&&t.appendList(s.speed,s.type||It)}),_(b(t),"testSpeed",function(){if(clearTimeout(t.timer),t.timer=null,!(!t.player||!t.config.openSpeed)){var s=t.config,l=s.url,u=s.loadSize,c=s.testCnt,f=s.testTimeStep,d=l+(l.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(t.cnt>=c)){t.cnt++;try{var g=new Date().getTime(),p=null,v=new XMLHttpRequest;t.xhr=v,v.open("GET",d);var y={},T=Math.floor(Math.random()*10);y.Range="bytes="+T+"-"+(u+T),y&&Object.keys(y).forEach(function(k){v.setRequestHeader(k,y[k])}),v.onreadystatechange=function(){if(v.readyState===4){t.xhr=null,p=new Date().getTime();var k=v.getResponseHeader("Content-Length")/1024*8,C=Math.round(k*1e3/(p-g));t.appendList(C),t.timer=setTimeout(t.testSpeed,f)}},v.send()}catch(k){console.error(k)}}}}),_(b(t),"appendList",function(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:It;if(!(!t.speedListCache||!t.speedListCache[l])){var u=t.config.saveSpeedMax;t.speedListCache[l].length>=u&&t.speedListCache[l].shift(),t.speedListCache[l].push(s);var c=b(t),f=c.player;f&&(l===It?f.realTimeSpeed=s:f[t.getSpeedName("realTime",l)]=s),t.updateSpeed(l)}}),_(b(t),"updateSpeed",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:It,l=t.getSpeed(s),u=b(t),c=u.player;if(c)if(s===It)(!c.avgSpeed||l!==c.avgSpeed)&&(c.avgSpeed=l,c.emit(An,{speed:l,realTimeSpeed:c.realTimeSpeed}));else{var f=t.getSpeedName("avg",s);(!c[f]||l!==c[f])&&(c[f]=l,c.emit(An,{speed:l,realTimeSpeed:c.realTimeSpeed}))}}),t}return R(n,[{key:"afterCreate",value:function(){var e=this.config,i=e.openSpeed,a=e.addSpeedTypeList;(a==null?void 0:a.length)>0&&hi.push.apply(hi,De(a)),this.initSpeedList(),this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,i&&this.on([Ye,xi],this.startTimer)}},{key:"getSpeedName",value:function(e,i){return e+"Speed"+i.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(e){if(this.config.openSpeed=e,!e&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var e=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([Ye,xi],this.startTimer),hi.forEach(function(i){e.speedListCache&&e.speedListCache[i]&&(e.speedListCache[i]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),n}(Q),Bd=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n,[{key:"afterCreate",value:function(){var e=this,i=this.player,a=this.config;if(this.timer=null,this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[],!a.disabled){var s=i.media.getVideoPlaybackQuality;s&&(this.on(Ee,function(){e._startTick()}),this.on(Ft,function(){e._stopTick()}),this.on(vt,function(){e._stopTick()}),this.on(Bt,function(){e._stopTick()}))}}},{key:"_startTick",value:function(){var e=this;this._stopTick(),this._timer=setTimeout(function(){e._checkDecodeFPS(),e._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkStuck",value:function(e,i,a,s){var l=this.player.media,u=document.hidden,c=l.paused;if(typeof u=="boolean"&&!u&&!c){for(var f=l.currentTime,d=l.buffered,g=!1,p=[],v=0;v<d.length;v++){var y=d.start(v),T=d.end(v);if(p.push({start:y,end:T}),y<=f&&f<=T-1){g=!0;break}}l.readyState===4&&g&&(this._currentStuckCount>this.config.stuckCount?(this.emit(ao,this._payload),this._reset()):e<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({bufs:p,currentTime:l.currentTime,curDecodedFrames:e,totalVideoFrames:i,droppedVideoFrames:a,checkInterval:s})):this._reset())}}},{key:"_reset",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_checkDecodeFPS",value:function(){if(this.player.media){var e=this.player.media.getVideoPlaybackQuality(),i=e.totalVideoFrames,a=e.droppedVideoFrames,s=performance.now();if(i&&this._lastCheckPoint){var l=i-this._lastDecodedFrames,u=s-this._lastCheckPoint;this._checkStuck(l,i,a,u)}this._lastDecodedFrames=i,this._lastCheckPoint=s}}},{key:"destroy",value:function(){this._stopTick()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),n}(Q);Ot.use(Rd);var Hd=R(function r(o,n){var t,e,i;O(this,r);var a=n&&n.isMobileSimulateMode==="mobile",s=n.isLive,l=s?[]:[id,Yh,Ad,Pd,td],u=[].concat(l,[Xh,ed,ld,dd,Cd,Td,md,yd,od,fd]),c=[Ph,Ih,Dh,zh,Lh,Sd,Ed,Id,Nh];this.plugins=[Md,Eh].concat(De(u),c,[go,Nd]);var f=a?"mobile":$.device;switch(f){case"pc":(t=this.plugins).push.apply(t,[Jr,mn,Qr,Fd,Bd]);break;case"mobile":(e=this.plugins).push.apply(e,[Vh]);break;default:(i=this.plugins).push.apply(i,[Jr,mn,Qr])}($.os.isIpad||f==="pc")&&this.plugins.push(Od),$.os.isIpad&&this.plugins.push(mn),this.ignores=[],this.i18n=[]}),Le=function(r){j(n,r);var o=V(n);function n(){return O(this,n),o.apply(this,arguments)}return R(n)}(Gi);_(Le,"defaultPreset",Hd);_(Le,"Util",h);_(Le,"Sniffer",$);_(Le,"Errors",Ei);_(Le,"Events",eh);_(Le,"Plugin",Q);_(Le,"BasePlugin",rt);_(Le,"I18N",Ot);_(Le,"STATE_CLASS",w);_(Le,"InstManager",uo);const Ud=Jt({__name:"VideoPlayer",props:{url:{type:String,default:"",required:!0},poster:{type:String,default:""}},setup(r,{expose:o}){const n=r,t=oe(),e=oe(),i=()=>{A(e)&&new Le(rr(je({autoplay:!1},n),{el:A(e)}))};return Ni(()=>{i()}),Be(()=>n,a=>fe(this,null,function*(){var s;yield gt(),a&&((s=A(t))==null||s.setConfig(a))}),{deep:!0}),Ko(()=>{var a;(a=A(t))==null||a.destroy()}),o({playerExpose:()=>A(t)}),(a,s)=>(la(),Yo("div",{ref_key:"videoEl",ref:e},null,512))}}),jd=Jt({__name:"VideoPlayerViewer",props:{show:{type:Boolean,default:!1},url:{type:String,default:"",required:!0},poster:{type:String,default:""},id:{type:String,default:""}},setup(r){const o=r,n=oe(o.show),t=()=>fe(this,null,function*(){n.value=!1,yield gt();const e=document.getElementById(o.id);e&&document.body.removeChild(e)});return(e,i)=>ua((la(),qo(A(Oo),{onClick:t},{default:Jo(()=>[ar("div",{class:"w-full h-full flex justify-center items-center relative",onClick:t},[ar("div",{class:"w-44px h-44px color-[#fff] bg-[var(--el-text-color-regular)] rounded-full border-[#fff] flex justify-center items-center cursor-pointer absolute top-40px right-40px",onClick:t},[D(A(Qe),{icon:"ep:close",size:24})]),D(A(Ud),{url:r.url,poster:r.poster},null,8,["url","poster"])])]),_:1},512)),[[Xo,n.value]])}});let ia=null;function Vd(r){if(!wo)return;const{url:o,poster:n}=r,t={},e=document.createElement("div"),i=So();e.id=i,t.url=o,t.poster=n,t.show=!0,t.id=i,document.body.appendChild(e),ia=D(jd,t),Zo(ia,e)}function Cn(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!sa(r)}const Wd=ra(),Jd=Jt({name:"Table",props:{pageSize:Z.number.def(10),currentPage:Z.number.def(1),showAction:Z.bool.def(!1),showOverflowTooltip:Z.bool.def(!0),columns:{type:Array,default:()=>[]},pagination:{type:Object,default:()=>{}},reserveSelection:Z.bool.def(!1),loading:Z.bool.def(!1),reserveIndex:Z.bool.def(!1),align:Z.string.validate(r=>["left","center","right"].includes(r)).def("left"),headerAlign:Z.string.validate(r=>["left","center","right"].includes(r)).def("left"),data:{type:Array,default:()=>[]},imagePreview:{type:Array,default:()=>[]},videoPreview:{type:Array,default:()=>[]},height:Z.oneOfType([Number,String]),maxHeight:Z.oneOfType([Number,String]),stripe:Z.bool.def(!1),border:Z.bool.def(!0),size:{type:String,validator:r=>["default","small","large"].includes(r)},fit:Z.bool.def(!0),showHeader:Z.bool.def(!0),highlightCurrentRow:Z.bool.def(!1),currentRowKey:Z.oneOfType([Number,String]),rowClassName:{type:[Function,String],default:""},rowStyle:{type:[Function,Object],default:()=>{}},cellClassName:{type:[Function,String],default:""},cellStyle:{type:[Function,Object],default:()=>{}},headerRowClassName:{type:[Function,String],default:""},headerRowStyle:{type:[Function,Object],default:()=>{}},headerCellClassName:{type:[Function,String],default:""},headerCellStyle:{type:[Function,Object],default:()=>{}},rowKey:Z.string.def("id"),emptyText:Z.string.def("暂無數據"),activeUID:Z.string.def(""),defaultExpandAll:Z.bool.def(!1),expandRowKeys:{type:Array,default:()=>[]},defaultSort:{type:Object,default:()=>({})},tooltipEffect:{type:String,default:"dark"},tooltipOptions:{type:Object,default:()=>({enterable:!0,placement:"top",showArrow:!0,hideAfter:200,popperOptions:{strategy:"fixed"}})},showSummary:Z.bool.def(!1),sumText:Z.string.def("Sum"),summaryMethod:{type:Function,default:()=>{}},spanMethod:{type:Function,default:()=>{}},selectOnIndeterminate:Z.bool.def(!0),indent:Z.number.def(16),lazy:Z.bool.def(!1),load:{type:Function,default:()=>{}},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children",label:"label"})},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:Z.bool.def(!1),flexible:Z.bool.def(!1),customContent:Z.bool.def(!1),cardBodyStyle:{type:Object,default:()=>({})},cardBodyClass:{type:String,default:""},cardWrapStyle:{type:Object,default:()=>({})},cardWrapClass:{type:String,default:""}},emits:["update:pageSize","update:currentPage","register","refresh"],setup(r,{attrs:o,emit:n,slots:t,expose:e}){const i=oe();Ni(()=>{const m=A(i);n("register",m==null?void 0:m.$parent,i)});const a=oe(r.pageSize),s=oe(r.currentPage),l=oe({}),u=oe({}),c=Rt(()=>{const m=je({},r);return Object.assign(m,A(u)),m}),f=(m={})=>{u.value=Object.assign(A(u),m),l.value=je({},m)},d=(m,x)=>{var I;const{columns:P}=A(c);for(const L of x||P)for(const H of m)L.field===H.field?Bo(L,H.path,H.value):(I=L.children)!=null&&I.length&&d(m,L.children)},g=(m,x)=>{const{columns:P}=A(c);x!==void 0?P.splice(x,0,m):P.push(m)},p=()=>{const{columns:m}=A(c);return m},v=m=>{const{columns:x}=A(c),P=x.findIndex(I=>I.field===m);P>-1&&x.splice(P,1)},y=()=>{n("refresh")},T=m=>{f({size:m})};e({setProps:f,setColumn:d,delColumn:v,addColumn:g,getColumn:p,elTableRef:i});const k=Rt(()=>Object.assign({small:!1,background:!1,pagerCount:7,layout:"sizes, prev, pager, next, jumper, ->, total",pageSizes:[10,20,30,40,50,100],disabled:!1,hideOnSinglePage:!1,total:10},A(c).pagination));Be(()=>A(c).pageSize,m=>{a.value=m}),Be(()=>A(c).currentPage,m=>{s.value=m}),Be(()=>a.value,m=>{n("update:pageSize",m)}),Be(()=>s.value,m=>{n("update:currentPage",m)});const C=Rt(()=>{const m=je(je({},o),A(c));return delete m.columns,delete m.data,delete m.align,m}),F=m=>{const{align:x,headerAlign:P,showOverflowTooltip:I,imagePreview:L,videoPreview:H}=A(c);return m.map(U=>{var Oe;if(U.show===!1)return null;const ee=je({},U);ee.children&&delete ee.children;const ye=U.children,be={default:(...Y)=>{var yt,st;const xe=Y[0];let ce=!1;return ce=L.some(qe=>qe===U.field)||H.some(qe=>qe===U.field),ye&&ye.length?F(ye):(yt=ee==null?void 0:ee.slots)!=null&&yt.default?ee.slots.default(...Y):U!=null&&U.formatter?(st=U==null?void 0:U.formatter)==null?void 0:st.call(U,xe.row,xe.column,_t(xe.row,U.field),xe.$index):ce?N(_t(xe.row,U.field),U.field):_t(xe.row,U.field)}};return(Oe=ee==null?void 0:ee.slots)!=null&&Oe.header&&(be.header=(...Y)=>ee.slots.header(...Y)),D(ii,ni({showOverflowTooltip:I,align:x,headerAlign:P},ee,{prop:U.field}),Cn(be)?be:{default:()=>[be]})})},N=(m,x)=>{const{imagePreview:P,videoPreview:I}=A(c);return D("div",{class:"flex items-center"},[P.includes(x)?D(Ho,{src:m,fit:"cover",class:"w-[100%]",lazy:!0,"preview-src-list":[m],"preview-teleported":!0},null):I.includes(x)?D(aa,{type:"primary",icon:D(Qe,{icon:"ep:video-play"},null),onClick:()=>{Vd({url:m})}},{default:()=>[es("预覽")]}):null])},E=m=>{const{columns:x,reserveIndex:P,pageSize:I,currentPage:L,align:H,headerAlign:U,showOverflowTooltip:ee,reserveSelection:ye,imagePreview:be,videoPreview:Oe}=A(c);return(m||x).map(Y=>{var xe;if(Y.show===!1)return null;if(Y.type==="index")return D(ii,{type:"index",index:Y.index?Y.index:ce=>ps(P,ce,I,L),align:Y.align||H,headerAlign:Y.headerAlign||U,label:Y.label,width:"65px",fixed:"left"},null);if(Y.type==="selection")return D(ii,{type:"selection",reserveSelection:ye,align:"center",headerAlign:"center",selectable:Y.selectable,width:"50px",fixed:"left"},null);{const ce=je({},Y);ce.children&&delete ce.children;const yt=Y.children,st={default:(...qe)=>{var er,tr;const bt=qe[0];let Qn=!1;return Qn=be.some(zi=>zi===Y.field)||Oe.some(zi=>zi===Y.field),yt&&yt.length?F(yt):(er=ce==null?void 0:ce.slots)!=null&&er.default?ce.slots.default(...qe):Y!=null&&Y.formatter?(tr=Y==null?void 0:Y.formatter)==null?void 0:tr.call(Y,bt.row,bt.column,_t(bt.row,Y.field),bt.$index):Qn?N(_t(bt.row,Y.field),Y.field):_t(bt.row,Y.field)}};return(xe=ce==null?void 0:ce.slots)!=null&&xe.header&&(st.header=(...qe)=>ce.slots.header(...qe)),D(ii,ni({showOverflowTooltip:ee,align:H,headerAlign:U},ce,{prop:Y.field}),Cn(st)?st:{default:()=>[st]})}})};return()=>{var P,I,L;const m={};Re(t,"empty")&&(m.empty=(...H)=>Re(t,"empty",H)),Re(t,"append")&&(m.append=(...H)=>Re(t,"append",H));const x=Re(t,"toolbar");return ua(D("div",null,[A(c).customContent?D("div",{class:"flex flex-wrap"},[(I=(P=A(c))==null?void 0:P.data)!=null&&I.length?(L=A(c))==null?void 0:L.data.map(H=>{const U={default:()=>Re(t,"content",H)};return Re(t,"content-header")&&(U.header=()=>Re(t,"content-header",H)),Re(t,"content-footer")&&(U.footer=()=>Re(t,"content-footer",H)),D(Ro,{shadow:"hover",class:A(c).cardWrapClass,style:A(c).cardWrapStyle,bodyClass:A(c).cardBodyClass,bodyStyle:A(c).cardBodyStyle},Cn(U)?U:{default:()=>[U]})}):D("div",{class:"flex flex-1 justify-center"},[D(Mo,{description:"暂無數據"},null)])]):D(oa,null,[D("div",{class:"flex justify-between mb-1"},[D("div",null,[x]),D("div",{class:"pt-2"},[A(c).showAction?D(xf,{activeUID:A(c).activeUID,columns:A(c).columns,"el-table-ref":i,onChangSize:T,onRefresh:y},null):null])]),D(No,ni({ref:i,data:A(c).data},A(C),{"header-cell-style":Wd.getIsDark?{color:"#CFD3DC","background-color":"#000"}:{color:"#000","background-color":"#f5f7fa"}}),je({default:()=>E()},m))]),A(c).pagination?D(Fo,ni({pageSize:a.value,"onUpdate:pageSize":H=>a.value=H,currentPage:s.value,"onUpdate:currentPage":H=>s.value=H,class:"mt-10px"},A(k)),null):void 0]),[[Qo("loading"),A(c).loading]])}}});export{Jd as _,qd as u};
//# sourceMappingURL=Table.vue_vue_type_script_lang-R3v9WsBF.js.map
