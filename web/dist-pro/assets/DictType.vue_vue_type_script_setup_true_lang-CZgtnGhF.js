var Y=Object.defineProperty;var z=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var E=(r,n,s)=>n in r?Y(r,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[n]=s,$=(r,n)=>{for(var s in n||(n={}))Z.call(n,s)&&E(r,s,n[s]);if(z)for(var s of z(n))ee.call(n,s)&&E(r,s,n[s]);return r};var c=(r,n,s)=>new Promise((C,y)=>{var D=u=>{try{w(s.next(u))}catch(p){y(p)}},k=u=>{try{w(s.throw(u))}catch(p){y(p)}},w=u=>u.done?C(u.value):Promise.resolve(u.value).then(D,k);w((s=s.apply(r,n)).next())});import{f as ae,h as te,i as le,j as se,k as oe}from"./dict-BKIVAwf4.js";import{u as ne,_ as ie}from"./Table.vue_vue_type_script_lang-Baw7Xmjh.js";import{d as re,I as ue,q as m,a0 as ce}from"./index-TVUJ5EGw.js";/* empty css                  *//* empty css               */import{_ as de}from"./Search.vue_vue_type_script_setup_true_lang-BR3CMH1C.js";import{_ as pe}from"./ContentWrap.vue_vue_type_script_setup_true_lang-BSPWmg2w.js";import{_ as fe}from"./Write.vue_vue_type_script_setup_true_lang-DcId0Ar6.js";import{_ as me}from"./Dialog.vue_vue_type_style_index_0_lang-DwvSpjk1.js";import{A as ge,n as ye,h as U,b as we}from"./element-plus-DaxMU9jX.js";import{l as _e,J as B,O as l,P as h,V as g,a as d,m as ve,p as be,R as i,u as t,B as F,W as M}from"./vue-chunks-DM5Q6aJS.js";const Ve=_e({__name:"DictType",emits:["updateDictTypeId"],setup(r,{emit:n}){const{t:s}=re(),{tableRegister:C,tableState:y,tableMethods:D}=ne({fetchDataApi:()=>c(this,null,function*(){const{pageSize:e,currentPage:a}=y,o=yield te($({page:t(a),limit:t(e)},t(x)));return{list:o.data||[],total:o.count||0}}),fetchDelApi:e=>c(this,null,function*(){const a=yield le(e);return a.code===200&&(yield V()),a.code===200})}),{dataList:k,loading:w,total:u,pageSize:p,currentPage:_}=y,{getList:v,delList:N,getElTableExpose:j}=D,q=B([{field:"id",label:"字典編號",width:"80px",show:!1,disabled:!1},{field:"dict_name",label:"字典名稱",show:!0,disabled:!0},{field:"dict_type",label:"字典類型",show:!0,disabled:!0,slots:{default:e=>{const a=Q=>c(this,null,function*(){const{copy:X}=ce();return yield X(Q),we.success("複製成功")}),o=e.row;return l(h,null,[l("span",{onClick:()=>a(o.dict_type)},[l(ue,{icon:"material-symbols:content-copy-rounded",class:"cursor-pointer"},null)]),l("span",null,[o.dict_type])])}}},{field:"disabled",label:"是否禁用",width:"120px",show:!0,slots:{default:e=>{const a=e.row;return l(h,null,[l(ge,{modelValue:!a.disabled,disabled:!0},null)])}}},{field:"remark",label:"備註",show:!1},{field:"create_datetime",label:"創建時間",show:!1},{field:"action",width:"120px",label:"操作",show:!0,slots:{default:e=>{const a=e.row;return l(h,null,[l(m,{type:"primary",link:!0,size:"small",onClick:()=>W(a)},{default:()=>[g("編輯")]}),l(m,{type:"danger",loading:R.value,link:!0,size:"small",onClick:()=>O(a)},{default:()=>[g("删除")]})])}}}]),J=B([{field:"dict_name",label:"字典名稱",colProps:{span:24},component:"Input",componentProps:{clearable:!1}},{field:"dict_type",label:"字典類型",colProps:{span:24},component:"Input",componentProps:{clearable:!1}}]),x=d({}),I=e=>{_.value=1,x.value=e,v()},R=d(!1),O=e=>c(this,null,function*(){R.value=!0,yield N(!0,[e.id]).finally(()=>{R.value=!1})}),f=d(!1),T=d(""),A=d(),b=d(""),L=d(),P=d(!1),W=e=>c(this,null,function*(){const a=yield ae(e.id);a&&(T.value="編輯字典類型",b.value="edit",A.value=a.data,f.value=!0)}),G=()=>{T.value="新增字典類型",b.value="add",A.value=void 0,f.value=!0},H=()=>c(this,null,function*(){const e=t(L),a=yield e==null?void 0:e.submit();if(a){P.value=!0;try{const o=d({});b.value==="add"?(o.value=yield se(a),o.value&&(f.value=!1,v())):b.value==="edit"&&(o.value=yield oe(a),o.value&&(f.value=!1,v()))}finally{P.value=!1}}}),S=n,K=e=>c(this,null,function*(){S("updateDictTypeId",e&&e.id)}),V=()=>c(this,null,function*(){const e=yield j();e==null||e.setCurrentRow(null),S("updateDictTypeId",null)});return(e,a)=>(ve(),be(h,null,[l(t(pe),null,{default:i(()=>[l(t(de),{schema:J,onReset:I,onSearch:I},null,8,["schema"]),l(t(ie),{"current-page":t(_),"onUpdate:currentPage":a[0]||(a[0]=o=>F(_)?_.value=o:null),"page-size":t(p),"onUpdate:pageSize":a[1]||(a[1]=o=>F(p)?p.value=o:null),showAction:"",activeUID:"type",columns:q,"default-expand-all":"",highlightCurrentRow:!0,"node-key":"id",data:t(k),loading:t(w),pagination:{total:t(u)},onRegister:t(C),onCurrentChange:K,onRefresh:t(v)},{toolbar:i(()=>[l(t(ye),{gutter:10},{default:i(()=>[l(t(U),{span:1.5},{default:i(()=>[l(t(m),{type:"primary",onClick:G},{default:i(()=>[g("新增字典類型")]),_:1})]),_:1}),l(t(U),{span:1.5},{default:i(()=>[l(t(m),{type:"danger",onClick:V},{default:i(()=>[g("清除選擇")]),_:1})]),_:1})]),_:1})]),_:1},8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),l(t(me),{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=o=>f.value=o),title:T.value,height:650},{footer:i(()=>[l(t(m),{type:"primary",loading:P.value,onClick:H},{default:i(()=>[g(M(t(s)("exampleDemo.save")),1)]),_:1},8,["loading"]),l(t(m),{onClick:a[2]||(a[2]=o=>f.value=!1)},{default:i(()=>[g(M(t(s)("dialogDemo.close")),1)]),_:1})]),default:i(()=>[l(fe,{ref_key:"writeRef",ref:L,"current-row":A.value},null,8,["current-row"])]),_:1},8,["modelValue","title"])],64))}});export{Ve as _};
