var f=(p,s,t)=>new Promise((c,l)=>{var m=e=>{try{r(t.next(e))}catch(o){l(o)}},u=e=>{try{r(t.throw(e))}catch(o){l(o)}},r=e=>e.done?c(e.value):Promise.resolve(e.value).then(m,u);r((t=t.apply(p,s)).next())});import{u as x,F as I}from"./useForm-8sSQvRCB.js";import{k as S,q as V,a2 as D,a3 as E}from"./index-TVUJ5EGw.js";import{u as k}from"./useValidator-D0Zw1fFG.js";import{b as g}from"./element-plus-DaxMU9jX.js";import{l as A,J as v,O as w,V as F,P as B,a as y,m as C,S as R,u as P}from"./vue-chunks-DM5Q6aJS.js";const j=A({__name:"Email",props:{tabId:S.number},setup(p){const{required:s}=k(),t=p,c=v([{field:"email_access",label:"郵箱帳號",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_password",label:"郵箱密碼",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_server",label:"郵箱服務器",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"email_port",label:"服務器端口",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"active",label:"",colProps:{span:24},formItemProps:{slots:{default:()=>w(B,null,[w(V,{loading:i.value,type:"primary",onClick:h},{default:()=>[F("立即提交")]})])}}}]),l=v({email_access:[s()],email_password:[s()],email_port:[s()],email_server:[s()]}),{formRegister:m,formMethods:u}=x(),{setValues:r,getFormData:e,getElFormExpose:o}=u;let b=y({});const d=()=>f(this,null,function*(){const a=yield E({tab_id:t.tabId});if(a){yield r(a.data),b.value=a.data;const n=yield o();n==null||n.clearValidate()}}),i=y(!1),h=()=>f(this,null,function*(){const a=yield o();if(yield a==null?void 0:a.validate()){const _=yield e();if(i.value=!0,!_)return i.value=!1,g.error("未獲取到數據");try{if(yield D(_))return d(),g.success("更新成功")}finally{i.value=!1}}});return d(),(a,n)=>(C(),R(P(I),{rules:l,onRegister:P(m),schema:c},null,8,["rules","onRegister","schema"]))}});export{j as _};
