var T=Object.defineProperty;var S=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var P=(l,a,e)=>a in l?T(l,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):l[a]=e,k=(l,a)=>{for(var e in a||(a={}))L.call(a,e)&&P(l,e,a[e]);if(S)for(var e of S(a))N.call(a,e)&&P(l,e,a[e]);return l};var V=(l,a,e)=>new Promise((d,c)=>{var w=r=>{try{m(e.next(r))}catch(s){c(s)}},b=r=>{try{m(e.throw(r))}catch(s){c(s)}},m=r=>r.done?d(r.value):Promise.resolve(r.value).then(w,b);m((e=e.apply(l,a)).next())});import{r as U,d as E,q as C}from"./index-C1ugVV0M.js";import{u as F,_ as J}from"./Table.vue_vue_type_script_lang-CinN-tID.js";import{_ as M}from"./Search.vue_vue_type_script_setup_true_lang-BvwzElKB.js";import{_ as W}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DchMNHb7.js";import{_ as X}from"./Detail.vue_vue_type_script_setup_true_lang-BssAxNZU.js";import{_ as j}from"./Dialog.vue_vue_type_style_index_0_lang-B2Mf8MAr.js";import{l as G,J as $,O as p,V as z,P as q,a as u,m as A,p as H,R as h,u as t,B,W as K,S as Q,X as Y}from"./vue-chunks-DM5Q6aJS.js";import"./element-plus-DaxMU9jX.js";/* empty css                       *//* empty css                 *//* empty css                   *//* empty css                        *//* empty css               */import"./el-tooltip-l0sNRNKZ.js";/* empty css                  */import"./useForm-wf4P-Ogs.js";/* empty css               *//* empty css                          *//* empty css                        *//* empty css                       *//* empty css                *//* empty css                  *//* empty css                   *//* empty css                    */import"./style.css_vue_type_style_index_0_src_true_lang-q8G9uCLO.js";import"./wang-editor-kNnY1XhY.js";/* empty css                   *//* empty css                    *//* empty css                        *//* empty css                *//* empty css                         */import"./_Uint8Array-DKqHwQen.js";import"./useIcon-DYAT9UAl.js";import"./Descriptions-BvgUrdiX.js";const Z=l=>U.get({url:"/vadmin/record/operations",params:l}),Ie=G({name:"SystemRecordOperation",__name:"Operation",setup(l){const{t:a}=E(),{tableRegister:e,tableState:d,tableMethods:c}=F({fetchDataApi:()=>V(this,null,function*(){const{pageSize:n,currentPage:o}=d,i=yield Z(k({page:t(o),limit:t(n)},t(g)));return{list:i.data||[],total:i.count||0}})}),{dataList:w,loading:b,total:m,pageSize:r,currentPage:s}=d,{getList:_}=c,D=$([{field:"user_id",label:"操作人編號",show:!0,disabled:!0,width:"100px"},{field:"user_name",label:"操作人",show:!0,disabled:!0,width:"100px"},{field:"telephone",label:"帳號",show:!0,disabled:!0,width:"130px"},{field:"request_method",label:"請求方法",show:!0,disabled:!0,width:"100px"},{field:"client_ip",label:"客户端地址",width:"130px",show:!0,disabled:!0},{field:"tags",label:"標籤",width:"130px",show:!0},{field:"summary",label:"操作内容",show:!0},{field:"description",label:"描述",show:!1},{field:"status_code",label:"操作狀態",show:!0,width:"100px"},{field:"route_name",label:"接口函數",show:!1,width:"150px"},{field:"api_path",label:"接口地址",show:!1},{field:"params",label:"請求参數",show:!1},{field:"browser",label:"瀏覽器",show:!0,width:"150px"},{field:"system",label:"系统",show:!1,width:"150px"},{field:"process_time",label:"總耗時",show:!0},{field:"create_datetime",label:"操作時間",show:!0},{field:"action",width:"100px",show:!0,label:"操作",slots:{default:n=>{const o=n.row;return p(q,null,[p(C,{type:"primary",link:!0,onClick:()=>O(o,"detail")},{default:()=>[z("詳情")]})])}}}]),I=$([{field:"telephone",label:"帳號",component:"Input",componentProps:{clearable:!1}},{field:"request_method",label:"請求方法",component:"Input",componentProps:{clearable:!1}},{field:"summary",label:"操作内容",component:"Input",componentProps:{clearable:!1}}]),g=u({}),v=n=>{s.value=1,g.value=n,_()},f=u(!1),x=u(""),y=u(),R=u(""),O=(n,o)=>{x.value=a("exampleDemo.detail"),R.value=o,y.value=n,f.value=!0};return(n,o)=>(A(),H(q,null,[p(t(W),null,{default:h(()=>[p(t(M),{schema:I,onReset:v,onSearch:v},null,8,["schema"]),p(t(J),{"current-page":t(s),"onUpdate:currentPage":o[0]||(o[0]=i=>B(s)?s.value=i:null),"page-size":t(r),"onUpdate:pageSize":o[1]||(o[1]=i=>B(r)?r.value=i:null),showAction:"",columns:D,"node-key":"id",data:t(w),loading:t(b),pagination:{total:t(m)},onRegister:t(e),onRefresh:t(_)},null,8,["current-page","page-size","columns","data","loading","pagination","onRegister","onRefresh"])]),_:1}),p(t(j),{modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=i=>f.value=i),title:x.value,width:"800px"},{footer:h(()=>[p(t(C),{onClick:o[2]||(o[2]=i=>f.value=!1)},{default:h(()=>[z(K(t(a)("dialogDemo.close")),1)]),_:1})]),default:h(()=>[R.value==="detail"?(A(),Q(X,{key:0,"current-row":y.value},null,8,["current-row"])):Y("",!0)]),_:1},8,["modelValue","title"])],64))}});export{Ie as default};
