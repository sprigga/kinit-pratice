var u=(c,t,a)=>new Promise((m,p)=>{var i=e=>{try{n(a.next(e))}catch(o){p(o)}},d=e=>{try{n(a.throw(e))}catch(o){p(o)}},n=e=>e.done?m(e.value):Promise.resolve(e.value).then(i,d);n((a=a.apply(c,t)).next())});import{u as x,F as I}from"./useForm-wf4P-Ogs.js";import{k as S,q as k,a2 as A,a3 as V}from"./index-C1ugVV0M.js";import{u as D}from"./useValidator-CSahUiaF.js";import{b as y}from"./element-plus-DaxMU9jX.js";import{l as E,J as P,O as g,V as F,P as B,a as v,m as C,S as M,u as w}from"./vue-chunks-DM5Q6aJS.js";const $=E({__name:"SMS",props:{tabId:S.number},setup(c){const{required:t}=D(),a=c,m=P([{field:"sms_access_key",label:"AccessKey",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_access_key_secret",label:"AccessKeySecret",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_sign_name_1",label:"短信驗證碼簽名",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_template_code_1",label:"短信驗證碼模板",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_sign_name_2",label:"重置密碼簽名",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_template_code_2",label:"重置密碼模板",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_send_interval",label:"發送頻率",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"sms_valid_time",label:"有效時間",colProps:{span:24},component:"Input",componentProps:{style:{width:"500px"}}},{field:"active",label:"",colProps:{span:24},formItemProps:{slots:{default:()=>g(B,null,[g(k,{loading:r.value,type:"primary",onClick:h},{default:()=>[F("立即提交")]})])}}}]),p=P({sms_access_key:[t()],sms_access_key_secret:[t()],sms_send_interval:[t()],sms_valid_time:[t()]}),{formRegister:i,formMethods:d}=x(),{setValues:n,getFormData:e,getElFormExpose:o}=d;let b=v({});const _=()=>u(this,null,function*(){const s=yield V({tab_id:a.tabId});if(s){yield n(s.data),b.value=s.data;const l=yield o();l==null||l.clearValidate()}}),r=v(!1),h=()=>u(this,null,function*(){const s=yield o();if(yield s==null?void 0:s.validate()){const f=yield e();if(r.value=!0,!f)return r.value=!1,y.error("未獲取到數據");try{if(yield A(f))return _(),y.success("更新成功")}finally{r.value=!1}}});return _(),(s,l)=>(C(),M(w(I),{rules:p,onRegister:w(i),schema:m},null,8,["rules","onRegister","schema"]))}});export{$ as _};
