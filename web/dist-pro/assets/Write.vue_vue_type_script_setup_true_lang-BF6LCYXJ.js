var p=(a,c,e)=>new Promise((l,n)=>{var i=t=>{try{s(e.next(t))}catch(r){n(r)}},m=t=>{try{s(e.throw(t))}catch(r){n(r)}},s=t=>t.done?l(t.value):Promise.resolve(t.value).then(i,m);s((e=e.apply(a,c)).next())});import{u as b,F as w}from"./useForm-DBy6iRN_.js";import{u as h}from"./useValidator-3LOiG8nN.js";import{u}from"./dict-BekaM8XJ.js";import{l as D,J as f,b as Y,m as v,S as g,u as _}from"./vue-chunks-DM5Q6aJS.js";const R=D({__name:"Write",props:{currentRow:{type:Object,default:()=>null}},setup(a,{expose:c}){const{required:e}=h(),l=a,n=f([{field:"visit_period",label:"拜訪時段",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"name",label:"業務姓名",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"customer_type",label:"拜訪店類型",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"customer_name",label:"客戶名稱／交談對象",colProps:{span:12},component:"Input",componentProps:{clearable:!0,options:[]}},{field:"resolved_date",label:"結案時間",component:"DatePicker",colProps:{span:12},componentProps:{style:{width:"100%"},type:"date",format:"YYYY-MM-DD",valueFormat:"YYYY-MM-DD"},formItemProps:{rules:[e()]}},{field:"purpose",label:"拜訪目的",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"content",label:"拜訪內容／業界動態",colProps:{span:24},component:"Input",componentProps:{type:"textarea",rows:4,style:{width:"100%"}}},{field:"issue_type",label:"問題類型",colProps:{span:12},component:"Select",componentProps:{style:{width:"100%"}},optionApi:()=>p(this,null,function*(){return(yield u().getDictObj(["crm_record_issue_type"])).crm_record_issue_type}),formItemProps:{rules:[e()]}},{field:"assigned_user",label:"指派人員",colProps:{span:12},component:"Select",componentProps:{style:{width:"100%"}},optionApi:()=>p(this,null,function*(){return(yield u().getDictObj(["crm_record_assigned_user"])).crm_record_assigned_user}),formItemProps:{rules:[e()]}},{field:"estimated_reply_date",label:"指定回覆時間",component:"DatePicker",colProps:{span:12},componentProps:{style:{width:"100%"},type:"datetime",format:"YYYY-MM-DD HH:mm:ss",valueFormat:"YYYY-MM-DD HH:mm:ss"},formItemProps:{rules:[e()]}},{field:"is_closed",label:"是否結案",colProps:{span:12},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"結案",value:!0},{label:"未結案",value:!1}]},value:!0}]),i=f({visit_date:[e()],sales_name:[e()],client_name:[e()],visit_type:[e()],purpose:[e()],is_closed:[e()]}),{formRegister:m,formMethods:s}=b(),{setValues:t,getFormData:r,getElFormExpose:P}=s,y=()=>p(this,null,function*(){const o=yield P();if(yield o==null?void 0:o.validate())return yield r()});return Y(()=>l.currentRow,o=>{o&&t(o)},{deep:!0,immediate:!0}),c({submit:y}),(o,d)=>(v(),g(_(w),{rules:i,onRegister:_(m),schema:n},null,8,["rules","onRegister","schema"]))}});export{R as _};
