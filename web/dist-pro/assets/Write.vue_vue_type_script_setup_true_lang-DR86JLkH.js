var n=(r,p,o)=>new Promise((i,a)=>{var c=t=>{try{s(o.next(t))}catch(l){a(l)}},u=t=>{try{s(o.throw(t))}catch(l){a(l)}},s=t=>t.done?i(t.value):Promise.resolve(t.value).then(c,u);s((o=o.apply(r,p)).next())});import{u as P,F as _}from"./useForm-wf4P-Ogs.js";import{u as y}from"./useValidator-CSahUiaF.js";import{c as g}from"./role-oKzsXntr.js";import{c as R}from"./dept-CNTuXFWA.js";import{l as x,J as m,b as A,m as S,S as k,u as d}from"./vue-chunks-DM5Q6aJS.js";const B=x({__name:"Write",props:{currentRow:{type:Object,default:()=>null}},setup(r,{expose:p}){const{required:o,isTelephone:i,isEmail:a}=y(),c=r,u=m([{field:"name",label:"姓名",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"nickname",label:"職稱",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"telephone",label:"帳號",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"email",label:"郵箱",colProps:{span:12},component:"Input",componentProps:{style:{width:"100%"}}},{field:"gender",label:"性别",colProps:{span:12},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"男",value:"0"},{label:"女",value:"1"}]},value:"0"},{field:"",label:"默認密碼",colProps:{span:12},component:"Text",componentProps:{style:{width:"100%"}},value:":  帳號",ifshow:e=>e.id===void 0},{field:"is_staff",label:"工作人員",colProps:{span:24},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"是",value:!0},{label:"否",value:!1}]},value:!0},{field:"is_active",label:"狀態",colProps:{span:24},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"正常",value:!0},{label:"停用",value:!1}]},value:!0},{field:"role_ids",label:"角色",colProps:{span:24},component:"Select",componentProps:{style:{width:"100%"},multiple:!0},optionApi:()=>n(this,null,function*(){return(yield g()).data}),value:[],ifshow:e=>e.is_staff},{field:"dept_ids",label:"部門",colProps:{span:24},component:"TreeSelect",componentProps:{style:{width:"100%"},multiple:!0,checkStrictly:!0,defaultExpandAll:!0},optionApi:()=>n(this,null,function*(){return(yield R()).data}),value:[],ifshow:e=>e.is_staff}]),s=m({name:[o()],is_active:[o()],is_staff:[o()],role_ids:[o()],dept_ids:[o()],telephone:[o(),{validator:i,trigger:"blur"}],email:[{validator:a,trigger:"blur"}]}),{formRegister:t,formMethods:l}=P(),{setValues:f,getFormData:h,getElFormExpose:b}=l,v=()=>n(this,null,function*(){const e=yield b();if(yield e==null?void 0:e.validate())return yield h()});return A(()=>c.currentRow,e=>{e&&f(e)},{deep:!0,immediate:!0}),p({submit:v}),(e,w)=>(S(),k(d(_),{rules:s,onRegister:d(t),schema:u},null,8,["rules","onRegister","schema"]))}});export{B as _};
