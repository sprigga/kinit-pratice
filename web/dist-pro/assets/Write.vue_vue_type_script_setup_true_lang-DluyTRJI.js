var m=(l,p,e)=>new Promise((r,s)=>{var c=o=>{try{a(e.next(o))}catch(n){s(n)}},i=o=>{try{a(e.throw(o))}catch(n){s(n)}},a=o=>o.done?r(o.value):Promise.resolve(o.value).then(c,i);a((e=e.apply(l,p)).next())});import{u as P,F as y}from"./useForm-DBy6iRN_.js";import{u as w}from"./useValidator-3LOiG8nN.js";import{k as _}from"./index-ZB82WqWX.js";import{b as v}from"./dept-BoXP6Qyc.js";import{l as I,J as d,b as g,m as k,S as x,u}from"./vue-chunks-DM5Q6aJS.js";const B=I({__name:"Write",props:{currentRow:{type:Object,default:()=>null},parentId:_.number.def(void 0)},setup(l,{expose:p}){const{required:e}=w(),r=l,s=d([{field:"parent_id",label:"上级部門",colProps:{span:24},component:"TreeSelect",componentProps:{style:{width:"100%"},checkStrictly:!0,placeholder:"請選擇上级部門",nodeKey:"value",defaultExpandAll:!0},optionApi:()=>m(this,null,function*(){return(yield v()).data}),value:r.parentId},{field:"name",label:"部門名稱",component:"Input",colProps:{span:12}},{field:"dept_key",label:"部門標識",component:"Input",colProps:{span:12}},{field:"owner",label:"負責人",component:"Input",colProps:{span:12}},{field:"phone",label:"聯絡電話",component:"Input",colProps:{span:12}},{field:"email",label:"郵箱",component:"Input",colProps:{span:12}},{field:"desc",label:"描述",component:"Input",colProps:{span:12}},{field:"order",label:"顯示排序",component:"InputNumber",colProps:{span:12},componentProps:{style:{width:"100%"}}},{field:"disabled",label:"是否禁用",colProps:{span:12},component:"RadioGroup",componentProps:{style:{width:"100%"},options:[{label:"正常",value:!1},{label:"停用",value:!0}]},value:!1}]),c=d({name:[e()],dept_key:[e()],disabled:[e()],order:[e()]}),{formRegister:i,formMethods:a}=P(),{setValues:o,getFormData:n,getElFormExpose:f}=a,b=()=>m(this,null,function*(){const t=yield f();if(yield t==null?void 0:t.validate())return yield n()});return g(()=>r.currentRow,t=>{t&&o(t)},{deep:!0,immediate:!0}),p({submit:b}),(t,h)=>(k(),x(u(y),{rules:c,onRegister:u(i),schema:s,labelWidth:100},null,8,["rules","onRegister","schema"]))}});export{B as _};
