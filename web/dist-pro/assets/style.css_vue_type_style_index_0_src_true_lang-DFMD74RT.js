var f=(r,h,i)=>new Promise((b,c)=>{var n=a=>{try{s(i.next(a))}catch(u){c(u)}},p=a=>{try{s(i.throw(a))}catch(u){c(u)}},s=a=>a.done?b(a.value):Promise.resolve(a.value).then(n,p);s((i=i.apply(r,h)).next())});import{z as k,T,E as z}from"./wang-editor-kNnY1XhY.js";import{r as E,k as v,E as x,F as B}from"./index-TVUJ5EGw.js";import{b as t}from"./element-plus-DaxMU9jX.js";import{l as F,e as y,u as l,s as N,a as U,b as C,z as $,m as D,p as M,O as I,U as R,n as _}from"./vue-chunks-DM5Q6aJS.js";const j=r=>E.post({url:"/vadmin/system/upload/image/to/oss",headersType:"multipart/form-data",data:r}),A=r=>E.post({url:"/vadmin/system/upload/video/to/oss",headersType:"multipart/form-data",data:r}),G={class:"border-1 border-solid border-[var(--el-border-color)] z-10"},Q=F({__name:"Editor",props:{editorId:v.string.def("wangeEditor-1"),height:v.oneOfType([Number,String]).def("500px"),editorConfig:{type:Object,default:()=>{}},modelValue:v.string.def("")},emits:["change","update:modelValue"],setup(r,{expose:h,emit:i}){const b=x(),c=y(()=>b.getCurrentLocale);k(l(c).lang);const n=r,p=i,s=N(),a=U("");C(()=>n.modelValue,o=>{o!==l(a)&&(a.value=o)},{immediate:!0}),C(()=>a.value,o=>{p("update:modelValue",o)});const u=o=>{s.value=o},O=y(()=>Object.assign({readOnly:!1,customAlert:(e,m)=>{switch(m){case"success":t.success(e);break;case"info":t.info(e);break;case"warning":t.warning(e);break;case"error":t.error(e);break;default:t.info(e);break}},autoFocus:!1,scroll:!0,uploadImgShowBase64:!0,MENU_CONF:{uploadImage:{customUpload(e,m){return f(this,null,function*(){if(!["image/jpeg","image/gif","image/png"].includes(e.type))return t.error(`${e.name}上傳失敗：上傳圖片只能是 JPG/GIF/PNG/ 格式!`);if(!(e.size/1024/1024<2))return t.error(`${e.name}上傳失敗：上傳圖片大小不能超過 2MB!`);const d=new FormData;d.append("file",e),d.append("path","editor/image");const g=yield j(d);m(g.data,"",g.data)})}},uploadVideo:{customUpload(e,m){return f(this,null,function*(){if(!["video/mp4","video/mpeg"].includes(e.type))return t.error(`${e.name}上傳失敗：上傳視頻只能是 mp4/mpeg/ 格式!`);if(!(e.size/1024/1024<5))return t.error(`${e.name}上傳失敗：上傳視頻大小不能超過 5MB!`);const d=new FormData;d.append("file",e),d.append("path","editor/video");const g=yield A(d);m(g.data,"")})}}}},n.editorConfig||{})),S=y(()=>({height:B(n.height)?`${n.height}px`:n.height})),V=o=>{p("change",o)};return $(()=>{const o=l(s.value);o==null||o.destroy()}),h({getEditorRef:()=>f(this,null,function*(){return yield _(),l(s.value)})}),(o,w)=>(D(),M("div",G,[I(l(T),{editor:s.value,editorId:r.editorId,class:"border-0 b-b-1 border-solid border-[var(--el-border-color)]"},null,8,["editor","editorId"]),I(l(z),{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=e=>a.value=e),editorId:r.editorId,defaultConfig:O.value,style:R(S.value),onOnChange:V,onOnCreated:u},null,8,["modelValue","editorId","defaultConfig","style"])]))}});export{Q as _};
